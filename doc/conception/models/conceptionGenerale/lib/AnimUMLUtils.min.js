/*! For license information please see AnimUMLUtils.min.js.LICENSE.txt */
(()=>{var __webpack_modules__={5666:t=>{!function(e){"use strict";var n,s=Object.prototype,r=s.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag",l=e.regeneratorRuntime;if(l)t.exports=l;else{(l=e.regeneratorRuntime=t.exports).wrap=b;var u="suspendedStart",p="suspendedYield",f="executing",d="completed",m={},h={};h[a]=function(){return this};var g=Object.getPrototypeOf,_=g&&g(g(C([])));_&&_!==s&&r.call(_,a)&&(h=_);var y=$.prototype=E.prototype=Object.create(h);w.prototype=y.constructor=$,$.constructor=w,$[c]=w.displayName="GeneratorFunction",l.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},l.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,$):(t.__proto__=$,c in t||(t[c]="GeneratorFunction")),t.prototype=Object.create(y),t},l.awrap=function(t){return{__await:t}},S(O.prototype),O.prototype[o]=function(){return this},l.AsyncIterator=O,l.async=function(t,e,n,s){var r=new O(b(t,e,n,s));return l.isGeneratorFunction(e)?r:r.next().then((function(t){return t.done?t.value:r.next()}))},S(y),y[c]="Generator",y[a]=function(){return this},y.toString=function(){return"[object Generator]"},l.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var s=e.pop();if(s in t)return n.value=s,n.done=!1,n}return n.done=!0,n}},l.values=C,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function s(s,r){return o.type="throw",o.arg=t,e.next=s,r&&(e.method="next",e.arg=n),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return s("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return s(a.catchLoc,!0);if(this.prev<a.finallyLoc)return s(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return s(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return s(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var s=this.tryEntries[n];if(s.tryLoc<=this.prev&&r.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var i=s;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var s=n.completion;if("throw"===s.type){var r=s.arg;k(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,s){return this.delegate={iterator:C(t),resultName:e,nextLoc:s},"next"===this.method&&(this.arg=n),m}}}function b(t,e,n,s){var r=e&&e.prototype instanceof E?e:E,i=Object.create(r.prototype),a=new A(s||[]);return i._invoke=function(t,e,n){var s=u;return function(r,i){if(s===f)throw new Error("Generator is already running");if(s===d){if("throw"===r)throw i;return N()}for(n.method=r,n.arg=i;;){var a=n.delegate;if(a){var o=x(a,n);if(o){if(o===m)continue;return o}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(s===u)throw s=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);s=f;var c=v(t,e,n);if("normal"===c.type){if(s=n.done?d:p,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(s=d,n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function v(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function E(){}function w(){}function $(){}function S(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function O(t){function e(n,s,i,a){var o=v(t[n],t,s);if("throw"!==o.type){var c=o.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?Promise.resolve(l.__await).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):Promise.resolve(l).then((function(t){c.value=t,i(c)}),a)}a(o.arg)}var n;this._invoke=function(t,s){function r(){return new Promise((function(n,r){e(t,s,n,r)}))}return n=n?n.then(r,r):r()}}function x(t,e){var s=t.iterator[e.method];if(s===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=n,x(t,e),"throw"===e.method))return m;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var r=v(s,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,m;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,m):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,m)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function C(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var s=-1,i=function e(){for(;++s<t.length;)if(r.call(t,s))return e.value=t[s],e.done=!1,e;return e.value=n,e.done=!0,e};return i.next=i}}return{next:N}}function N(){return{value:n,done:!0}}}(function(){return this}()||Function("return this")())},5125:t=>{"use strict";t.exports=globalThis["./pako.min.js"]},7582:t=>{"use strict";t.exports=globalThis["./peg-0.10.0.min.js"]},9317:t=>{"use strict";t.exports=globalThis.FS},1678:t=>{"use strict";t.exports=globalThis.PATH},6731:t=>{"use strict";t.exports=globalThis.SVGDOM},5403:t=>{"use strict";t.exports=globalThis.SVGDOM_CSS},9976:t=>{"use strict";t.exports=globalThis.URL},8263:(t,e,n)=>{"use strict";n.d(e,{Tk:()=>r,vs:()=>i,wB:()=>a});var s=n(9625);const r=Symbol("default");function i(t,e={},n,s="type"){function i(t){return Object.fromEntries(Object.entries(t).map((([t,e])=>[t,"object"==typeof e?a(e,t):e])))}function a(t,o){return null===t?null:void 0===t?void 0:"string"==typeof t||"number"==typeof t?t:t instanceof Array?t.map(((t,e)=>a(t,`${o}[${e}]`))):t[s]in e?e[t[s]](t,(e=>t===e?i(t):a(e)),n,o):r in e?e[r](t,(e=>t===e?i(t):a(e)),n,o):i(t)}return a(t)}function a(t,e,n={},r=[],i=!1){const{ignoreKey:o=(()=>!1),ignoreNode:c=(()=>!1)}=n;function l(t,e,s){const r=a(t,e,n,s,i);return i&&!r&&console.log("unmatched:",t,e,s),r}if(null===t&&null===e)return!0;if(null===t||null===e)return i&&console.log("unmatched:",t,e,"\t=>",!1),!1;if(Array.isArray(t)&&Array.isArray(e)){if(e.length<=t.length){return e.map(((e,n)=>l(t[n],e,[...r,n]))).every((t=>t))}return i&&console.log("unmatched length:",t.length,e.length,"\t=>",!1,r),t.map(((t,n)=>l(t,e[n],[...r,n]))).every((t=>t)),!1}if(Array.isArray(t)&&t.every(c))return!0;if(Array.isArray(e)&&e.every(c))return!0;if("object"==typeof t&&c(t))return!0;if("object"==typeof e&&c(e))return!0;if("object"==typeof t&&"object"==typeof e){if(c(e)||c(t))return!0;return Object.entries(e).filter((([t,e])=>!o(t))).map((([e,n])=>l(t[e],n,[...r,e]))).every((t=>t))}{const n=t===e;return i&&!n&&"string"==typeof t&&"string"==typeof e&&console.log((0,s.$Q)(t,e)),n}}},2392:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{E:()=>msgSigRegex,i:()=>AnimUMLEngine});var _Utils_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(9625),_DBM_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7695),_JavaScriptActionLanguageParser_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7481),_Webots_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(490),_ModelUtils_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(4057),debugAdditionalOperations=!1,debugEvalActions=!1;const uninitValRegex=/^uninitializedValue\((.*)\)$/,msgSigRegex=/([^]*)\(([^)]*)\)/;class AnimUMLEngine{constructor(model,settings_){this.name="AnimUML",this.setModel(model),this.settings=settings_;const currentModel=model;this.nbMessagesToKeepInEther=(null==settings_?void 0:settings_.nbMessagesToKeepInEther)||0;const self=this;this.extraOperations={},this.extraOperations.__builtin__={Webots:_Webots_js__WEBPACK_IMPORTED_MODULE_2__.R3,DBM:_DBM_js__WEBPACK_IMPORTED_MODULE_0__.l,plugin(name){var _self$currentModel$se,_self$currentModel$se2;let ret=null===(_self$currentModel$se=self.currentModel.settings)||void 0===_self$currentModel$se||null===(_self$currentModel$se2=_self$currentModel$se.plugins)||void 0===_self$currentModel$se2?void 0:_self$currentModel$se2[name];if(ret)return"string"==typeof ret&&(ret=eval(ret)),ret;console.error("Plugin not found:",name)},debug:(t,...e)=>(console.log("DEBUG:",...e,t),t),get config(){return self.treeifyConfig(self.configuration)},get jsonConfig(){return JSON.stringify(self.treeifyConfig(self.configuration))},JSON:{stringify:JSON.stringify,parse:JSON.parse},async digest(t,e,n=32){const s=await crypto.subtle.digest({name:t},(new TextEncoder).encode(e)),r=[...new Uint8Array(s)].map((t=>t.toString(16).padStart(2,"0"))).join("");return"number"==typeof n?BigInt.asUintN(n,BigInt("0x0"+r)):r}},this.sysHistory=[]}close(){var t,e;null===(t=(e=this.extraOperations.__builtin__.Webots).close)||void 0===t||t.call(e)}setModel(model){this.currentModel=model;for(const[name,def]of Object.entries((null==model||null===(_model$settings=model.settings)||void 0===_model$settings?void 0:_model$settings.plugins)??{})){var _model$settings,_plugin$init;console.log("Loading plugin:",name);const plugin="string"==typeof def?eval(def):def;model.settings.plugins[name]=plugin,null===(_plugin$init=plugin.init)||void 0===_plugin$init||_plugin$init.call(plugin,this)}let engine=this;this.EMIOperations={FALSE:0,TRUE:1,getters:{params(t){var e;debugAdditionalOperations&&console.log("params of ",t);var n=engine.configuration.objectState[t.name],s=n.__OP_NAME__,r=n.__ARGS__,i={};const a=null===(e=t.operationByName)||void 0===e?void 0:e[s];return a&&a.parameters&&a.parameters.forEach(((t,e)=>{"string"!=typeof t&&(t=t.name),i[t]=1*r[e]})),Object.assign(i,n.__NAMED_ARGS__),i}},SEND(t,e){debugAdditionalOperations&&console.log("SEND(%s, %s, ...)",t==this?"this":t,e.valueOfProperty),t[e.valueOfProperty].apply(this,Array.prototype.slice.call(arguments,2))},GET_ACTIVE_PEER(t,e){debugAdditionalOperations&&console.log("GET_ACTIVE_PEER(%s, %s, ...)",t==this?"this":t,e.valueOfProperty);let n=unescEMI(t.valueOfProperty);n.startsWith("ROOT_")&&(n=n.replace(/^ROOT_instMain\./,"").replace(/\./g,"_"));const s=engine.currentModel.getObject(n);return engine.currentModel.navigateThroughPorts(s,engine.currentModel.getObjectRelative(s,e.valueOfProperty),debugEvalActions).target},GET(t,e){var n,s=t;if(t.name&&engine.currentModel.getObject(t.name))s=engine.configuration.objectState[t.name];else if(t!=this&&e.valueOfProperty){var r;const e=unescEMI(t.valueOfProperty);e==(null===(r=engine.currentModel.getObject(e))||void 0===r?void 0:r.name)&&(s=engine.configuration.objectState[e])}return null==n&&(n=s[escAttr(e.valueOfProperty)]),null==n&&(n=!1),debugAdditionalOperations&&console.log("GET(%s, %s) => ",t==this?"this":t,e.valueOfProperty,n),n},SET(t,e,n){debugAdditionalOperations&&console.log("SET(%s, %s, %s)",t==this?"this":t,e.valueOfProperty,n),t.name&&engine.currentModel.getObject(t.name)&&(t=engine.configuration.objectState[t.name]),t[escAttr(e.valueOfProperty)]=n,n||delete t[escAttr(e.valueOfProperty)]},AT:(t,e)=>(debugAdditionalOperations&&console.log("AT(%s, %s)",t,e),t[e]),CALL(t,e){return debugAdditionalOperations&&console.log("CALL(%s, %s, ...)",t==this?"this":t,signal.valueOfProperty),t[e.valueOfProperty].apply(this,Array.prototype.slice(arguments,2))},INC(t,e,n){debugAdditionalOperations&&console.log("INC(%s, %s, %s)",t==this?"this":t,e.valueOfProperty,n);const s=escAttr(e.valueOfProperty);t[s]+""!="undefined"?t[s]+=n:t[s]=n,t[s]||delete t[s]},DEC(t,e,n){debugAdditionalOperations&&console.log("DEC(%s, %s, %s)",t==this?"this":t,e.valueOfProperty,n);const s=escAttr(e.valueOfProperty);t[s]+""!="undefined"?t[s]-=n:t[s]=-n,t[s]||delete t[s]},IS_IN_STATE(t,e){const n=engine.configuration.currentState[unescEMI(t.valueOfProperty)].includes(engine.currentModel.getState(unescEMI(e.valueOfProperty)));return debugAdditionalOperations&&console.log("IS_IN_STATE('%o', '%o') : %o",t,e,n),n},MESSAGES:()=>engine.lastSteps().flatMap((t=>t.messages)),SENT_MESSAGES:()=>engine.lastSteps().flatMap((t=>t.messages.filter((e=>e.sentAt==t)))),RECEIVED_MESSAGES:()=>engine.lastSteps().flatMap((t=>t.messages.filter((e=>e.receivedAt==t)))),IS_TRANSITION(t){var e;return(null===(e=engine.lastSteps()[0])||void 0===e?void 0:e.cause)==="transition:"+t.valueOfProperty},EP_GET_FIRST(t){var e;debugAdditionalOperations&&console.log("EP_GET_FIRST('%o')",t);const n=t.name;let s=null===(e=engine.configuration.objectState[n].__EP__)||void 0===e?void 0:e[0];if(s){const t=s.signature.replace(msgSigRegex,"$1");s=`SIGNAL_${t}`}return s},EP_IS_EMPTY(t){let e;if(debugAdditionalOperations&&console.log("EP_IS_EMPTY('%o')",t),t==this)e=t.__actualTargetObject__.name;else{e=unescEMI(t.valueOfProperty),e.startsWith("ROOT_")&&(e=e.replace(/^ROOT_instMain\./,"").replace(/\./g,"_"));const n=engine.currentModel.getObjectRelative(t.__actualTargetObject__,e);n&&(e=n.name)}var n=Object.values(engine.configuration.ether).flatMap((t=>t.map((t=>t.target)))).includes(e);return!(0,_Utils_js__WEBPACK_IMPORTED_MODULE_4__.Xq)(engine.configuration.objectState[e].__EP__)&&!n},EP_CONTAINS(t,e){var n,s;debugAdditionalOperations&&console.log("EP_CONTAINS(%s, %s)",t.valueOfProperty,e.valueOfProperty);const r=unescEMI(t.valueOfProperty);let i=engine.configuration.objectState[r];i||(i=engine.currentModel.getObjectRelative(t.__actualTargetObject__,r));const a=e.valueOfProperty.replace(/^SIGNAL_/,""),o=new RegExp(String.raw`^${a}\(`);return(null===(n=engine.configuration.ether[a.replace(/^SIGNAL_/,"")])||void 0===n?void 0:n.length)>0||1==(null===(s=i.__EP__)||void 0===s?void 0:s.some((t=>t.signature.match(o))))},printf(t){console.log.apply(console,arguments)}}}copyConfig(t){var e=Object.assign({},t);return e.currentState={},Object.entries(t.currentState).forEach((([t,n])=>{e.currentState[t]=n.slice(0)})),e.histories={},Object.entries(t.histories).forEach((([t,n])=>{e.histories[t]=n.slice(0)})),e.objectState={},Object.entries(t.objectState).forEach((([t,n])=>{e.objectState[t]={...n},n.__EP__&&(e.objectState[t].__EP__=n.__EP__.slice(0))})),e.ether={...e.ether},e}isActive(t){return this.currentModel.isActive(t)&&!t.isObserver}serializeConfig(t){try{return JSON.stringify(this.treeifyConfig(t))}catch(e){throw console.log("Problem serializing configuration:",t),e}}treeifyConfig(t,e){function n(t){return{source:e?t.source:"[",target:t.target,signature:t.signature,tag:t.tag}}var s={currentState:{},histories:{},objectState:Object.fromEntries(Object.entries(t.objectState).map((([t,e])=>[t,Object.fromEntries(Object.entries(e).sort(_Utils_js__WEBPACK_IMPORTED_MODULE_4__.hN).map((([t,e])=>"__EP__"===t?[t,e.map(n)]:[t,e])))])).sort(_Utils_js__WEBPACK_IMPORTED_MODULE_4__.hN)),ether:Object.fromEntries(Object.entries(t.ether).map((([t,e])=>[t,e.map(n)])).sort(_Utils_js__WEBPACK_IMPORTED_MODULE_4__.hN))};return this.currentModel.objects.filter((t=>this.isActive(t))).forEach((e=>{var n;s.currentState[e.name]=null===(n=t.currentState[e.name])||void 0===n?void 0:n.map((t=>this.currentModel.stateFullName(t)))})),Object.entries(t.histories||{}).forEach((([t,e])=>{s.histories[t]=e.map((t=>this.currentModel.stateFullName(t)))})),s}addToEther(t){var e,n;if(null===(e=this.settings)||void 0===e||!e.disableEther)if(t.target&&"]"!==t.target&&null!==(n=this.settings)&&void 0!==n&&n.enableEventPools){const e=this.configuration.objectState[t.target];e.__EP__=e.__EP__||[],e.__EP__.push(t)}else{var s,r=t.signature.replace(msgSigRegex,"$1"),i=this.configuration.ether[r]||[];if(null!==(s=this.settings)&&void 0!==s&&s.keepOneMessagePerTrigger){const t=0==this.nbMessagesToKeepInEther?i.length:-this.nbMessagesToKeepInEther;i.slice(0,t).forEach((t=>{t.ignored=!0})),i=i.slice(t)}t.ignored=!1,i.push(t),this.configuration.ether[r]=i}}removeFromEther(t){var e=t.signature.replace(msgSigRegex,"$1");const n=this.getEP(t.target);if(n.some((e=>e==t))){var s;1===n.length?delete this.getObjectState(t.target).__EP__:null!==(s=this.settings)&&void 0!==s&&s.autoIgnore?TODO:(0,_Utils_js__WEBPACK_IMPORTED_MODULE_4__.Od)(n,t)}else{var r=this.configuration.ether[e];1===r.length?delete this.configuration.ether[e]:(0,_Utils_js__WEBPACK_IMPORTED_MODULE_4__.Od)(r,t)}}getObjectState(t){return this.configuration.objectState[t]}getEP(t){return this.getObjectState(t).__EP__||[]}findMessageInEP(t,e,n){return this.getEP(e).find((e=>e.signature.replace(msgSigRegex,"$1")===t&&(!n||n.includes(e.tag))))}findMessage(t,e,n){t=t.replace(msgSigRegex,"$1");var s=this.findMessageInEP(t,e,n);if(s)return s;var r=this.configuration.ether[t];return r&&r.length>0?e?r.find((t=>"]"===t.target||t.target===e&&(!n||n.includes(t.tag)))):r[0]:void 0}async backToInternal(t){const e=(t+="").split(","),n=((0,_Utils_js__WEBPACK_IMPORTED_MODULE_4__.Z$)(this.sysHistory),[]);let s=this.sysHistory;for(;e.length>1;){const t=1*e.shift();n.push(...s.slice(0,t));const r=1*e.shift(),i=0==t?s:s[t-1],[a,o]=[i.mainIdx,i.alts],c=s.slice(t);if(i.mainIdx=a<=r&&(0,_Utils_js__WEBPACK_IMPORTED_MODULE_4__.Xq)(c)?r+1:r,s=o[r],0==t&&(s.alts=i.alts,s.mainIdx=i.mainIdx),o.splice(r,1),(0,_Utils_js__WEBPACK_IMPORTED_MODULE_4__.Xq)(c)){const t=r<a?a-1:a;o.splice(t,0,c)}}t=e[0];const r=s.splice(t);n.push(...s);const i=(0,_Utils_js__WEBPACK_IMPORTED_MODULE_4__.Z$)(s);if(i){i.alts=i.alts||[];const t=i.mainIdx;i.mainIdx=0,(0,_Utils_js__WEBPACK_IMPORTED_MODULE_4__.Xq)(r)&&i.alts.splice(t,0,r)}else{console.assert(s==this.sysHistory),s.alts=s.alts||[];const t=s.mainIdx;s.mainIdx=0,(0,_Utils_js__WEBPACK_IMPORTED_MODULE_4__.Xq)(r)&&s.alts.splice(t,0,r)}n.alts=this.sysHistory.alts,n.mainIdx=this.sysHistory.mainIdx,this.sysHistory=n;const a=(0,_Utils_js__WEBPACK_IMPORTED_MODULE_4__.Z$)(this.sysHistory);var o,c;a?(this.configuration=this.copyConfig(a.configurationAfter),await(null===(o=this.settings)||void 0===o||null===(c=o.onconfigchanged)||void 0===c?void 0:c.call(o))):(await this.reset(),this.sysHistory=n)}isActivable(t){const e=this.currentModel.getTransObject(t);if(e.isObserver)return!1;var n=this.configuration.currentState[e.name];if(n){var s=(0,_Utils_js__WEBPACK_IMPORTED_MODULE_4__.Z$)(n);return s.kind?this.currentModel.stateFullName(t.source)===this.currentModel.stateFullName(s):n.map((t=>this.currentModel.stateFullName(t))).includes(this.currentModel.stateFullName(t.source))}}eventMatched(t){var e,n,s;return this.currentModel.noEventTrigger(t)||!(null!==(e=this.settings)&&void 0!==e&&e.checkEvents)&&!(null!==(n=this.settings)&&void 0!==n&&null!==(s=n.isCheckedEvent)&&void 0!==s&&s.call(n,t.trigger))||this.findMessage(t.trigger,this.currentModel.getTransObject(t).name,t.ports)}isCurrentState(t){var e;return null===(e=this.configuration.currentState[this.currentModel.getStateObject(t).name])||void 0===e?void 0:e.map((t=>this.currentModel.stateFullName(t))).includes(this.currentModel.stateFullName(t))}setInitialState(t){this.configuration.currentState[t.name]=[this.currentModel.getInitial(t)]}getFireable(t,e){return e=e||(t=>this.isFireable(t)),this.configuration.currentState[t.name].flatMap((t=>(t.outgoing||[]).concat(Object.values(t.internalTransitions||{})).filter(e)))}callOperation(t,e,n){var s,r,i;const[,a,o,c]=t.match(/^([^.]*)[.]([^(]*)(?:\(([^)]*)\))?/);var l=this.currentModel.getObject(a),u={cause:`operation:${t}${e?`:${e}`:n?`:${n.name}`:""}`,activeObject:l,configuration:this.copyConfig(this.configuration),messages:[]},p=this.findMessage(o,l.name),f=l.operationByName&&l.operationByName[o];if(!f&&l.class){const t=this.currentModel.classes[l.class];t&&(f=(0,_ModelUtils_js__WEBPACK_IMPORTED_MODULE_3__.B8)(t)[o])}null!==(s=f)&&void 0!==s&&s.private&&(e=l.name);const d=c??(null===(r=f)||void 0===r||null===(i=r.parameters)||void 0===i?void 0:i.map((t=>"string"==typeof t?t:t.name??"*")).join(", "))??"";let m;return!p||e||n?(p={source:e||(n?n.name:"["),target:autoReceiveDisabled.checked?"]":l.name,signature:`${o}(${d})`,receivedAt:autoReceiveDisabled.checked?void 0:u,sentAt:u},u.messages.push(p),!this.isActive(l)||f&&f.method||this.addToEther(p)):(p.receivedAt=u,p.target=l.name,u.messages.push(p),this.removeFromEther(p)),f&&f.method&&(m=this.evalActions(f.method,u,l,this.extraOperations,this,!1,!0)),u.configurationAfter=this.copyConfig(this.configuration),this.sysHistory.push(u),m}registerArguments(t,e,n){if(e.match(msgSigRegex)){const s=e.replace(msgSigRegex,"$2").trim();if(s){const e=s.split(",").map((t=>t.trim()));this.configuration.objectState[t.name].__NAMED_ARGS__=Object.fromEntries((0,_Utils_js__WEBPACK_IMPORTED_MODULE_4__.$R)(e,n.map((t=>t))))}}}async fireInternal(t,e=!1){var n,s,r,i,a;if(this.isFireable(t)||e){this.configuration.histories=this.configuration.histories||{},this.configuration.objectState=this.configuration.objectState||{};var o=this.currentModel.getTransObject(t);this.configuration.objectState[o.name]=this.configuration.objectState[o.name]||{};var c={cause:`transition:${this.currentModel.transFullName(t)}`,activeObject:o,configuration:this.copyConfig(this.configuration),messages:[]},l=this.configuration.currentState[o.name];if("shallowHistory"==t.target.kind){var u=this.configuration.histories[this.currentModel.stateFullName(t.target.region)];this.configuration.currentState[o.name]=u||this.currentModel.fullState(t.target.region)}else t.isInternal||(this.configuration.currentState[o.name]=this.currentModel.fullState(t.target));for(;((0,_Utils_js__WEBPACK_IMPORTED_MODULE_4__.Z$)(this.configuration.currentState[o.name]).states||[]).length>0;)this.configuration.currentState[o.name].push(this.currentModel.getInitial((0,_Utils_js__WEBPACK_IMPORTED_MODULE_4__.Z$)(this.configuration.currentState[o.name])));var p,f=this.currentModel.stateFullName(this.configuration.currentState[o.name][0]),d=[this.configuration.currentState[o.name][0]];this.configuration.currentState[o.name].slice(1).forEach((t=>{const e=(0,_Utils_js__WEBPACK_IMPORTED_MODULE_4__.Z$)(d).states.some((t=>"shallowHistory"===t.kind));d.push(t),e&&(this.configuration.histories[f]=d.slice(0)),f+="."+t.name})),t.trigger&&((p=this.findMessage(t.trigger,o.name,t.ports))?(p.receivedAt=c,p.target=o.name,c.messages.push(p),this.removeFromEther(p)):c.messages.push({source:"[",target:o.name,signature:t.trigger,receivedAt:c}));for(var m=this.configuration.currentState[o.name].slice(),h=0;h<m.length&&h<l.length&&m[h]===l[h]&&(t.source!=m[h]||t.isInternal);h++);if(l=l.slice(h),m=m.slice(h),await(0,_Utils_js__WEBPACK_IMPORTED_MODULE_4__.Mo)(l.slice(0).reverse(),(async t=>{t.exit&&await this.evalActions(t.exit,c,o,this.extraOperations,this)})),p){const e=p.signature.match(msgSigRegex);if(e){this.configuration.objectState[o.name].__OP_NAME__=e[1];const n=e[2].trim()?e[2].split(",").map((t=>JSON.parse(t.trim()))):[];this.configuration.objectState[o.name].__ARGS__=n,this.registerArguments(o,t.trigger,n)}}if(t.effect){const e=1==this.nextEffectAsAsync,n=1==this.nextEffectAsFunction;this.nextEffectAsFunction=this.nextEffectAsAsync=!1;const s=this.evalActions(t.effect,c,o,this.extraOperations,this,e,n);this.effectResult=s instanceof Promise?await s:s}var g=(0,_Utils_js__WEBPACK_IMPORTED_MODULE_4__.Z$)(this.configuration.currentState[o.name]);if(g.kind||(this.configuration.objectState[o.name].__OP_NAME__=void 0,this.configuration.objectState[o.name].__ARGS__=void 0,this.configuration.objectState[o.name].__NAMED_ARGS__=void 0),await(0,_Utils_js__WEBPACK_IMPORTED_MODULE_4__.Mo)(m,(async t=>{if(t.entry){const e=this.evalActions(t.entry,c,o,this.extraOperations,this);e instanceof Promise&&await e}})),c.configurationAfter=this.copyConfig(this.configuration),this.sysHistory.push(c),null!==(n=this.settings)&&void 0!==n&&n.fireInitialTransitions&&"initial"==g.kind){var _=g.outgoing[0];await this.fireInternal(_),(0,_Utils_js__WEBPACK_IMPORTED_MODULE_4__.Z$)(this.sysHistory).isAuto=!0}return await(null===(s=this.settings)||void 0===s||null===(r=s.onconfigchanged)||void 0===r?void 0:r.call(s)),await(null===(i=this.settings)||void 0===i||null===(a=i.onfired)||void 0===a?void 0:a.call(i,t)),p}console.error("Fired a non-fireable transition: ",this.currentModel.transFullName(t))}evalGuard(t){var e,n;if(null!==(e=this.settings)&&void 0!==e&&e.considerGuardsTrue)return!0;if("else"==(null===(n=t.guard)||void 0===n?void 0:n.trim())){const e=this.currentModel.getTransObject(t);return!t.source.outgoing.filter((e=>t!==e)).map((t=>this.evalActions(t.guard,s,e,this.extraOperations,this))).some((t=>t))}var s={messages:[]};return this.evalActions(t.guard,s,this.currentModel.getTransObject(t),this.extraOperations,this)}isFireable(t){return this.isActivable(t)&&this.eventMatched(t)&&(!t.guard||this.evalGuard(t))}getFireableTransitions(){var t,e=this.currentModel.objects.filter((t=>this.isActive(t))).flatMap((t=>{var e,n,s=this.getFireable(t);if(null!==(e=this.settings)&&void 0!==e&&e.checkEvents&&null!==(n=this.settings)&&void 0!==n&&n.matchFirst){var r;const e=(this.configuration.objectState[t.name].__EP__||[]).map((t=>t.signature.replace(msgSigRegex,"$1"))),n=null===(r=(0,_Utils_js__WEBPACK_IMPORTED_MODULE_4__.MR)(s.filter((t=>!this.currentModel.noEventTrigger(t))),(t=>e.indexOf(t.trigger.replace(msgSigRegex,"$1"))))[0])||void 0===r?void 0:r.trigger;n&&(s=s.filter((t=>this.currentModel.noEventTrigger(t)||t.trigger===n)))}return s}));if(null!==(t=this.settings)&&void 0!==t&&t.reactiveSystem){const n=this.currentModel;function s(t){return n.getTransObject(t).isActor||n.isAfter(t)}e.some((t=>!s(t)))&&(e=e.filter((t=>!s(t))))}return e}async getFireables(){return this.getFireableTransitions().map((t=>this.currentModel.transFullName(t)))}async getConfiguration(){return this.serializeConfig(this.configuration,!1)}async setConfiguration(t){var e,n;this.sysHistory.splice(0);var s=JSON.parse(t);this.configuration={currentState:Object.fromEntries(Object.entries(s.currentState).map((([t,e])=>[t,e.map((t=>this.currentModel.getState(t)))]))),histories:Object.fromEntries(Object.entries(s.histories).map((([t,e])=>[t,e.map((t=>this.currentModel.getState(t)))]))),objectState:s.objectState,ether:s.ether},await(null===(e=this.settings)||void 0===e||null===(n=e.onconfigchanged)||void 0===n?void 0:n.call(e))}async fire(t,e=!1){var n=this.currentModel.getTransition(t);await this.fireInternal(n,e);const s=this.currentModel.getTransObject(n),r=()=>(0,_Utils_js__WEBPACK_IMPORTED_MODULE_4__.Z$)(this.configuration.currentState[s.name]);for(;null!==(i=this.settings)&&void 0!==i&&i.autoFireAfterChoice&&"choice"===r().kind;){var i,a=this.getFireable(s);if(1!=a.length&&(a=a.filter((t=>{var e;return"else"!==(null===(e=t.guard)||void 0===e?void 0:e.trim())}))),1!=a.length)throw"There should be exactly one fireable transition";n=a[0],await this.fireInternal(n)}}async reset(){var t,e,n;this.sysHistory=[];const s=this.currentModel;function r(t){return s.name.startsWith("UML2AnimUML_")?escAttr(t):t}this.configuration={currentState:{},histories:{},objectState:Object.fromEntries(this.currentModel.objects.map((t=>[t.name,Object.fromEntries(Object.entries(t.propertyByName||{}).filter((([t,e])=>e.defaultValue)).map((([t,e])=>[r(t),e.defaultValue])))]))),ether:{}};for(const t of this.currentModel.objects.filter((t=>this.isActive(t))))this.setInitialState(t);if(await(null===(t=this.settings)||void 0===t||null===(e=t.onconfigchanged)||void 0===e?void 0:e.call(t)),null!==(n=this.settings)&&void 0!==n&&n.fireInitialTransitions)for(const t of this.currentModel.objects.filter((t=>this.isActive(t)))){const e=this.getFireable(t);1!==e.length&&alert("Expected only one initial transition"),"initial"!==e[0].source.kind&&alert("Expected source of initial transition to be an initial Pseudostate"),await this.fireInternal(e[0]),(0,_Utils_js__WEBPACK_IMPORTED_MODULE_4__.Z$)(this.sysHistory).isAuto=!0}}get modelName(){var t;return null===(t=this.currentModel)||void 0===t?void 0:t.name}async parseTransition(t){return t}async parseConfiguration(t){return t}async showTransition(t){const e=this.currentModel.getTransition(t);return{object:this.currentModel.getTransObject(e).name,fqn:t,name:e.name,source:e.source.name,target:e.target.name}}async showConfiguration(t){return JSON.parse(t)}async evaluateAtom(t,e){return this.evalActions(t,{},{},Object.assign(Object.fromEntries(this.currentModel.objects.map((t=>[`__ROOT__${t.name}`,this.configuration.objectState[t.name]]))),{...this.extraOperations,...e}),this)}lastSteps(){const t=this.sysHistory;var e=t.length-1;if(e<0)return[];{var n;function s(){return t[e]}const r=[s()];if(null!==(n=this.settings)&&void 0!==n&&n.autoFireAfterChoice)for(;s().cause.startsWith("transition:")&&"choice"===this.currentModel.getTransition(s().cause.replace(/^transition:/,"")).source.kind;)r.unshift(t[--e]);return r}}evalActions(t,e,n,s,r,i=!1,a=!1){return t=t.replace(/::/g,"."),this.evalActionsLegacy(t,e,n,s,r,i,a)}interpretActions(t,e,n,s,r,i,a){function o(t){return"__EMI__"+t}let c={FALSE:0,TRUE:1,SET(t,e,n){const s=r.configuration.objectState[t.object.name];n?s[o(e.name)]=n:delete s[o(e.name)]},GET(t,e){if(t instanceof p)return new d(t,e.name);{const s=r.configuration.objectState[t.object.name];if(o(e.name)in s)return s[o(e.name)];if(t.object==n){let t=r.currentModel.getObjectRelative(n,e.name);return t||(t=r.currentModel.getObject()),t&&(t=new m(t)),null==t&&(t=!1),t}return!1}},SEND(t,e,...n){},AT:(t,e)=>t[e],INC(t,e,n){t[o(e)]+=n},DEC(t,e,n){t[o(e)]-=n},EP_IS_EMPTY(t){var e;const n=t.path();"ROOT_instMain"===n[0]&&n.splice(0,1);const s=n.join("_");return 0==((null===(e=r.configuration.objectState[s].__EP__)||void 0===e?void 0:e.length)??0)}};this.parsedActionsCache=this.parsedActionsCache??{};const l=this.parsedActionsCache[t]??_JavaScriptActionLanguageParser_js__WEBPACK_IMPORTED_MODULE_1__.E2.parse(t);this.parsedActionsCache[t]=l;let u=0;class p{constructor(t){this.name=t}}class f extends p{constructor(t){super(t)}}class d extends p{constructor(t,e){super(e),this.source=t}path(){return[...this.source instanceof d?this.source.path():[this.source.name],this.name]}}class m{constructor(t){this.object=t}}const h={"==":(t,e)=>t==e,"&&":(t,e)=>t&&e,"||":(t,e)=>t||e,"<":(t,e)=>t<e,"<=":(t,e)=>t<=e,">":(t,e)=>t>e,">=":(t,e)=>t>=e},g={"-":t=>-t};function _(t){let e;switch(String(t.type)){case"memberAccessExp":e=_(t.left)[t.propertyName];break;case"numberExp":e=t.value;break;case"variableExp":"params"===t.name?e=r.EMIOperations.getters.params(n):"this"===t.name?e=new m(n):t.name in s||t.name in c?e=c[t.name]:t.name in r.configuration.objectState[n.name]||(e=new f(t.name));break;case"binaryOpExp":{const n=h[t.op];"function"!=typeof n&&console.log("error: binary operator",t.op,"not found"),e=n(_(t.left),_(t.right))}break;case"prefixUnaryExp":{const n=g[t.op];"function"!=typeof n&&console.log("error: unary prefix operator",t.op,"not found"),e=n(_(t.expression))}break;case"functionCallExp":const i=_(t.left);"function"!=typeof i&&console.log("error: expression did not evaluate to a function: ",(0,_JavaScriptActionLanguageParser_js__WEBPACK_IMPORTED_MODULE_1__.Pz)(t.left));e=i(...t.args.map((t=>_(t))));break;default:console.log("error: cannot interpret",t.type,":",t)}return(0,_JavaScriptActionLanguageParser_js__WEBPACK_IMPORTED_MODULE_1__.Pz)(t),e}let y;for(;u<l.length;){const t=l[u];(0,_JavaScriptActionLanguageParser_js__WEBPACK_IMPORTED_MODULE_1__.Pz)(t),"expressionStat"===String(t.type)?y=_(t.expression):console.log("error: cannot interpret",t.type,":",t),u++}return y}evalActionsLegacy(t,e,n,s,r,i=!1,a=!1){let o=this.EMIOperations;const c=this.currentModel;function l(t){return unescEMI("function"==typeof t&&t.valueOfProperty?t.valueOfProperty:"object"==typeof t&&t.returnValueOf?t.returnValueOf.signature:JSON.stringify(t))}function u(t){var e,n;return n=t==d?"this":"object"==typeof t&&t.returnValueOf?`${t.returnValueOf.signature}`:!t.valueOfProperty||null!==(e=r.settings)&&void 0!==e&&e.symbolicValues?l(t):0,debugEvalActions&&console.log("getValue => "+n),n}function p(t,i,a){debugEvalActions&&console.log("doSet(%o, %o, %o)",t,i,a);let o=t;if(t.valueOfProperty){const e=c.getObjectRelative(n,unescEMI(t.valueOfProperty));e&&e==c.getObject(e.name)?(t=r.configuration.objectState[e.name],i=i.split(".")[1]):(t=r.configuration.objectState[n.name],o={})}if("object"==typeof a&&a.returnValueOf){var u,p,f=a.returnValueOf;let o;"]"===f.target?(f.target=n.name,o=n):o=r.currentModel.getObject(f.target);var d,m=f.signature.replace(msgSigRegex,"$1"),h=null===(u=o)||void 0===u||null===(p=u.operationByName)||void 0===p?void 0:p[m];if(h&&h.method){var g;f.receivedAt=e;const t=f.signature.replace(msgSigRegex,"$2").trim(),n=t?t.split(",").map((t=>JSON.parse(t))):[];let i={...Object.fromEntries((0,_Utils_js__WEBPACK_IMPORTED_MODULE_4__.$R)((null===(g=h.parameters)||void 0===g?void 0:g.map((t=>"string"==typeof t?t:t.name)))||[],n)),...s};d=r.evalActions(h.method,e,o,i,r,!1,!0),f.returnedValue=d,debugEvalActions&&console.log("evaled method of %s to %o",m,d)}a.returnValueOf.signature=`${unescEMI(i)} = ${unescEMI(a.returnValueOf.signature)}`,"function"==typeof d&&d.valueOfProperty&&(d=`uninitializedValue(${d.valueOfProperty})`),d?t[i]=d:delete t[i]}else{a?t[i]=a:delete t[i];const s={source:n.name,target:o.valueOfProperty?unescEMI(o.valueOfProperty):n.name,signature:`${o.valueOfProperty?`${unescEMI(o.valueOfProperty)}.`:""}${unescEMI(i)} = ${l(a)}`,sentAt:e,receivedAt:e,type:"set"};e.messages.push(s)}return!0}const f=n.name?r.configuration.objectState[n.name]:n,d=new Proxy(f,{get(t,i){var a;if("__actualTargetObject__"==i)return n;if("console"==i)return console;debugEvalActions&&console.log("get(%s)",String(i));const m=f.__NAMED_ARGS__;if(null!=m&&m.hasOwnProperty(i))return m[i];if(s&&s.hasOwnProperty(i)){const t=s[i];return t.bind&&t.bind(d),t}if(o.hasOwnProperty(i)){const t=o[i];return t.bind&&t.bind(d),t}if(null!==(a=o.getters)&&void 0!==a&&a.hasOwnProperty(i))return o.getters[i].bind(d)(n);if(i in t||"symbol"==typeof i)return t[i];if(i.match(/^SIGNAL_/))return i;var h=function t(s){var i=function(){};function a(t){return`${s}${t.match(/^[0-9]*$/)?`[${t}]`:t.match(uninitValRegex)?`[${t.replace(uninitValRegex,"$1")}]`:"."+t}`}return i.toString=()=>!1,i.valueOfProperty=s,debugEvalActions&&console.log("nav PROP:"+s),new Proxy(i,{apply(t,i,a){var o;debugEvalActions&&console.log("apply²");var p,f,d=unescEMI(s.toString()),m="]",h=d.split(/\./),g=!1;let _;if(2==h.length&&((p=c.getObject(h[0]))||(p=c.getObject(h[0].replace(/\[([0-9]+)\]$/,"$1")))||(p=c.getObjectRelative(n,h[0])))&&(debugEvalActions&&console.log("Initial target: ",p.name),({target:p,tag:f}=c.navigateThroughPorts(n,p,debugEvalActions)),debugEvalActions&&console.log("Final target: ",p),m=p.name,d=h[1],g=!0),!g){const t=n.operationByName&&n.operationByName[d];null!=t&&t.private&&(m=n.name,g=!0,_=e)}var y={source:n.name,target:m,displaySignature:`${d}(${Array.prototype.map.call(a,l).join(", ")})`,signature:`${d}(${Array.prototype.map.call(a,u).join(", ")})`,sentAt:e,receivedAt:_};return f&&(y.tag=f),g&&(y.targeted=!0),debugEvalActions&&console.log("call %s",y.signature),null==e||null===(o=e.messages)||void 0===o||o.push(y),r.addToEther(y),{returnValueOf:y}},get(e,i){if(debugEvalActions&&console.log(`get²(${String(i)})`),"__actualTargetObject__"==i)return n;if(i==Symbol.toPrimitive){var o;if(null!==(o=r.settings)&&void 0!==o&&o.symbolicValues)return()=>`uninitializedValue(${s})`;if(e.valueOfProperty){const t=function(t,e){const s=e.split(".");let i,a=!1;if(s[0]in t)i=t[s[0]],a=!0;else{const t=c.getObjectRelative(n,s[0]);t&&(i=r.configuration.objectState[t.name],a=!0)}if(a){for(const t of s.slice(1)){if(!i){a=!1;break}i=i[t]}if(a)return{hasValue:!0,value:i}}return{hasValue:!1}}(e,e.valueOfProperty);if(t.hasValue)return()=>t.value}}return i in e||"symbol"==typeof i?e[i]:t(a(i))},has:(t,e)=>(debugEvalActions&&console.log(`has²(${String(e)})`),!0),set:(t,e,n)=>(debugEvalActions&&console.log(`set²(${String(e)}, ${n})`),p(t,a(e),n))})}(i);return h},has:(t,e)=>(debugEvalActions&&console.log("has(self, %s)",e),!["console","alert"].includes(e)),set:(t,e,n)=>(debugEvalActions&&console.log("set %s to %s",e,n),p(t,e,n))});try{return contextualEval.call(d,t,i,a)}catch(e){throw console.log("error evaluating",t,e.stack),e}}}function escAttr(t){return`__EMI__${t}`}function unescEMI(t){return null==t?void 0:t.replace(/__EMI__/g,"")}},5730:(t,e,n)=>{"use strict";n.d(e,{BJ:()=>b,OR:()=>v,t8:()=>E,v3:()=>_});var s=n(4057),r=n(9625),i=n(6054),a=n(7481),o=n(8263);const c=/([^(]+)(?:\(([^)]*)\))?/;function l(t,e,n){console.warn(`AnimUML static analysis warning: ${t}`)}function u(t,e,n){console.error(`AnimUML static analysis error: ${t}`)}const p="Object diagram",f="Object-class diagram consistency",d="State diagram",m="Object/class-state diagram consistency",h="Object/class-interaction diagram consistency",g="Action language",_={associationWithEnum:{category:"Class diagram",id:"associationWithEnum"},noClass:{category:p,id:"noClass"},privateOperationOnConnector:{category:p,id:"privateOperationOnConnector"},unfoundConnectorOperation:{category:p,id:"unfoundConnectorOperation"},missingOperationOnConnector:{category:p,id:"missingOperationOnConnector"},unparsableConnectorMessage:{category:p,id:"unparsableConnectorMessage"},classNotFound:{category:f,id:"classNotFound"},noConnectorType:{category:f,id:"noConnectorType"},connectorTypeNotFound:{category:f,id:"connectorTypeNotFound"},connectorTypeNotAssociation:{category:f,id:"connectorTypeNotAssociation"},connectorTypeInvalid:{category:f,id:"connectorTypeInvalid"},activeObjectHasNonActiveClass:{category:f,id:"activeObjectHasNonActiveClass"},operationShouldBelongOnlyToClass:{category:f,id:"operationShouldBelongOnlyToClass"},operationShouldBelongToClass:{category:f,id:"operationShouldBelongToClass"},propertyShouldBelongOnlyToClass:{category:f,id:"propertyShouldBelongOnlyToClass"},propertyShouldBelongToClass:{category:f,id:"propertyShouldBelongToClass"},actorObjectHasNonActorClass:{category:f,id:"actorObjectHasNonActorClass"},noGuardAfterChoice:{category:d,id:"noGuardAfterChoice"},triggerOnPseudostateOutgoingTransition:{category:d,id:"triggerOnPseudostateOutgoingTransition"},noTriggerOnStateOutgoingTransition:{category:d,id:"noTriggerOnStateOutgoingTransition"},argumentsParametersMismatch:{category:d,id:"argumentsParametersMismatch"},invalidTriggerArgument:{category:d,id:"invalidTriggerArgument"},triggerArgumentUsedInGuard:{category:d,id:"triggerArgumentUsedInGuard"},guardUnparsable:{category:d,id:"guardUnparsable"},effectUnparsable:{category:d,id:"effectUnparsable"},privateOperationAsTrigger:{category:m,id:"privateOperationAsTrigger"},unfoundTriggerOperation:{category:m,id:"unfoundTriggerOperation"},privateOperationAsNonSelfMessageInInteraction:{category:h,id:"privateOperationAsNonSelfMessageInInteraction"},unfoundInteractionOperation:{category:h,id:"unfoundInteractionOperation"},unfoundInteractionTargetObject:{category:h,id:"unfoundInteractionTargetObject"},unfoundInteractionSourceObject:{category:h,id:"unfoundInteractionSourceObject"},useOfUndeclaredName:{category:g,id:"useOfUndeclaredName"},globalInsteadOfLocalObjectName:{category:g,id:"globalInsteadOfLocalObjectName"},unqualifiedOperationCall:{category:g,id:"unqualifiedOperationCall"},undefinedOperationCall:{category:g,id:"undefinedOperationCall"}},y={duplicateObjectNames:{category:h,id:"duplicateObjectNames"},unparsableTransitionLabel:{category:d,id:"unparsableTransitionLabel"},noInitialInComposite:{category:d,id:"noInitialInComposite"}};function b(t,{reportError:e=u,reportWarning:n=l,checkActorOperations:a=!0,checkActorClass:o=!0,onTriggerArg:p}={}){const f=new Map;function d(e,n){var r;return(null===(r=e.operationByName)||void 0===r?void 0:r[n])??function(e){var n;const r=e&&(null===(n=t.classes)||void 0===n?void 0:n[e]);if(r){const t=f.get(r);if(t)return t;{const t=(0,s.B8)(r);return f.set(r,t),t}}return{}}(e.class)[n]}function m(e,n){return`${t.transFullName(e)} from ${t.stateFullName(e.source)} to ${t.stateFullName(e.target)} in ${n.name}'s state machine`}function h(t){return t.ends}function g(t){return null==t?void 0:t.literals}for(const[N,j]of Object.entries(t.classes??{}))if(j.ends&&j.ends.some((t=>g(t.type)))){const M={"Remove association."(){t.classes&&delete t.classes[N]},target:j},I=j.ends.find((t=>!g(t.type)&&!h(t.type)));if(I){const L=j.ends.find((t=>t!==I));M["Replace with an attribute."]=()=>{var e;t.classes&&delete t.classes[N],((e=I.type).propertyByName??(e.propertyByName={}))[j.name]={name:j.name,type:L.type.name}}}n(`Association with enumerations like ${N} between ${j.ends.map((t=>t.type.name)).join(" and ")} should not exist. Declare an attribute instead.`,_.associationWithEnum,M)}for(const P of t.objects)if(P.class){const D=v(P);if(D){var b;!P.isActor||null!==(b=D.stereotypes)&&void 0!==b&&b.includes("actor")||n(`Class ${P.class} of actor ${P.name} does not have the «actor» stereotype.`,_.actorObjectHasNonActorClass,{"Add «actor» stereotype to class."(){(D.stereotypes??(D.stereotypes=[])).push("actor")},targets:[P,D]});const B=(0,s.tD)(D);for(const[q,U]of Object.entries(P.propertyByName??{})){const F=B[q];F?"defaultValue"in U&&U.defaultValue!==F.defaultValue||n(`Property ${q} of object ${P.name} is also declared on its class.`,_.propertyShouldBelongOnlyToClass,{"Remove property from object."(){P.propertyByName&&delete P.propertyByName[q]},target:U}):n(`Property ${q} of object ${P.name} should rather be defined on its class.`,_.propertyShouldBelongToClass,{"Move property to class."(){(D.propertyByName??(D.propertyByName={}))[q]=U,P.propertyByName&&delete P.propertyByName[q]},target:U})}const R=(0,s.B8)(D);for(const[K,W]of Object.entries(P.operationByName??{}))R[K]?n(`Operation ${K} of object ${P.name} is also declared on its class.`,_.operationShouldBelongOnlyToClass,{"Remove operation from object."(){P.operationByName&&delete P.operationByName[K]},target:W}):n(`Operation ${K} of object ${P.name} should rather be defined on its class.`,_.operationShouldBelongToClass,{"Move operation to class."(){(D.operationByName??(D.operationByName={}))[K]=W,P.operationByName&&delete P.operationByName[K],W.parameters&&(0,r.Xq)(W.parameters)&&(W.parameters=W.parameters.map((t=>"string"==typeof t?{name:t}:t)))},target:W})}else n(`Class ${P.class} of ${P.isActor?"actor":"object"} ${P.name} not found.`,_.classNotFound,{[`Create class ${P.class}.`](){(t.classes??(t.classes={}))[P.class]={name:P.class,comments:["Generated by a quick fix, please check and complete."]}},target:P})}else if(!P.isActor||o){const G=(0,r.Z5)(P.name);n(`No class is specified for ${P.isActor?"actor":"object"} ${P.name}.`,_.noClass,{[`Set class to ${G}.`](){P.class=G},target:P})}for(const[V,H]of Object.entries((0,r.vM)(t.objects,(t=>t.name))))H.length>1&&e(`Found ${H.length} objects with the same name: "${V}".`,y.duplicateObjectNames,{"Remove second one."(){t.removeObject(H[1])},"Remove first one."(){t.removeObject(H[0])},targets:H});function v(e){var n;return e.class?null===(n=t.classes)||void 0===n?void 0:n[e.class]:void 0}for(const z of t.objects.filter((e=>t.isActive(e)))){const J=v(z);var E;J&&(t.isActive(J)||null!==(E=J.stereotypes)&&void 0!==E&&E.some((t=>"active"===t))||n(`Class ${z.class} of active object ${z.name} is not active.`,_.activeObjectHasNonActiveClass,{"Add «active» stereotype to class."(){(J.stereotypes??(J.stereotypes=[])).push("active")},targets:[z,J]}));for(const Y of(0,s.ES)(z))if(Y.label)e(`Could not parse label "${Y.label}" of transition ${m(Y,z)}.`,y.unparsableTransitionLabel,{target:Y});else{var w;function X(e,r,i,a){const o=e[r];if(o)try{var c;const a=i(o),m=e.trigger&&(null===(c=(0,s.$m)(e.trigger))||void 0===c?void 0:c.map((t=>t.trim()))),E="choice"===e.source.kind&&e.source.incoming[0].trigger&&(0,s.$m)(e.source.incoming[0].trigger)||void 0;for(const[i,o]of Object.entries(a)){var l,u,f;if("this"===i);else if(null!=m&&m.includes(i))null==p||p(z,e,r,d(z,(0,s.Le)(e.trigger)),i,m.indexOf(i));else if(null!=E&&E.includes(i))null==p||p(z,e,r,d(z,(0,s.Le)(e.source.incoming[0].trigger)),i,E.indexOf(i));else if(null!==(l=z.propertyByName)&&void 0!==l&&l[i]||null!=Q&&Q[i]);else if("call"===(null===(u=o.uses)||void 0===u?void 0:u[0].type))if(d(z,i));else if(["EP_IS_EMPTY"].includes(i));else{const s=t.objects.flatMap((t=>{const e=d(t,i);return e?[{object:t,operation:e}]:[]})),a={};if(1===s.length){const o=`${s[0].object.name}.${i}`;a[`Change call from "${i}" to "${o}".`]=()=>{Y[r]=Y[r].replaceAll(i,o)},n(`Call with unqualified operation name "${i}" in ${r} of transition ${t.transFullName(e)}.`,_.unqualifiedOperationCall,a)}else 0===s.length?n(`Call of undefined operation "${i}" in ${r} of transition ${t.transFullName(e)}.`,_.undefinedOperationCall,a):n(`Call with unqualified operation name "${i}", which is defined on objects {${s.map((t=>t.object.name)).join(", ")}}, in ${r} of transition ${t.transFullName(e)}.`,_.unqualifiedOperationCall,a);a.target=e}else if(t.getObjectRelative(z,i)){const s=t.getObjectRelative(z,i);if(s){var h;const r=null===(h=t.getConnectors(z))||void 0===h?void 0:h.filter((t=>t.ends.includes(s))),i=null==r?void 0:r[0];if(i)for(const r of(null===(y=o.uses)||void 0===y?void 0:y.filter((t=>{var e;return"uses"in t&&(null===(e=t.uses)||void 0===e?void 0:e.some((t=>"call"===t.type)))})))??[]){var y;if("propertyName"in r){var b,v;const a=r.propertyName;i.possibleMessages??(i.possibleMessages={});const o=i.ends[0]===z?(b=i.possibleMessages).forward??(b.forward=[]):(v=i.possibleMessages).reverse??(v.reverse=[]);o.some((t=>{var e;return(null===(e=T(t))||void 0===e?void 0:e.opName)===a}))||n(`Operation ${a} from object ${s.name} is called by object ${z.name} in transition ${t.transFullName(e)} without being declared on connector ${i.name}.`,_.missingOperationOnConnector,{"Add message to connector."(){null==o||o.push(a)},targets:[e,i]})}}}}else if(t.getObject(i)){const s=t.getObject(i),a=t.getRelativeName(z,s),o=a&&a!==i,c={};o?c["Change to local object name."]=()=>{Y[r]=Y[r].replaceAll(i,a)}:c["Add connector."]=()=>{const e=`${z.name}2${s.name}`,n={name:e,ends:[z,s]};t.connectorByName[e]=n,t.connectors.push(n)},c.target=e,n(`Use of global object name "${i}" ${o?`instead of local object name "${a}"`:"and no available local object name (missing connector?)"} in ${r} of transition ${t.transFullName(e)}.`,_.globalInsteadOfLocalObjectName,c)}else g(null===(f=t.classes)||void 0===f?void 0:f[i])||n(`Use of undeclared name "${i}" in ${r} of transition ${t.transFullName(e)}.`,_.useOfUndeclaredName,{"Create Boolean property."(){(z.propertyByName??(z.propertyByName={}))[i]={name:i,type:"Boolean"}},"Create String property."(){(z.propertyByName??(z.propertyByName={}))[i]={name:i,type:"String"}},"Create Integer property."(){(z.propertyByName??(z.propertyByName={}))[i]={name:i,type:"Integer"}},target:e})}}catch(t){"peg$SyntaxError"===t.constructor.name?n(`Could not parse ${r} of transition ${m(Y,z)}, line ${t.location.start.line}, column ${t.location.start.column}: ${t.message}`,a,{target:e}):console.log(t)}}Y.source.kind&&Y.trigger&&n(`Transition ${m(Y,z)} should not have a trigger because it has a pseudostate as source.`,_.triggerOnPseudostateOutgoingTransition,{target:Y}),Y.source.kind||Y.trigger||z.isActor||z.isObserver||n(`Transition ${m(Y,z)} should have a trigger because it has a state as source.`,_.noTriggerOnStateOutgoingTransition,{target:Y});const Q=z.class&&(0,s.tD)(null===(w=t.classes)||void 0===w?void 0:w[z.class]);X(Y,"effect",$,_.effectUnparsable),"else"!==Y.guard&&X(Y,"guard",S,_.guardUnparsable)}for(const Z of(0,s.Sv)(z).filter((t=>"choice"===t.kind)))for(const tt of Z.outgoing)tt.guard||n(`No guard after choice on transition ${m(tt,z)}.`,_.noGuardAfterChoice,{target:tt});for(const et of(0,s.Sv)(z).filter((t=>!t.kind)))(0,r.Xq)(et.states)&&(t.getInitial(et)||e(`Composite state ${t.stateFullName(et)} has no initial pseudo-state.`,y.noInitialInComposite,{target:et}));try{const nt=(0,i.W)({...z,operationByName:{...z.operationByName}},t);for(const[st,rt]of Object.entries((0,s.zE)(nt))){if(st.startsWith("TO")||st.startsWith("GUARD_"))continue;const it=d(z,st);if(it)if(it.private)n(`Operation ${st} on ${z.name} is private but appears as trigger in its state machine.`,_.privateOperationAsTrigger,{targets:[it,...rt.map(x)]});else for(const at of rt){var O;const ot=(null===(O=it.parameters)||void 0===O?void 0:O.length)??0,ct=at.trigger,lt=(0,s.$m)(ct),ut=(null==lt?void 0:lt.length)??0;if(void 0===lt);else if(ut===ot);else{const ft=(lt??[]).map((t=>t.trim())),dt=0===ot&&(lt??[]).every(pt)?{[`Add trigger arguments (${ft.join(", ")}) as parameters.`](){it.parameters=ft.map((t=>({name:t})))}}:void 0;n(`Operation ${st} on ${z.name} has ${ot} parameters, but trigger ${ct} has ${ut} argument(s).`,_.argumentsParametersMismatch,{...dt??{},targets:[it,x(at)]})}function pt(t){return t.trim().match(/^[\p{ID_Start}_$][\p{ID_Continue}_$\u200C\u200D]*$/u)}for(const mt of lt??[])pt(mt)||n(`Argument "${mt}" of trigger ${ct} on ${z.name} is not a valid identifier.`,_.invalidTriggerArgument,{target:x(at)});if(ut&&at.guard)try{let ht=S(at.guard);for(const gt of lt??[])ht[gt]&&n(`Argument "${gt}" of trigger ${ct} of transition ${m(at,z)} should not be used in its guard. Insert a choice pseudostate.`,_.triggerArgumentUsedInGuard,{"Insert a choice pseudostate."(){const t=x(at),e=t.region;function n(t,e){let n=1;const s=()=>`${t}_${n}`;for(;e[s()];)n++;return s()}const s={region:e,name:n("choice",e.stateByName),type:"Pseudostate",kind:"choice",comment:"Generated by a quick fix, please check and complete.",incoming:[],outgoing:[]},r={region:e,name:n(`${t.name}_upstream`,e.transitionByName),source:t.source,target:s,trigger:t.trigger,comment:"Generated by a quick fix, please check and complete."},i={region:e,name:n(`${t.name}_else`,e.transitionByName),source:s,target:t.source,guard:"else",comment:"Generated by a quick fix, please check and complete."};s.incoming.push(r),s.outgoing.push(t,i),t.source=s,t.trigger=void 0,e.states.push(s),e.stateByName[s.name]=s,e.transitions.push(r,i),e.transitionByName[r.name]=r,e.transitionByName[i.name]=i},target:x(at)})}catch(_t){}}else if("when"!==st){const yt=z,bt=v(yt),vt=(0,r.Tw)(rt.map(x).filter((t=>t))),Et={[`Add operation to ${bt?`class ${bt.name}`:`object ${yt.name}`}.`](){var t,e;const n={name:st,class:bt??yt,comments:["Generated by a quick fix, please check and complete."]};((t=bt??yt).operationByName??(t.operationByName={}))[st]=n,((e=bt??yt).operations??(e.operations=[])).push(n)},targets:[z,...vt]};(0,r.Xq)(vt)&&!vt.some((t=>t.effect))&&(Et["Transform trigger into effect."]=()=>{for(const t of vt)t.effect=t.trigger,t.trigger=void 0}),n(`Could not find operation ${st} on ${z.name} that appears as trigger in its state machine.`,_.unfoundTriggerOperation,Et)}}}catch(wt){console.log("Warning, could not analyze state machine triggers of object",z.name,"because of",wt)}}function x(e){try{return t.getTransition((n=e,`${t.stateFullName(n.region)}.${n.name}`.replace(/[.][^.]+[.]__internal____FROM_PARENT__[^_]+_/,".__internal__")))}catch(t){return}var n}function T(t){const e=t.trim().match(c);if(e){const[,t,n=""]=e;return{opName:t,params:n.split(",").filter((t=>t))}}}for(const[$t,St]of Object.entries(t.connectorByName??{})){function Ot(t,e,s){if(t)for(const r of t){const t=T(r);if(t){const{opName:i,params:a}=t,o=d(e,i);if(o)o.private&&n(`Operation ${i} on ${e.name} is private but appears in message ${r} sent on connector ${$t} from ${s.name}.`,_.privateOperationOnConnector,{[`Make operation ${o.class.name}.${o.name} public.`](){o.private=!1},targets:[o,St]});else{const t=v(e);n(`Could not find operation ${i} on ${e.name} corresponding to message ${r} sent on connector ${$t} from ${s.name}.`,_.unfoundConnectorOperation,{[`Add operation to ${t?`class ${t.name}`:`object ${e.name}`}.`](){var n,s;const r=a.map((t=>{const e=t.match(/^\s*([^\s:]*)(?:\s*:\s*([^[\s]*))?(?:\s*\[\s*(\*)\s*\])?\s*$/);console.log(t,e);const[,n,s,r]=e;return{name:n,type:s,multiplicity:"*"===r?{lower:0,upper:-1}:void 0}})),o={name:i,class:t??e,comments:["Generated by a quick fix, please check and complete."],parameters:r};((n=t??e).operationByName??(n.operationByName={}))[i]=o,((s=t??e).operations??(s.operations=[])).push(o)},targets:[e,St]})}}else n(`Could not parse message "${r}" on connector ${$t} from ${s.name} to ${e.name}.`,_.unparsableConnectorMessage,{target:St})}}const{forward:xt,reverse:Tt}=St.possibleMessages??{},kt=St.ends[0],At=St.ends[1];At.isActor&&!a||Ot(xt,At,kt),kt.isActor&&!a||Ot(Tt,kt,At);const Ct=v(kt),Nt=v(At);function jt(e,n){e["Create new association."]=()=>{var e,s;const r={ends:[{type:Ct,name:null===(e=St.endNames)||void 0===e?void 0:e[0]},{type:Nt,name:null===(s=St.endNames)||void 0===s?void 0:s[1]}],comments:["Generated by a quick fix, please check and complete."]};var i;if(!n&&(n=`${Ct.name}2${Nt.name}`,null!==(i=t.classes)&&void 0!==i&&i[n])){let e=0;const s=n;for(;t.classes[n=`${s}_${++e}`];);}t.classes[n]=r,St.type=n},e.target=St}if(St.type){var k;const Mt=null===(k=t.classes)||void 0===k?void 0:k[St.type];if(Mt)if(Mt.ends){if(Ct&&Nt){const It=Mt.ends[0].type,Lt=Mt.ends[1].type;if(It===Ct&&Lt===Nt||It===Nt&&Lt===Ct);else{const Pt={};jt(Pt),n(`Connector type ${St.type} of connector ${St.name} between ${kt.name} : ${kt.class} and ${At.name} : ${At.class} does not connect their respective classes, but ${It.name} and ${Lt.name} instead.`,_.connectorTypeInvalid,Pt)}}}else{const Dt={};Ct&&Nt&&jt(Dt),n(`Connector type ${St.type} of connector ${St.name} between ${kt.name} and ${At.name} is not an association.`,_.connectorTypeNotAssociation,Dt)}else{const Bt={};Ct&&Nt&&jt(Bt,St.type),n(`Association ${St.type} for type of connector ${St.name} between ${kt.name} and ${At.name} not found.`,_.connectorTypeNotFound,Bt)}}else{const Rt={};if(Ct&&Nt){const qt=Object.entries(t.classes??{}).filter((([t,e])=>{if(h(e)){const t=e.ends[0].type,n=e.ends[1].type;return t===Ct&&n===Nt||t===Nt&&n===Ct}return!1}));for(const[Ut,Ft]of qt)Rt[`Set type to existing association${Ft.label?` "${Ft.label}"`:""}.`]=()=>{St.type=Ut};jt(Rt)}n(`No type is specified for connector ${$t} between ${kt.name} and ${At.name}.`,_.noConnectorType,Rt)}}function A(t){return t.flatMap((t=>{switch(t.type){case"call":case"autoAcceptCall":case"found":return[t];case"loop":return A(t.loopBody);case"alt":return t.alternatives.flatMap((t=>A(t.altBody)));case"ref":case"return":case"accept":case"after":return[];default:throw`Unknown event type: ${t.type}`}}))}const C=new Set;for(const[Kt,Wt]of Object.entries(t.interactions??{}))for(const Gt of A(Wt.events)){const Vt=t.getObject(Gt.to);if(Vt){if(Vt.isActor&&!a)continue;const Ht=Gt.call??Gt.accept,zt=d(Vt,Ht);zt?zt.private&&Gt.from!==Gt.to&&n(`Operation ${Ht} on ${Vt.name} is private but appears as a non-self message from ${Gt.from} in interaction "${Kt}".`,_.privateOperationAsNonSelfMessageInInteraction,{targets:[zt,Gt]}):n(`Could not find operation ${Ht} on ${Vt.name} that appears as message in interaction "${Kt}".`,_.unfoundInteractionOperation,{targets:[Vt,Gt]})}else C.has(Gt.to)||(C.add(Gt.to),n(`Could not find object ${Gt.to} that first appears as message target in interaction "${Kt}".`,_.unfoundInteractionTargetObject,{target:Gt}));t.getObject(Gt.from)||C.has(Gt.from)||(C.add(Gt.from),n(`Could not find object ${Gt.from} that first appears as message source in interaction "${Kt}".`,_.unfoundInteractionSourceObject,{target:Gt}))}}function v(t,e=!1,n){const s=[],r=[];function i(t){return function(n,s,r){e?t.push({message:n,type:s,fixes:r}):t.push(n)}}return b(t,{...n,reportWarning:i(r),reportError:i(s)}),{errors:s,warnings:r}}function E(t,e){let n=v(t,!0);function s(t,e){console.log("%s: found %d errors, and %d warnings.",t,e.errors.length,e.warnings.length)}function r(){return[...n.errors,...n.warnings]}for(s("Before fixing",n);;){const s=r().filter((t=>(null==e?void 0:e(t))??!0)).find((t=>Object.entries(t.fixes??{}).filter((([t,e])=>"function"==typeof e)).length>0)),i=null==s?void 0:s.message,a=Object.entries((null==s?void 0:s.fixes)??{})[0];if(!s)break;if(a&&(console.log('Fixing "%s" with "%s".',i,a[0]),a[1]()),n=v(t,!0),r().some((t=>t.message===i)))throw`Issue auto fix failed for "${i}" with action "${a[0]}".`}return s("After fixing",n),n}function w(t){return t.replace(/::/g,".")}function $(t){return a.E2.keepLocation=!0,O(a.E2.parse(w(t)))}function S(t){return a.TA.keepLocation=!0,O(a.TA.parse(w(t)))}function O(t){const e={},n=[{}];function s(t){n.push({})}function i(t){n.pop()}function c(t,e){"string"==typeof t.variable&&console.log("forOfStat",t.variable),s(),e(t),i()}function l(t){t&&(t.uses??(t.uses=[])).push({type:"call"})}function u(t){if(t)return(t.uses??(t.uses=[])).push({type:"assign"}),t}function p(t,e){if(t){const n={type:"memberAccess",propertyName:e};return(t.uses??(t.uses=[])).push(n),n}}return(0,o.vs)(t,{lambdaExp(t,e){s(),e(t),i()},functionExp(t,e){s(),e(t),i()},block(t,e){s(),e(t),i()},tryStat(t,e){s(),e(t.tryBlock),i(),s(),(0,r.Z$)(n)[t.varName]=t.__location__,e(t.catchBlock),i(),s(),e(t.finallyBlock),i()},namePat({name:t,__location__:e}){(0,r.Z$)(n)[t]=e},slotPat({name:t,newName:e,__location__:s}){(0,r.Z$)(n)[(null==e?void 0:e.name)??t]=s},forOfStat:c,forInStat:c,forStat:c,variableExp({name:t,__location__:s}){for(const e of n.slice().reverse())if(t in e)return;return(e[t]??(e[t]={locations:[]})).locations.push(s),e[t]},thisExp:({__location__:t})=>((e.this??(e.this={locations:[]})).locations.push(t),e.this),assign:({left:t,op:e,right:n},s)=>(s(n),u(s(t))),functionCallExp:({source:t,args:e},n)=>(0,o.wB)(t,{type:"variableExp",name:"GET"})&&(0,o.wB)(e[1],{type:"variableExp"})?(n(e.slice(2)),p(n(e[0]),e[1].name)):(0,o.wB)(t,{type:"variableExp",name:"AT"})?(n(e.slice(2)),p(n(e[0]),`[${(0,a.Pz)(e[1])}]`)):(0,o.wB)(t,{type:"variableExp",name:"SET"})&&(0,o.wB)(e[1],{type:"variableExp"})||(0,o.wB)(t,{type:"variableExp",name:"INC"})&&(0,o.wB)(e[1],{type:"variableExp"})||(0,o.wB)(t,{type:"variableExp",name:"DEC"})&&(0,o.wB)(e[1],{type:"variableExp"})?(n(e.slice(2)),u(p(n(e[0]),e[1].name))):(0,o.wB)(t,{type:"variableExp",name:"SEND"})&&(0,o.wB)(e[1],{type:"variableExp"})||(0,o.wB)(t,{type:"variableExp",name:"CALL"})&&(0,o.wB)(e[1],{type:"variableExp"})?(n(e.slice(2)),l(p(n(e[0]),e[1].name))):void((0,o.wB)(t,{type:"variableExp",name:"EP_IS_EMPTY"})||(0,o.wB)(t,{type:"variableExp",name:"IS_IN_STATE"})||(n(e),l(n(t)))),memberAccessExp:({source:t,propertyName:e},n)=>p(n(t),e)}),e}},5097:(t,e,n)=>{"use strict";n.d(e,{LR:()=>h});var s=n(921),r=n(7428),i=n(4985),a=(n(8113),n(2392)),o=n(5012);class c{}const l={getSlots:()=>[]};class u extends c{constructor(t){super(),this.params={classDiagram:!0},this.getURL=function(e=""){const n=(0,r.tC)(t.model,l,this.params);return(0,i.K)(e+"/plantuml/",n)},this.name="Class diagram"}}class p extends c{constructor(t){super(),this.params={classDiagram:!1},this.getURL=function(e="",n=l){const s=(0,r.tC)(t.model,n,this.params);return(0,i.K)(e+"/plantuml/",s)},this.name="Object diagram"}}class f extends c{constructor(t,e){super(),this.name=`State diagram of ${e.name}`,this.params={displayedObjects:[e],classDiagram:!1,hideClasses:!0},this.getURL=function(e=""){const n=(0,r.tC)(t.model,l,this.params);return(0,i.K)(e+"/plantuml/",n)}}}class d{constructor(t){t instanceof s.H?this.model=t:this.model=new s.H(t),this.name=t.name,this.diagrams=[]}get objects(){return this.model.objects}isActive(t){return this.model.isActive(t)}}class m{constructor(t){var e;this.name=`Execution of ${t.name}`,this.diagrams=[],this.engine=new a.i(t.model,(null===(e=t.model.settings)||void 0===e?void 0:e.semantics)??{})}}class h{constructor(){this.models=[],this.executions=[]}getTree(){const t=this;return{actions:{"Open built-in model":{parameters:{modelName:{type:"select",set:globalThis.examples.map((t=>t.name))}},async perform(e){const n=globalThis.examples.find((t=>t.name===e));await(0,o.d)(n),t.models.push(new d(n))}}},models:Object.fromEntries(this.models.map((e=>[e.name,{actions:{"New class diagram":{perform(){e.diagrams.push(new u(e))}},"New object diagram":{options:{displayedObjects:{type:"subset",set:e.objects.map((t=>t.name))}},perform(){const t=new p(e);return e.diagrams.push(t),t}},"New execution":{perform(){const n=new m(e),s=new p(e);return s.executionName=n.name,s.name=`Execution diagram for ${e.name}`,t.executions.push({name:n.name,controller:n,"Execution diagram":s}),n}},...Object.fromEntries(e.objects.filter((t=>e.isActive(t))).map((t=>[`Open state diagram of ${t.name}`,{perform(){const n=new f(e,t);return e.diagrams.push(n),n}}])))},diagrams:Object.fromEntries(e.diagrams.map((t=>[t.name,t])))}]))),executions:Object.fromEntries(this.executions.map((t=>[t.name,t])))}}}},2599:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Tail:()=>_utils_Tail_js__WEBPACK_IMPORTED_MODULE_13__.x,allObjectsToPlantUML:()=>_Export2PlantUML_js__WEBPACK_IMPORTED_MODULE_17__.tC,allStates:()=>_ModelUtils_js__WEBPACK_IMPORTED_MODULE_12__.Y3,allTransitions:()=>_ModelUtils_js__WEBPACK_IMPORTED_MODULE_12__.ES,allVertices:()=>_ModelUtils_js__WEBPACK_IMPORTED_MODULE_12__.Sv,analyzeToObject:()=>_AnimUMLStaticAnalysis_js__WEBPACK_IMPORTED_MODULE_27__.OR,au2puMain:()=>_au2puUtils_js__WEBPACK_IMPORTED_MODULE_18__.DH,autoFix:()=>_AnimUMLStaticAnalysis_js__WEBPACK_IMPORTED_MODULE_27__.t8,behaviorParser:()=>_ImportFromPlantUMLState_js__WEBPACK_IMPORTED_MODULE_29__.E,buildTrace:()=>_Explorer_js__WEBPACK_IMPORTED_MODULE_0__.H9,classesParser:()=>_ImportFromPlantUMLClass_js__WEBPACK_IMPORTED_MODULE_28__.E2,defaultParams:()=>_au2puUtils_js__WEBPACK_IMPORTED_MODULE_18__.Tb,defaultRule:()=>_ASTUtils_js__WEBPACK_IMPORTED_MODULE_11__.Tk,diffExplore:()=>_DiffExplorer_js__WEBPACK_IMPORTED_MODULE_2__.Y,diffInternal:()=>_Utils_js__WEBPACK_IMPORTED_MODULE_5__.$Q,engineToSTR:()=>_EngineToSTR_js__WEBPACK_IMPORTED_MODULE_26__.S,engineToiSLI:()=>_EngineToiSLI_js__WEBPACK_IMPORTED_MODULE_25__.Y,evaluateStepBuilder:()=>_EngineToiSLI_js__WEBPACK_IMPORTED_MODULE_25__.v,explore:()=>_Explorer_js__WEBPACK_IMPORTED_MODULE_0__.KB,featuresParser:()=>_ImportFromPlantUMLClass_js__WEBPACK_IMPORTED_MODULE_28__.i$,getAnimUMLEngine:()=>getAnimUMLEngine,getEventArgs:()=>_ModelUtils_js__WEBPACK_IMPORTED_MODULE_12__.$m,getEventName:()=>_ModelUtils_js__WEBPACK_IMPORTED_MODULE_12__.Le,getTreeBuilder:()=>getTreeBuilder,hasElements:()=>_Utils_js__WEBPACK_IMPORTED_MODULE_5__.Xq,history2Sequence:()=>history2Sequence,indent:()=>_TemplateUtils_js__WEBPACK_IMPORTED_MODULE_31__.W,interactionParser:()=>_ImportFromPlantUMLSequence_js__WEBPACK_IMPORTED_MODULE_30__.E2,matches:()=>_ASTUtils_js__WEBPACK_IMPORTED_MODULE_11__.wB,modelCheck:()=>modelCheck,parallelExplore:()=>_ParallelExplorer_js__WEBPACK_IMPORTED_MODULE_1__.K,saveDiagram:()=>_au2puUtils_js__WEBPACK_IMPORTED_MODULE_18__.xf,stringifyActions:()=>_JavaScriptActionLanguageParser_js__WEBPACK_IMPORTED_MODULE_4__.Pz,toPlantUMLURI:()=>_PlantUMLURI_js__WEBPACK_IMPORTED_MODULE_3__.K,transform:()=>_ASTUtils_js__WEBPACK_IMPORTED_MODULE_11__.vs,transformActions:()=>transformActions,transformExpression:()=>transformExpression,z2mc:()=>z2mc});var _Explorer_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(8856),_ParallelExplorer_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3042),_DiffExplorer_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8916),_PlantUMLURI_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(4985),_JavaScriptActionLanguageParser_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(7481),_Utils_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(9625),_CLILoadModel_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(5886),_AnimUMLEngine_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(2392),_Preprocessor_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(5012),_Model_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(921),_ImportFromAnimUML_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(6171),_ASTUtils_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(8263),_ModelUtils_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(4057),_utils_Tail_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(8686),_RemoteTool_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(6746),_History2TCSVGSequence_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(4032),_MakeTCSVGStatic_js__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(7463),_Export2PlantUML_js__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(7428),_au2puUtils_js__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(3284),_z2mc_javascript_src_model_checkers_z_hashset_predicate_mc_js__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(593),_z2mc_javascript_src_operators_str_str2tr_js__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(4453),_z2mc_javascript_src_operators_str_synchronous_product_semantics_js__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(86),_z2mc_javascript_src_model_checkers_buchi_mc_buchi_ndfs_gs09_cdlp05_js__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(7996),_z2mc_javascript_src_model_checkers_buchi_mc_buchi_nbfs_naive_js__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(7788),_AnimUMLTree_js__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(5097),_EngineToiSLI_js__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(6831),_EngineToSTR_js__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(618),_AnimUMLStaticAnalysis_js__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(5730),_ImportFromPlantUMLClass_js__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(4733),_ImportFromPlantUMLState_js__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(7275),_ImportFromPlantUMLSequence_js__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(3416),_TemplateUtils_js__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(9416);async function getAnimUMLEngine(modelPath,settings){var _model$settings;let model;return"object"==typeof process?model=await(0,_CLILoadModel_js__WEBPACK_IMPORTED_MODULE_6__.u7)(modelPath,null==settings?void 0:settings.modelId):(model=await fetch(modelPath),model=await model.text(),eval(model),console.log(globalThis.examples),model=(0,_Utils_js__WEBPACK_IMPORTED_MODULE_5__.Z$)(globalThis.examples),model=(0,_ImportFromAnimUML_js__WEBPACK_IMPORTED_MODULE_9__.F)(model),await(0,_Preprocessor_js__WEBPACK_IMPORTED_MODULE_8__.d)(model,null),model=new _Model_js__WEBPACK_IMPORTED_MODULE_10__.H(model)),new _AnimUMLEngine_js__WEBPACK_IMPORTED_MODULE_7__.i(model,{...(null===(_model$settings=model.settings)||void 0===_model$settings?void 0:_model$settings.semantics)??{},...settings??{}})}function transformActions(t,e,n){return _JavaScriptActionLanguageParser_js__WEBPACK_IMPORTED_MODULE_4__.E2.keepLocation=!0,(0,_ASTUtils_js__WEBPACK_IMPORTED_MODULE_11__.vs)(_JavaScriptActionLanguageParser_js__WEBPACK_IMPORTED_MODULE_4__.E2.parse(t),e,n)}function transformExpression(t,e,n){return _JavaScriptActionLanguageParser_js__WEBPACK_IMPORTED_MODULE_4__.TA.keepLocation=!0,(0,_ASTUtils_js__WEBPACK_IMPORTED_MODULE_11__.vs)(_JavaScriptActionLanguageParser_js__WEBPACK_IMPORTED_MODULE_4__.TA.parse(t),e,n)}async function modelCheck(t,e,n,s="localhost:8082"){function r(t,e){return Object.entries(t).map((([t,n])=>`${t} = ${e?`|${n}|`:n}`))}const i=[...r(Object.fromEntries(Object.entries(e.watchExpressions).map((([t,e])=>[t,e.replace(/\|/g,"\\|")]))),!0),...r(e.LTLProperties)].join("\n"),a=(Object.keys(e.LTLProperties),`http://${s}/obp2`);let o;const c=new Promise((e=>{const s=new _RemoteTool_js__WEBPACK_IMPORTED_MODULE_14__.U(`${a}`,{onuuid(e){o=new _RemoteTool_js__WEBPACK_IMPORTED_MODULE_14__.b(`${a}/control`),s.setEngine(t),o.sendCommand("VERIFY_LTL_PROPERTY",e,`${n}:${i}`)},onerror(t){console.error(t)},onresults(t){e(t),s.close()}})}));return c.then((()=>o.close())),await c}function history2Sequence(t,e){const{path:n="."}=e,s=(0,_History2TCSVGSequence_js__WEBPACK_IMPORTED_MODULE_15__.u)(t.sysHistory,t.currentModel,{origin:"http://127.0.0.1:8082/",participants:t.currentModel.objects,...e});return null!=e&&e.makeStatic?(0,_MakeTCSVGStatic_js__WEBPACK_IMPORTED_MODULE_16__.E)(s,n,e):s}const z2mc={z_hashset_predicate_mc:_z2mc_javascript_src_model_checkers_z_hashset_predicate_mc_js__WEBPACK_IMPORTED_MODULE_19__,str2tr:_z2mc_javascript_src_operators_str_str2tr_js__WEBPACK_IMPORTED_MODULE_23__,synchronous_product_semantics:_z2mc_javascript_src_operators_str_synchronous_product_semantics_js__WEBPACK_IMPORTED_MODULE_20__,mc_buchi_ndfs_gs09_cdlp05:_z2mc_javascript_src_model_checkers_buchi_mc_buchi_ndfs_gs09_cdlp05_js__WEBPACK_IMPORTED_MODULE_21__,mc_buchi_nbfs_naive:_z2mc_javascript_src_model_checkers_buchi_mc_buchi_nbfs_naive_js__WEBPACK_IMPORTED_MODULE_22__};function getTreeBuilder(){return new _AnimUMLTree_js__WEBPACK_IMPORTED_MODULE_24__.LR}},5886:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{u7:()=>loadModel});var fs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9317),_Model_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(921),_ImportFromPlantUMLSequence_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3416),_Preprocessor_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5012);function getScript(t,e){const n=t.match(new RegExp(`^.*<script [^>]*id="${e}"[^>]*>(.*?)<\/script>.*$`,"s"));return n?n[1]:void 0}function createDummyModel(t){return{name:"__dummy__",getObject(t){return this.objects.find((e=>e.name===t))},isActive:t=>!1,isPort:t=>!1,stateFullName:t=>t.name,getConnectors:()=>[],getBehavior(){},objects:t.objects.map((({name:t,isActor:e})=>({name:t,isActor:e}))),interactions:Object.fromEntries([[t.name,t]].concat([...t.refSpans.entries()].map((([t,e])=>[t,{events:e.map((t=>({object:t,state:"TODO"}))),isDummy:!0}]))))}}async function loadModel(t,e,n=!1,s=!1,r){let i;try{i=fs__WEBPACK_IMPORTED_MODULE_0__.readFileSync(t,"utf8")}catch(n){if([t,e]=t.split("#"),!e)throw n;i=fs__WEBPACK_IMPORTED_MODULE_0__.readFileSync(t,"utf8")}return await loadModelInternal(i,e,n,s,r)}async function loadModelInternal(fileData,id,raw=!1,full=!1,settings){console.log("Trying to load a JavaScript sample"),globalThis.examples=void 0;try{eval(fileData)}catch(t){}if(globalThis.examples){if(raw)return globalThis.examples[0];{const e=globalThis.examples[0];return await(0,_Preprocessor_js__WEBPACK_IMPORTED_MODULE_2__.d)(e,void 0,settings),new _Model_js__WEBPACK_IMPORTED_MODULE_3__.H(e)}}{console.log("Failed, trying to extract JSON from a <script> with id:",id);let data=getScript(fileData,id);if(!data){console.log("Could not find a model with id:",id),console.log("Here is a list of <script> element ids in the given file:");for(const n of getScriptIds(fileData))console.log("\t",n[1]);console.log("Trying to extract JSON from a <script> variable");const match=fileData.match(/^.*<script(?:[ \t\r\n][^>]*)?>(.*?)<\/script>.*$/s),def={objects:[]};let success=!1;const ret=await new Promise((async(resolve,reject)=>{try{if(match){let model;const document={write(t){const e=t.match(/^.*src='[ \t\r\n]*https?:\/\/[^\/]*\/+[Aa][Nn][Ii][Mm][Uu][Mm][Ll].[Hh][Tt][Mm][Ll]#([^']*)'.*$/s);e?model=JSON.parse(decodeURIComponent(e[1])):console.log("document.write called with unrecognizable model:",t)}};eval(match[1]),model?raw?(success=!0,resolve(model)):(await(0,_Preprocessor_js__WEBPACK_IMPORTED_MODULE_2__.d)(model,void 0,settings),success=!0,resolve(new _Model_js__WEBPACK_IMPORTED_MODULE_3__.H(model))):resolve(def)}else resolve(def)}catch(t){reject(t)}}));if(success)return ret;{const s=/(?<=https:\/\/[^\/]*\/AnimUML.html#)([^ \t\n]*})/g,r=fileData.match(s)??[];console.log("Found",r.length,"model URLs");const i=r[id]??r[0],a=JSON.parse(decodeURIComponent(i));return raw?a:(await(0,_Preprocessor_js__WEBPACK_IMPORTED_MODULE_2__.d)(a,void 0,settings),new _Model_js__WEBPACK_IMPORTED_MODULE_3__.H(a))}}{async function processed(t){return raw?t:(await(0,_Preprocessor_js__WEBPACK_IMPORTED_MODULE_2__.d)(t,(async t=>getScript(fileData,t.replace(/^#/,""))),settings),new _Model_js__WEBPACK_IMPORTED_MODULE_3__.H(t))}try{return data=JSON.parse(data),processed(data)}catch(e){console.log("Found non-JSON <script> with id:",id,", trying to eval");try{return data=eval(data),processed(data)}catch{}if(full)return void console.log("Failed to load a model.");{console.log("Failed to eval, trying to parse as PlantUML-like sequence diagram");const{keepObjects:o,keepRefSpans:c}=_ImportFromPlantUMLSequence_js__WEBPACK_IMPORTED_MODULE_1__.E2;_ImportFromPlantUMLSequence_js__WEBPACK_IMPORTED_MODULE_1__.E2.keepObjects=_ImportFromPlantUMLSequence_js__WEBPACK_IMPORTED_MODULE_1__.E2.keepRefSpans=!0;const l=_ImportFromPlantUMLSequence_js__WEBPACK_IMPORTED_MODULE_1__.E2.parse(data);_ImportFromPlantUMLSequence_js__WEBPACK_IMPORTED_MODULE_1__.E2.keepObjects=o,_ImportFromPlantUMLSequence_js__WEBPACK_IMPORTED_MODULE_1__.E2.keepRefSpans=c;const u=createDummyModel(l);return u}}}}}function getScriptIds(t){return t.matchAll(/<script [^>]*id="([^"]*)"/g)}async function loadModels(t,e,n,s){const r=[...getScriptIds(fs__WEBPACK_IMPORTED_MODULE_0__.readFileSync(t,"utf8"))],i=[];for(const a of r){const r=a[1],o=await loadModel(t,r,e,n,s);o&&i.push(o)}return i}},7330:(t,e,n)=>{"use strict";async function s(t,e,n=!1){if(n)return await e.parseConfiguration(t);{if(t.arrayBuffer&&(t=await t.arrayBuffer()),"string"==typeof t)return t;let e=new DataView(t);return new TextDecoder("iso-8859-15").decode(e)}}n.d(e,{w:()=>s})},7695:(t,e,n)=>{"use strict";function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,{l:()=>r});class r{constructor(t,e){if(s(this,"dbm",void 0),s(this,"nbClocks",void 0),this.nbClocks=t,e)console.assert(e.length==(t+1)**2,"dbm array does not have the right size"),this.dbm=e;else{this.dbm=new Array((t+1)*(t+1)),this.dbm.fill(r.constrainLessOrEqual);for(let e=1;e<=t;e++)this.dbm[e*(t+1)+e]=r.emptyness;for(let e=1;e<=t;e++)this.enable(e)}}xMinusYRelatesToM(t,e,n,s){const i=r.computeInternal(n,s);return this.andGuard(t,e,i),this}gt(t,e){const n=r.computeInternal(-e,!0);return this.andGuard(0,t,n),this}ge(t,e){const n=r.computeInternal(-e,!1);return this.andGuard(0,t,n),this}lt(t,e){const n=r.computeInternal(e,!0);return this.andGuard(t,0,n),this}le(t,e){const n=r.computeInternal(e,!0);return this.andGuard(t,0,n),this}andGuard(t,e,n){this.dbm[t*(this.nbClocks+1)+t]==r.emptyness||this.dbm[e*(this.nbClocks+1)+e]==r.emptyness?this.dbm[0]=r.emptyness:this.and(t,e,n)}static computeInternal(t,e){return t<<1|(e?r.constrainLess:r.constrainLessOrEqual)}isEmpty(){return this.dbm[0]==r.emptyness}and(t,e,n){if(r.lessThan(r.add(this.dbm[e*(this.nbClocks+1)+t],n),r.constrainLessOrEqual))this.dbm[0]=r.emptyness;else if(r.lessThan(n,this.dbm[t*(this.nbClocks+1)+e])){this.dbm[t*(this.nbClocks+1)+e]=n;for(let n=0;n<=this.nbClocks;n++)if(this.dbm[n*(this.nbClocks+1)+n]!=r.emptyness)for(let s=0;s<=this.nbClocks;s++)if(n!=s&&this.dbm[s*(this.nbClocks+1)+s]!=r.emptyness){let i=r.add(this.dbm[n*(this.nbClocks+1)+t],this.dbm[t*(this.nbClocks+1)+s]);r.lessThan(i,this.dbm[n*(this.nbClocks+1)+s])&&(this.dbm[n*(this.nbClocks+1)+s]=i);let a=r.add(this.dbm[n*(this.nbClocks+1)+e],this.dbm[e*(this.nbClocks+1)+s]);r.lessThan(a,this.dbm[n*(this.nbClocks+1)+s])&&(this.dbm[n*(this.nbClocks+1)+s]=a)}}}static lessThan(t,e){if(t==r.infinity)return!1;const n=r.getValue(t),s=r.getValue(e);return n==s?r.isStrict(t)&&!r.isStrict(e):n<s}static getValue(t){return t>>1}static isStrict(t){return(t&r.constrainMask)==r.constrainLess}static add(t,e){return t==r.infinity||e==r.infinity?r.infinity:r.computeInternal(r.getValue(t)+r.getValue(e),r.isStrict(t)||r.isStrict(e))}set(t,e){for(let n=0;n<=this.nbClocks;n++)n==t?this.dbm[n*(this.nbClocks+1)+n]=r.constrainLessOrEqual:this.dbm[n*(this.nbClocks+1)+n]!=r.emptyness&&(this.dbm[t*(this.nbClocks+1)+n]=r.add(r.computeInternal(e,!1),this.dbm[n]),this.dbm[n*(this.nbClocks+1)+t]=r.add(r.computeInternal(-e,!1),this.dbm[n*(this.nbClocks+1)]))}enable(t){for(let e=0;e<=this.nbClocks;e++)e==t?this.dbm[e*(this.nbClocks+1)+e]=r.constrainLessOrEqual:this.dbm[e*(this.nbClocks+1)+e]!=r.emptyness&&(this.dbm[t*(this.nbClocks+1)+e]=r.infinity,this.dbm[e*(this.nbClocks+1)+t]=r.infinity)}delay(){for(let t=1;t<=this.nbClocks;t++)this.dbm[t*(this.nbClocks+1)+t]!=r.emptyness&&(this.dbm[t*(this.nbClocks+1)]=r.infinity)}toString(t=this.clockNames){if(null==this.dbm)return"oo";if(this.isEmpty(this.dbm))return"empty";function e(e){return(null==t?void 0:t[e])??"c"+e}let n="";for(let t=1;t<=this.nbClocks;t++)if(this.dbm[t*(this.nbClocks+1)+t]!=r.emptyness){let s="",i=!1;const a=this.dbm[t];a!=r.infinity&&(i=!0,s+=-r.getValue(a),s+=r.isStrict(a)?" < ":" <= "),s+=e(t);const o=this.dbm[t*(this.nbClocks+1)];o!=r.infinity&&(i=!0,s+=r.isStrict(o)?" < ":" <= ",s+=r.getValue(o)),s.length>4&&i&&(n.length>0&&(n+=" & "),n+=s)}for(let t=1;t<=this.nbClocks;t++)if(this.dbm[t*(this.nbClocks+1)+t]!=r.emptyness)for(let s=t+1;s<=this.nbClocks;s++)if(this.dbm[s*(this.nbClocks+1)+s]!=r.emptyness){let i="",a=!1;const o=this.dbm[s*(this.nbClocks+1)+t];o!=r.infinity&&(a=!0,i+=-r.getValue(o),i+=r.isStrict(o)?" < ":" <= "),i+=e(t),i+=" - ",i+=e(s);let c=this.dbm[t*(this.nbClocks+1)+s];c!=r.infinity&&(a=!0,i+=r.isStrict(c)?" < ":" <= ",i+=r.getValue(c)),i.length>4&&a&&(n.length>0&&(n+=" & "),n+=i)}return 0==n.length&&(n+="oo"),n}isClockLessThan(t,e){if(this.dbm[t*(this.nbClocks+1)+t]==r.emptyness)return!1;const n=this.dbm[t*(this.nbClocks+1)];return!(e!=r.getValue(n)||!r.isStrict(n))}isClockLessOrEqualThan(t,e){if(this.dbm[t*(this.nbClocks+1)+t]==r.emptyness)return!1;const n=this.dbm[t*(this.nbClocks+1)];return e==r.getValue(n)&&!r.isStrict(n)}isClockGreaterOrEqualThan(t,e){if(this.dbm[t*(this.nbClocks+1)+t]==r.emptyness)return!1;const n=this.dbm[t];return-e==r.getValue(n)&&!r.isStrict(n)}getMin(t){const e=this.dbm[t];return-r.getValue(e)}}s(r,"constrainMask",1),s(r,"constrainLess",1),s(r,"constrainLessOrEqual",0),s(r,"infinity",32767),s(r,"emptyness",r.computeInternal(-1,!1))},8916:(t,e,n)=>{"use strict";n.d(e,{Y:()=>r});var s=n(9625);async function r(t,e,n,r=!0,{configurationComparator:i}={}){n=n||console.log;let a=!1;var o=0,c=0;const l={},u=[],p={},f=[];async function d(t){t?await n.apply(null,arguments):await n("counts",o,c,NaN)}return await Promise.all([t.reset(),e.reset()]),await async function n(){async function m(t){const e=await t.getConfiguration();return[e,await t.parseConfiguration(e)]}const[[h,g],[_,y]]=await Promise.all([m(t),m(e)]),b=l[g],v=p[y];if(b&&v){if(b.id!=v.id)return a=!0,await d("diff",t.name," went back to known config ",b.id,": ",await t.showConfiguration(h)," whereas ",e.name," went back to known config ",v.id,": ",await e.showConfiguration(_)),!0;await d("info",(async()=>["Back to config ",b.id,": ",await t.showConfiguration(h),", and ",v.id,": ",await e.showConfiguration(_)]))}else{if(b){a=!0,await d("diff",t.name," went back to known config ",b.id,": ",await t.showConfiguration(h)," whereas ",e.name," went to a new config: ",await e.showConfiguration(_)),await d("diff","=> ",e.name," was supposed to be in ",await e.showConfiguration(f[b.id].config)," but is instead in ",await e.showConfiguration(_)),await d("diff","=> These two configurations differ at: ");var E=(0,s.$Q)(f[b.id].configKey,y);return await d("diff","\t",E[0]),await d("diff","\t",E[1]),!0}if(v)return a=!0,await d("diff",t.name," went to a new config: ",await t.showConfiguration(h)," whereas ",e.name," went to known config ",v.id,": ",await e.showConfiguration(_)),await d("diff","=> ",t.name," was supposed to be in ",await t.showConfiguration(u[v.id].config)," but is instead in ",await t.showConfiguration(h)),await d("diff","=> These two configurations differ at: "),E=(0,s.$Q)(u[v.id].configKey,g),await d("diff","\t",E[0]),await d("diff","\t",E[1]),!0;{if(await d("info","Reached config ",o,(async()=>[": ",await t.showConfiguration(h),", and ",await e.showConfiguration(_)])),r){var w=JSON.stringify(await t.showConfiguration(h)),$=JSON.stringify(await e.showConfiguration(_));if(w!==$)return a=!0,await d("diff","=> These two configurations (",o,") : ",JSON.parse(w)," and ",JSON.parse($)," differ at: "),E=(0,s.$Q)(w,$),await d("diff","\t",E[0]),await d("diff","\t",E[1]),!0}if(i){const[x,T]=await Promise.all([t.showConfiguration(h),e.showConfiguration(_)]);if(!i(x,T))return a=!0,await d("diff","=> These two configurations (",o,") : ",x," and ",T," differ according to the given comparator"),!0}const[S,O]=await Promise.all([t.getFireables(),e.getFireables()]);if(l[g]={fireables:S,id:o,config:h,configKey:g},u.push(l[g]),p[y]={fireables:O,id:o,config:_,configKey:y},f.push(p[y]),await d("info",(async()=>[t.name,"'s parsed transition ends are: ",await(0,s.sz)(S,(e=>t.showTransition(e))),", and ",e.name,"'s are: ",await(0,s.sz)(O,(t=>e.showTransition(t)))])),S.length!=O.length)return a=!0,await d("diff",t.name," returned ",S.length," fireable transitions: ",await(0,s.sz)(S,(e=>t.parseTransition(e))),", whereas ",e.name," returned ",O.length," fireable transitions: ",await(0,s.sz)(O,(t=>e.parseTransition(t)))),!0;o++,c+=S.length,o%1e3==0&&await d();for(const[k,A]of(0,s.$R)(S,O)){async function C(t,e,n){await t.setConfiguration(e),await t.fire(n)}if(await d("info",(async()=>["Firing ",await t.showTransition(k),", and ",await e.showTransition(A)])),await d("info",(async()=>["\tfrom ",l[g].id,": ",await t.showConfiguration(h)," and ",p[y].id,": ",await e.showConfiguration(_)])),await Promise.all([C(t,h,k),C(e,_,A)]),await n())return!0}}}return!1}(),globalThis.configs1a=u,globalThis.configs2a=f,await d(),{nbConfigurations:o,nbTransitions:c,diff:a}}},618:(t,e,n)=>{"use strict";function s(t){return{initial:async()=>(await t.reset(),[await t.getConfiguration()]),actions:async e=>(await t.setConfiguration(e),await t.getFireables()),execute:async(e,n)=>(await t.setConfiguration(n),await t.fire(e),[await t.getConfiguration()]),isAccepting:async e=>(await t.setConfiguration(e),await t.isAccept())}}n.d(e,{S:()=>s})},6831:(t,e,n)=>{"use strict";function s(t){async function e(e){return async function(e,n,s){const r=[];e.replace(n,((...e)=>r.push((async(e,n,s)=>JSON.stringify(await t.evaluateAtom(n)))(...e))));const i=await Promise.all(r);return e.replace(n,(()=>i.shift()))}(e,/@([^@]*)@/g)}return async(n,{s,a:r,t:i})=>{await t.setConfiguration(s);const a=await e(n);return await t.fire(r),await t.evaluateAtom(a,{})}}function r(t,e){return{semantics:{initial:async()=>(await t.reset(),[await t.getConfiguration()]),actions:async(n,s)=>(await t.setConfiguration(s),t.extraOperations.evaluateOnInput=async t=>await e(t,n),await t.getFireables()),execute:async(n,s,r)=>(await t.setConfiguration(r),t.extraOperations.evaluateOnInput=async t=>await e(t,s),await t.fire(n),[await t.getConfiguration()]),configurationHashFn:t=>function(t){let e,n,s=0;if(null==t||0===t.length)return s;for(e=0;e<t.length;e++)n=t.charCodeAt(e),s=(s<<5)-s+n,s|=0;return s}(t),configurationEqFn:(t,e)=>t===e},async evaluateState(t,e,n){throw"Unsupported"},async evaluateStep(t,e,n,s,r){throw"Unsupported"},isAccepting:async e=>(await t.setConfiguration(e),await t.evaluateAtom(t.currentModel.accepting))}}n.d(e,{Y:()=>r,v:()=>s})},8856:(t,e,n)=>{"use strict";n.d(e,{H9:()=>i,KB:()=>r});var s=n(7330);async function r(t,e,n,{onfired:r,useBlob:i=!0,withBFS:a=!1,getConfigKey:o=s.w,ondeadlock:c}={}){if(a)return async function(t,e,n,{onfired:s,useBlob:r=!0,getConfigKey:i,ondeadlock:a}={}){let o=0,c=0,l=0,u=0,p=0,f={},d=!1;async function m(e,n,s){var a=await i(e,t,!r);return!f[a]&&(f[a]={from:n,transition:s},g.push(e),o++,!0)}async function h(){e&&await e(o,c,l,u,p,_.length,g.length)}await t.reset();let g=[];await m(await t.getConfiguration());let _=g;g=[];t:for(;_.length>0;){u++,p=0;for(const e of _){p++,await t.setConfiguration(e);const r=await t.getFireables();0==r.length&&(l++,null==a||a(e)),c+=r.length,await h();for(const i of r){await t.setConfiguration(e),await t.fire(i);const r=await t.getConfiguration(e);if(s&&s(await t.parseTransition(i),r),await m(r,e,i)&&n&&await n(r,o)){d=!0;break t}}}_=g,g=[]}return await h(),{nbConfigurations:o,nbTransitions:c,nbDeadlocks:l,stoppingConditionReached:d,configs:f}}(t,e,n,{onfired:r,useBlob:i,getConfigKey:o,ondeadlock:c});var l=0,u=0,p=0,f={};async function d(){e&&await e(l,u,p)}await t.reset();const m=await async function e(s,a){s&&r&&r(await t.parseTransition(a),m);var m=await t.getConfiguration(),h=await o(m,t,!i);if(f[h]);else{var g=await t.getFireables();if(0==g.length&&(p++,null==c||c(m)),f[h]={fireables:g,from:s,transition:a},l++,u+=g.length,await d(),n&&await n(m,l))return!0;for(const n of g)if(await t.setConfiguration(m),await t.fire(n),await e(m,n))return!0}return!1}();return await d(),{nbConfigurations:l,nbTransitions:u,nbDeadlocks:p,stoppingConditionReached:m,configs:f}}async function i(t,e,n){return async function(t,e,{getConfigKey:n}={}){const s=[];do{const r=n?await n(t):t;s.unshift(e[r].transition),t=e[r].from}while(t);return console.assert(null==s.shift()),s}(await t.getConfiguration(),e,n)}},7428:(t,e,n)=>{"use strict";n.d(e,{tC:()=>g,hy:()=>y});var s=n(9625),r=n(9850);function i(t,e="black"){return t?`\n\t\tskinparam hyperlinkColor ${e}\n\t\tskinparam hyperlinkUnderline false\n\t`:""}var a=n(6054),o=n(9416),c=n(7481),l=n(4057);const u="black",p="red",f='Currently showing elements with static analysis issues in <color:red>red</color>.\\nHover your mouse over them to read messages.\\nClose "Static analysis" in "analysis tools" once done\\nreviewing them.';function d(t,e,n,o){const{raw:c=!0,callPrefix:l="",forAnimation:f=!1,editing:d=!1,colors:g=h,hideLinks:_=!1,styleMode:y,showExplicitSM:v,hideOuterSMBoxes:E,stateCommentLocation:w="left",transitionCommentLocation:$="bottom",showSelfTransitionsAsInternal:S,heatMap:O,foldedStateFQNs:x=[],onlyStateFQN:T,narrow:k=!1,longTransitionFQNs:A=[],nonRankingTransitionFQNs:C=[],elementToMessage:N}=o;function j(t,n,s){return`javascript:${l}${t}('${encodeURIComponent(e.stateFullName(n))}'${s?`,'${s}'`:""})`}function M(t,e){return`[[${n.getTransURI("editTransition",t,e)} ${(0,s.uB)(t[e])||`<add ${e}>`}]]`}function I(t,r){function i(e){return t.ports?` from ${t.ports.join(", ")}${e?" ":""}`:""}var a,o="";if(d&&!c)o=`${M(t,"trigger")}${i(!0)}[&#8203;${M(t,"guard")}]/${M(t,"effect")} [[${n.getTransURI("removeTransition",t)} &#9003;]]`,t.label&&!(t.trigger||t.guard||t.effect)&&(o=`<i><back:#FFDEDE>${(0,s.uB)(t.label)}</back></i>\\n${o}`);else{let l=!1;if(t.trigger||t.guard||t.effect){function u(){var e=t.trigger;return!c&&(n.isActivable(t)&&!n.eventMatched(t)||e&&f)&&(e=`<color:${g.noEventColor}><s>${e}</s></color>`),e}function p(){var e=(0,s.uB)(t.guard);return!c&&!n.isFireable(t)&&n.isActivable(t)&&n.eventMatched(t)&&(e=`<color:${g.falseGuardColor}><s>${e}</s></color>`),e}const m="    ";o=`${a=u(),a||""}${i(t.guard)}${t.guard?`${k&&t.trigger?"\\n"+m:""}[${p()}]`:""}${t.effect?`/${k&&(t.trigger||t.guard)?"\\n"+m:""}${(0,s.uB)(t.effect,m)}`:""}`}else t.label&&(o=`${(0,s.uB)(t.label)}`,l=!0);c||!f&&!n.isFireable(t)||(""==o&&(o="// fire"),o=`[[${n.getFireURI(t)} ${o}&#8203;]]`),o=b(o,null==N?void 0:N.get(t)),l&&(o=`<i><back:#FFDEDE>${o}</back></i>`)}return o=function(t){if(null!=O&&O.max){function n(t){return Math.log(t+1)}const s=e.transFullName(t);let r=0,i="00";function a(t){const e=t.toString(16);return(1==e.length?"0":"")+e}return s in O&&(r=Math.round(255*n(O[s])/n(O.max)),i=a(r)),`<color:${0==r?"FF":"00"}${0==r?"00":"FF"}00${0==r?"FF":i}>⬤</color>`}return""}(t)+o,""!=o?`: ${o}`:(r?":":"")+o}function L(t){return`[[javascript:${l}transitionTo('${e.stateFullName(t)}') →]] [[${j("editState",t)} ${t.name}]] [[${j("removeState",t)} &#9003;]] [[javascript:${l}transitionFrom('${e.stateFullName(t)}') →]]`}function P(t){return D(t,"Current pseudostate",g.currentStateColor)}function D(t,n,s){var r=`${e.stateFullName(t)}Note`;return`\n\t\t\tnote "${n}" as ${r} ${s?`#${s}`:""}\n\t\t\t${"initial"==t.kind?`[*] --\x3e ${r}`:`${r} --\x3e ${q(t)}`}`}function B(t,e,n){var r=`${n||""}${(0,s.uB)(t[e])}`;return d&&!c&&(r=`[[${j("editProperty",t,e)} ${r}]]`),r}function R(t){return f?t.kind&&!0:n.isCurrent(t)}function q(t){switch(String(t.kind)){case"shallowHistory":return`${q(t.region)}[H]`;case"deepHistory":return`${q(t.region)}[H*]`;case"initial":return"[*]";default:return(0,r.KL)(e.stateFullName(t))}}const U=T?e.getState(T):t,F=function t(r,i){return`\n\t\t\t${!c&&d?`\n\t\t\t\tstate "[[javascript:${l}addState('${e.stateFullName(r)}') Add state]]" as __ADD_STATE_TO_${q(r)}__\n\t\t\t\tstate "[[javascript:${l}addPseudostate('${e.stateFullName(r)}','initial') Add initial]]" as __ADD_INITIAL_TO_${q(r)}__\n\t\t\t\tstate "[[javascript:${l}addPseudostate('${e.stateFullName(r)}','choice') Add choice]]" as __ADD_CHOICE_TO_${q(r)}__\n\t\t\t\tstate "[[javascript:${l}addPseudostate('${e.stateFullName(r)}','shallowHistory') Add shallow history]]" as __ADD_SHALLOW_HISTORY_TO_${q(r)}__\n\t\t\t`:""}\n\t\t\t${(r.states||[]).map((n=>{var s=n.kind,r=[];const a=t(n,r),o=function(t){return x.includes(e.stateFullName(t))}(n);switch(n.kind){case"junction":console.log('Unsupported "%s" Pseudostate: %s',n.kind,n);break;case"deepHistory":case"shallowHistory":d&&!c&&i.push(D(n,`&#171;${n.kind}&#187; ${L(n)}`));break;case"initial":if(d&&!c)return D(n,`&#171;${n.kind}&#187; ${L(n)}`)+(R(n)?`#${g.currentStateColor}`:"");if(!c)return`\n\t\t\t\t\t\t\t${P(n)}\n\t\t\t\t\t\t\t${R(n)?"":`hide ${e.stateFullName(n)}Note`}\n\t\t\t\t\t\t`;break;case"terminate":s="end";case"join":case"fork":case"choice":case"entrypoint":case"exitpoint":return`\n\t\t\t\t\t\tstate ${q(n)} <<${s}>>\n\t\t\t\t\t\t${d&&!c?`note left of ${q(n)} ${R(n)?`#${g.currentStateColor}`:""} : &#171;${n.kind}&#187; ${L(n)}`:c?"":`${P(n)}\n\t\t\t\t\t\t\t${R(n)?"":`hide ${e.stateFullName(n)}Note`}\n\t\t\t\t\t\t`}`;default:return`\n\t\t\t\t\t\t${n.entry?`${q(n)} : ${B(n,"entry","entry/")}`:""}\n\t\t\t\t\t\t${n.exit?`${q(n)} : ${B(n,"exit","exit/")}`:""}\n\t\t\t\t\t\t${n.doActivity?`${q(n)} : ${B(n,"doActivity","do/")}`:""}\n\t\t\t\t\t\t${Object.values(n.internalTransitions||{}).map((t=>`\n\t\t\t\t\t\t\t${q(n)} ${I(t,!0)}`)).join("")}\n\t\t\t\t\t\t${!c&&d?`${q(n)} : Add [[javascript:addInternalTransition('${e.stateFullName(n)}') transition]]${n.entry?"":`, [[javascript:addEntry('${e.stateFullName(n)}') entry]]`}${n.doActivity?"":`, [[javascript:addDoActivity('${e.stateFullName(n)}') do]]`}${n.exit?"":`, [[javascript:addExit('${e.stateFullName(n)}') exit]]`}${n.comment?"":`, [[javascript:editProperty('${e.stateFullName(n)}','comment') comment]]`}`:""}\n\t\t\t\t\t\tstate ${function(t){return d&&!c?`"${L(t)}" as ${q(t)}`:`"${b(t.name,null==N?void 0:N.get(t))}" as ${q(t)}`}(n)} ${o?"<<o-o>> ":""}${!c&&R(n)?`#${g.currentStateColor}`:""} ${a.trim()?`{\n\t\t\t\t\t\t\t${o?"":a}\n\t\t\t\t\t\t}`:""}\n\t\t\t\t\t\t${r.join("")}\n\t\t\t\t\t\t${w&&n.comment?`\n\t\t\t\t\t\t\tnote ${w} of ${q(n)}\n${function(t,n){return m("editProperty",e.stateFullName(t),n,t.comment,c,d)}(n,"comment")}\n\t\t\t\t\t\t\tend note\n\t\t\t\t\t\t`:""}\n\t\t\t\t\t`}})).join("")}\n\t\t\t${(r.transitions||[]).map((t=>{return S&&t.source==t.target?`\n\t\t\t\t\t\t${q(t.source)} ${I(t)}\n\t\t\t\t\t`:`\n\t\t\t\t\t\t${q(t.source)} -${r=[...c||!n.isFireable(t)||f?[]:[`#${g.fireableTransitionColor}`],...(i=t,C.includes(e.transFullName(i))?["norank"]:[])],(0,s.Xq)(r)?`[${r}]`:""}-${function(t){return A.includes(e.transFullName(t))}(t)?"--":""}> ${q(t.target)} ${I(t)}\n\t\t\t\t\t\t${$&&(t.comment||!c&&d)?`\n\t\t\t\t\t\t\tnote ${$} on link\n${function(t,n){return m("editTransition",e.transFullName(t),n,t.comment,c,d)}(t,"comment")}\n\t\t\t\t\t\t\tend note\n\t\t\t\t\t\t`:""}`;var r,i})).join("")}\n\t\t`}(function(t,e,n,s){return s&&!n?(0,a.W)(t,e):t}(U,e,d,v));return`\n\t\t@startuml\n\t\t'left to right direction\n\t\tskinparam shadowing false\n\t\t${"dark"===y?"skinparam monochrome reverse":""}\n\t\thide empty description\n\t\t${i(_||!!N,N?p:u)}\n\t\t${!v||d||c?"":"left header Warning, showing as explicit state machine,\\nbut execution actually proceeds on the original state machine.\\nExplicit-specific function calls will not appear in history.\\nIf an history node or any other error is visible, then your state\\nmachine is not supported yet."}\n\n\t\t${E?F:`\n\t\t\tstate "${function(e){if(d&&!c){var n=encodeURIComponent(t.name);return`[[javascript:${l}editObject('${n}') ${e}]] [[javascript:${l}removeObject('${n}') &#9003;]]`}return e}(U.name)}" as ${(0,r.KL)(U.name)} {\n\t\t\t\t${F}\n\t\t\t}\n\t\t`}\n\t\t@enduml\n\t`}function m(t,e,n,s,r,i){if(!r&&i){const r=`[[javascript:${t}('${e}','${n}') edit]]`;return s?s.replace(/[^ \t\n]/,`${r} $&`):r}return s}const h={currentStateColor:"lightgreen",fireableTransitionColor:"green",noEventColor:"red",falseGuardColor:"red"};function g(t,e,n={}){const{raw:a=!0,forAnimation:h=!1,editing:g=!1,callPrefix:y="",hideLinks:v=!1,styleMode:E,hideOuterSMBoxes:w,displayedObjects:$=t.objects,displayedClasses:S=Object.values(t.classes||{}).filter((t=>!t.ends)),objectCommentLocation:O="left",operationCommentLocation:x="left",propertyCommentLocation:T="left",showMethodsAsActivities:k=!1,showActorsAsObjects:A=!1,hideConnectorMessages:C=!1,hideActorClasses:N=!1,showProperties:j=!0,showDataTypes:M=!0,showNonDataTypes:I=!0,showEventPools:L=!0,showPorts:P,hideClasses:D,hidePackages:B,checkEvents:R,hideMethods:q,hideStateMachines:U,showEndNames:F,hideOperations:K,hideOperationsAlreadyOnConnectors:W,classDiagram:G,elementToMessage:V}=n,H=$.filter((e=>P||!t.isPort(e)));if(G){function X(t){var e;return S.includes(t)&&(!N||!(null!==(e=t.stereotypes)&&void 0!==e&&e.includes("actor")))}const Q=Object.fromEntries(Object.entries(t.classes||{}).filter((([t,e])=>{var n;return X(e)||(null===(n=e.ends)||void 0===n?void 0:n.every((t=>X(t.type))))}))),Z=new Set(Object.values(Q)),tt={};if(1===S.length)Object.assign(tt,Q);else for(const[it,at]of Object.entries(Q)){function ot(t){if((0,s.Xq)(t.packagePath)){let n=tt;for(const s of t.packagePath){var e;(e=n)[s]??(e[s]={isPackage:!0,name:s,elements:{}}),n=n[s].elements}n[t.name]=t}else tt[it]=t}switch(nt(at)){case"Class":case"Interface":I&&ot(at);break;case"Enumeration":M&&ot(at);break;case"Association":I&&(tt[it]=at)}}const et=rt(tt);return 0===Object.entries(Q).length?et+'note "Nothing to show on this class diagram. You could try adding classifiers to your model." as emptyNote':V?et+`title ${f}`:et;function nt(t){return t.ends?"Association":t.literals?"Enumeration":t.isInterface?"Interface":"Class"}function st(t,e){const n=null==V?void 0:V.get(t);return t.label?` : ${b(t.label,n)}`:n?` : ${b(e,n)}`:""}function rt(t){function e(t){return null==t?void 0:t.filter((t=>Z.has(t)))}return`\n\t\t\t\t${"dark"===E?"skinparam monochrome reverse":""}\n\t\t\t\t'left to right direction\n\t\t\t\tskinparam classAttributeIconSize 0\n\t\t\t\tskinparam shadowing false\n\t\t\t\thide circle\n\t\t\t\thide empty members\n\t\t\t\t'hide fields\n\t\t\t\t${i(v||!!V,V?p:u)}\n\n\t\t\t\t${Object.entries(t).map((([t,n])=>{var i;return n.ends?I?(()=>{function e(t,e,n){return`${t.isNavigable&&!e.isNavigable?n:""}${e.isComposite?"*":""}`}function s(t){return t.multiplicity?`"${t.multiplicity}"`:""}const r=n.ends[0],i=n.ends[1];return`${r.type.name} ${s(r)} ${e(r,i,"<")}--${e(i,r,">")} ${s(i)} ${i.type.name}${st(n,t)}`})():"":n.literals?M?`\n\t\t\t\t\t\t\tenum ${n.name} <<enumeration>> {\n\t\t\t\t\t\t\t\t${n.literals.map((t=>t.name)).join("\n")}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t`:"":n.isPackage&&!B?`\n\t\t\t\t\t\t\tpackage ${t} {\n\t\t\t\t\t\t\t\t${rt(n.elements)}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t`:I?`\n\t\t\t\t\t\t\t${n.isAbstract?"abstract":""} ${n.isInterface?"interface":"class"} "${b(t,null==V?void 0:V.get(n))}" as ${t}${n.isInterface?" <<interface>>":""}${(null===(i=n.stereotypes)||void 0===i?void 0:i.map((t=>`<<${t}>>`)).join(""))??""}${(0,s.Xq)(e(n.supertypes))?` extends ${e(n.supertypes).map((t=>t.name)).join(", ")}`:""}${(0,s.Xq)(e(n.interfaces))?` implements ${e(n.interfaces).map((t=>t.name)).join(", ")}`:""} {\n\t\t\t\t\t\t\t\t${j?Object.entries(n.propertyByName??{}).map((([t,e])=>`${e.private?"-":"+"}${e.isStatic?"{static}":""}${t}${e.type?` : ${e.type}${(0,r.BV)(e)}`:""}${e.isReadOnly?" {readOnly}":""}${"defaultValue"in e?` = ${JSON.stringify(e.defaultValue)}`:""}`)).join("\n"):""}\n\t\t\t\t\t\t\t\t${K?"":Object.entries(n.operationByName??{}).map((([t,e])=>{var n;const i=null===(n=e.parameters)||void 0===n?void 0:n.some((t=>t.direction));return`${e.private?"-":"+"}${e.isStatic?"{static}":""}${b(t,null==V?void 0:V.get(e))}(${(e.parameters||[]).map((t=>`${i?t.direction?`**${t.direction}** `:"**in** ":""}${t.name??""}${t.type?` : ${t.type}${(0,r.BV)(t)}`:""}`)).join(", ")})${e.returnType?` : ${e.returnType}${(0,r.BV)(e)}`:""}${(0,s.Xq)(e.stereotypes)?" "+e.stereotypes.map((t=>`<<${t}>>`)).join(""):""}`})).join("\n")}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t${n.comments&&O?`\n\t\t\t\t\t\t\t\tnote ${O} of ${t}\n\t\t\t\t\t\t\t\t\t${n.comments.join("\n")}\n\t\t\t\t\t\t\t\tend note\n\t\t\t\t\t\t\t`:""}\n\t\t\t\t\t\t\t${T?Object.entries(n.propertyByName||{}).filter((([t,e])=>(0,s.Xq)(e.comments))).map((([e,n])=>`\n\t\t\t\t\t\t\t\tnote ${T} of ${t}::${e}\n\t\t\t\t\t\t\t\t\t${n.comments.join("\n")}\n\t\t\t\t\t\t\t\tend note\n\t\t\t\t\t\t\t`)).join("\n"):""}\n\t\t\t\t\t\t\t${x?Object.entries(n.operationByName||{}).filter((([t,e])=>(0,s.Xq)(e.comments))).map((([e,n])=>`\n\t\t\t\t\t\t\t\tnote ${x} of ${t}::${e}\n\t\t\t\t\t\t\t\t\t${n.comments.join("\n")}\n\t\t\t\t\t\t\t\tend note\n\t\t\t\t\t\t\t`)).join("\n"):""}\n\t\t\t\t\t\t`:""})).join("\n")}\n\t\t\t`}}if(D){var z=H.filter((e=>t.isActive(e))),J=z.map((s=>d(s,t,e,{...n,hideOuterSMBoxes:!1!==w&&1==$.length}))).join("");return z.forEach((t=>{Y&&(J+=`${(0,r.KL)(Y.name)} -[hidden]-> ${(0,r.KL)(t.name)}\n`),Y=t})),""===J.trim()?J='note "Nothing to show on this diagram. You could try adding state machines to your model." as emptyNote':V&&(J+=`title ${f}`),J}{function ct(t){return!R||e.findMessage(t.name,t.class.name)}function lt(t){return encodeURIComponent(`${t.class.name}.${t.name}`)}function ut(t,e){let n=e.returnType?` : ${e.returnType}${(0,r.BV)(e)}`:"";return!a&&Tt(t,e)&&(n=` [[javascript:${y}editOperationPart('${lt(e)}','returnType') ${n||": <returnType>"}]]`),n}function pt(t,e){var n;const s=null===(n=e.parameters)||void 0===n?void 0:n.some((t=>t.direction));let i=(e.parameters||[]).map((t=>"string"==typeof t?t:`${s?t.direction?`**${t.direction}** `:"**in** ":""}${t.name??""}${t.type?` : ${t.type}${(0,r.BV)(t)}`:""}`)).join(", ");return!a&&Tt(t,e)&&(i=`[[javascript:${y}editParameters('${lt(e)}') ${i||"<params>"}]]`),i}function ft(t,e){let n=`(${pt(t,e)})${ut(t,e)}`;const r=null==V?void 0:V.get(e.originalOperation),i=b(e.name,r);return n=Tt(t,e)&&!a?`[[javascript:${y}editOperation('${lt(e)}') ${i}]]${n} [[javascript:${y}removeOperation('${lt(e)}') &#9003;]]`:ct(e)&&!a?`[[javascript:${y}callOperation('${lt(e)}')${e.method?`{${(0,s.uB)(e.method).replace(/<U\+007B>/g,"{")}}`:""} ${i}]]${n}`:`${i}${n}`,n=`${e.private?"-":"+"}${n}`,n}function dt(t){return(0,r.KL)(t).replace(/\./,"__")}function mt(t){const e=!a&&g?` [[javascript:${y}removeObject('${t.name}') &#9003;]]`:"",n=t.class&&!(t.isActor&&t.class===t.name),s=null==V?void 0:V.get(t),r=gt(b(t.name,s));return n||g?`"${r} : ${ht(t)}${e}" as ${dt(t.name)}`:`"${r}${t.isActor&&!A?"":" : "}${e}" as ${dt(t.name)}`}function ht(t){return!a&&g?`[[javascript:${y}editObjectProperty('${t.name}','class') ${t.class||"<class>"}]]`:t.class}function gt(t){return a?t:g?`[[javascript:${y}editObject('${t}') ${t}]]`:`[[javascript:${y}setSender('${encodeURIComponent(t)}') ${t}]]`}function _t(e,n){return s=>{var r=s;return a||g||(!R||!t.isActive(e)&&e.isActor)&&(r=`[[javascript:${y}callOperation('${n.name}.${r.replace(/ /g,"%20")}','${e.name}') ${r}]]`),r}}function yt(e){var n;return"string"==typeof e.class?null===(n=t.classes)||void 0===n?void 0:n[e.class]:e.class}function bt(e){var n,s;const r=`<<[[javascript:${y}setActor('${e.name}',${!e.isActor}) make${e.isActor?"Object":"Actor"}]]>>`;let i="";e.isActor&A&&(i+="<<actor>>"),t.isActive(e)?i+=g&&!a?`<<[[javascript:${y}makePassive('${e.name}') makePassive]]>>${r}`:e.isActor&&!A?"":"<<active>>":g&&!a&&(i+=`<<[[javascript:${y}makeActive('${e.name}') makeActive]]>>${r}`),e.isObserver?i+=g&&!a?`<<[[javascript:${y}makeNonObserver('${e.name}') makeNonObserver]]>>`:e.isActor&&!A?"":"<<observer>>":g&&!a&&(i+=`<<[[javascript:${y}makeObserver('${e.name}') makeObserver]]>>`);const o=new Set([...e.stereotypes??[],"active","actor"]);return i+=[...e.stereotypes??[],...(null===(n=yt(e))||void 0===n||null===(s=n.stereotypes)||void 0===s?void 0:s.filter((t=>!o.has(t))))??[]].map((t=>`<<${t}>>`)).join(""),i}function vt(t,e){if(K||q)return"";var n=e.method;return Tt(t,e)&&!a?n=`[[javascript:${y}editMethod('${lt(e)}') ${n?(0,s.uB)(n):"<add method>"}]]`:n&&k?n=`\n\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t${_(c.E2.parse(n))}\n\t\t\t\t\t\t}}\n\t\t\t\t\t`:n&&(n=n.replace(/__/g,"~__")),n&&(n=`\n\t\t\t\t\t\tnote right of ${dt(e.class.name)}::${e.name}\n${n}\n\t\t\t\t\t\tend note`),n}function Et(){const e=[];return H.flatMap((n=>t.getConnectors(n).filter((s=>!e.includes(s)&&t.isPort(t.getOtherEnd(s,n)))).map((r=>{var i,a;const o=t.navigateThroughPorts(n,t.getOtherEnd(r,n));Array.prototype.push.apply(e,o.traversedConnectors);const c=(0,s.Z$)(o.traversedConnectors),l=[r.endNames?r.endNames[r.ends.indexOf(n)]:" ",c.endNames?c.endNames[c.ends.indexOf(o.target)]:" "];return{name:"VIRTUAL CONNECTOR",ends:[n,o.target],endNames:l,...1===o.traversedConnectors.length?{showAs:"(0",possibleMessages:{forward:1===c.ends.indexOf(o.target)?null===(i=c.possibleMessages)||void 0===i?void 0:i.forward:null===(a=c.possibleMessages)||void 0===a?void 0:a.reverse}}:{}}}))))}function wt(t){return t.ends.every((t=>H.includes(t)))}function $t(t,e){return!a&&xt(t,e)?`[[javascript:${y}editPropertyName('${t.name}','${e}') ${e}]]`:e}function St(t,e,n){return!a&&xt(t,n)?` : [[javascript:${y}editPropertyPart('${t.name}','${n}','type') ${e.type?e.type:"<type>"}]]`:e.type?` : ${e.type}${(0,r.BV)(e)}`:""}function Ot(t,e){return!a&&xt(t,e)?` [[javascript:${y}removeProperty('${t.name}','${e}') &#9003;]]`:""}function xt(t,e){var n;return g&&(null===(n=t.propertyByName)||void 0===n?void 0:n[e])}function Tt(t,e){var n;return g&&(null===(n=t.operationByName)||void 0===n?void 0:n[e.name])}function kt(t){return t.match(/\(.*\)/)?t:t+"()"}var Y;return J="allowmixing\n"+H.map((r=>{function i(){return t.isActive(r)&&!U?o.W`
						note right of ${dt(r.name)}
						{{
							${d(r,t,e,n)}
						}}
						end note
					`:""}function c(t){return O&&(t.comment||!a&&g)?o.W`
					note ${O} of ${dt(t.name)}
						${m("editObjectProperty",t.name,"comment",t.comment,a,g)}
					end note
				`:""}if(r.isActor&&!A)return o.W`
					actor ${mt(r)} ${bt(r)}
					${i()}
					${c(r)}
				`;{function v(t){return t.replace(/^__EMI__/,"")}function E(t){try{return t.valueOfProperty?t.valueOfProperty:JSON.stringify(t)}catch(t){return"<error>"}}const w=Object.fromEntries(Object.entries(e.getSlots(r)||{}).map((([t,e])=>[v(t),e]))),$=j?{...(_=yt(r),_&&Object.fromEntries(function t(e){var n;return[...Object.entries((null==e?void 0:e.propertyByName)??{}),...(null==e||null===(n=e.supertypes)||void 0===n?void 0:n.flatMap(t))??[]]}(_))),...r.propertyByName}:{};let S,k,C=Object.values({...(0,l.B8)(yt(r)),...r.operationByName}).map((t=>({...t,class:r,originalOperation:t})));if(W){const D=new Set;for(const R of t.getConnectors(r)){var u,p;const q=(R.ends[0]===r?null===(u=R.possibleMessages)||void 0===u?void 0:u.reverse:null===(p=R.possibleMessages)||void 0===p?void 0:p.forward)??[];for(const F of q){const G=/([^(]+)(?:\(([^)]*)\))?/,H=F.trim().match(G);H&&D.add(H[1])}}C=C.filter((t=>!D.has(t.name)))}var f,h;L&&(S=null===(f=e.getEventPool)||void 0===f?void 0:f.call(e,r),k=null===(h=e.getMatchingEtherMessages)||void 0===h?void 0:h.call(e,r),k=(0,s.Xq)(k)?k:void 0);const N=g||(0,s.Xq)(C)&&!K,M=g||Object.keys($).length+Object.keys(w).filter((t=>!t.match(/__.*__/))).length>0,I=N||M;let P=t.isPort(r)?`circle " " as ${dt(r.name)}`:o.W`
						class ${mt(r)} ${bt(r)} {
							${Object.entries($).map((([t,e])=>o.W`
									${e.private?"-":"+"} ${b($t(r,t),null==V?void 0:V.get(e))}${St(r,e,t)}${t in w?` = ${E(w[t])}`:""}${Ot(r,t)}
								`))}
							${Object.entries(w).filter((([t,e])=>!(t in $))).map((([t,e])=>t.match(/__.*__/)?"":`${t} = ${E(e)}`)).filter((t=>t))}
							${g&&!a?`[[javascript:${y}addProperty('${r.name}') ADD]] a property`:""}
							${M&&N?"---":""}
							${K?"":C.map((t=>`${ft(r,t)}`))}
							${g&&!a?`[[javascript:${y}addOperation('${r.name}') ADD]] an operation()`:""}
							${I&&(S||k)?"---":""}
							${S?o.W`
								**Event pool:** {method}
								${S.map((t=>`• ${kt(t.signature)}`))}
							`:""}
							${k?o.W`
								**Ether:** {method}
								${k.map((t=>`• ${kt(t.signature)}`))}
							`:""}
						}
						${C.map((t=>vt(r,t))).join("")}
						${c(r)}
						${T?Object.entries($).filter((([t,e])=>e.comments||!a&&xt(r,t))).map((([t,e])=>{var n;return o.W`
							note ${T} of ${dt(r.name)}::${t}
								${m("editPropertyPart",`${r.name}','${t}`,"comment",null===(n=e.comments)||void 0===n?void 0:n[0],a,g)}
							end note
						`})):""}
						${x?C.filter((t=>t.comments||!a&&Tt(r,t))).map((t=>{var e;return o.W`
							note ${x} of ${dt(r.name)}::${t.name}
								${m("editOperationPart",lt(t),"comment",null===(e=t.comments)||void 0===e?void 0:e[0],a,g)}
							end note
						`})):""}
						${i()}
					`;if(!B)for(const z of r.packagePath??[])P=o.W`
							package ${z} {
								${P}
							}
						`;return P}var _})).join("\n")+"\n"+(t.connectors||[]).filter(wt).concat(P?[]:Et().filter(wt)).map((e=>{var n,r,i="",a=C?[]:null===(n=e.possibleMessages)||void 0===n?void 0:n.forward,c=C?[]:null===(r=e.possibleMessages)||void 0===r?void 0:r.reverse,l=(0,s.Xq)(c);i="";const u=F&&e.endNames?`"${e.endNames[0]}" `:"",p=F&&e.endNames?` "${e.endNames[1]}"`:"";let f="",d="",m="";if(e.type){var h;const n=null===(h=t.classes)||void 0===h?void 0:h[e.type];if(n){const t=n.ends[0],s=n.ends[1];let r,i;e.ends[0].class===t.type.name||e.ends[1].class===s.type.name?(r=t,i=s):(r=s,i=t),r.isComposite?d+="*":i.isNavigable&&!r.isNavigable&&(d+=">"),i.isComposite?f+="*":r.isNavigable&&!i.isNavigable&&(f+="<"),m=n.label?` : ${n.label}`:""}}const g=null==V?void 0:V.get(e);return(0,s.Xq)(a)&&(i+=o.W`
					${dt(e.ends[0].name)} ${u}${f}-${l?"[#transparent]":""}${e.showAs??""}-${d}${p} ${dt(e.ends[1].name)} : > ${b(a.map(_t(e.ends[0],e.ends[1])).join("\\n"),g,"\\n")}${m}
				`),l&&(i=i?i+"\n":"",i+=o.W`
					${dt(e.ends[0].name)} ${u}${f}--${d}${p} ${dt(e.ends[1].name)} : < ${b(c.map(_t(e.ends[1],e.ends[0])).join("\\n"),g,"\\n")}${m}
				`),""==i&&(i+=o.W`
					${dt(e.ends[0].name)} ${u}${f}-${e.showAs??""}-${d}${p} ${dt(e.ends[1].name)}${m}
				`),i})).join("\n"),t.connectors&&0!=t.connectors.length||H.forEach((t=>{Y&&(J+=`${dt(Y.name)} -[hidden]-> ${dt(t.name)}\n`),Y=t})),o.W`
			${"dark"===E?"skinparam monochrome reverse":""}
			'left to right direction
			skinparam classAttributeIconSize 0
			skinparam shadowing false
			hide circle
			hide empty members
			'hide fields
			${i(v||!!V,V?p:u)}

			${V?`title ${f}`:""}

			${J}
		`}}function _(t){return o.W`
		start
		${t.map((function t(e){switch(String(e.type)){case"block":return o.W`
					${e.statements.map(t)}
				`;case"ifStat":return o.W`
						if (${(0,c.Pz)(e.condition)}) then (true)
							${t(e.thenStat)}
						else (false)
							${e.elseStat?t(e.elseStat):""}
						endif
					`;case"doStat":return o.W`
						repeat\\
							${t(e.statement)}
						repeat while (${(0,c.Pz)(e.condition)}) is (true)
						-> false;
					`;case"whileStat":return o.W`
						while (${(0,c.Pz)(e.condition)}) is (true)
							${t(e.statement)}
						endwhile (false)
					`;default:return o.W`:${(0,c.Pz)(e).replace(/\\n/g,"\\\\n").replace(/\n/g,"\\n").replace(/__/g,"~__")};`}}))}
		stop
	`}function y(t){return _(c.E2.parse(t.method))}function b(t,e,n=""){return e?(t||(t="// placeholder"),`${n}[[javascript:{${e}} ${t}&#8203;]]`):t}},9850:(t,e,n)=>{"use strict";function s(t){var e=t.replace(/ /g,"_SPACE_");return t.length>1&&(e=e.replace(/\[/g,"_LSQUARE_").replace(/]/g,"_RSQUARE_")),e}function r(t){const e=t.multiplicity;if(e){const t=e.lower??0,n=e.upper;return 0===t&&n<0?"[*]":t===n?1===t?"":`[${n}]`:`[${t}..${n<0?"*":n}]`}return""}n.d(e,{BV:()=>r,KL:()=>s})},4032:(t,e,n)=>{"use strict";n.d(e,{u:()=>o});var s=n(9416),r=n(9625),i=n(1687),a=n(4057);function o(t,e,{origin:n,scale:o,hideSets:c,hideStates:l,showPseudostateInvariants:u,hideLinks:p,participants:f=[],styleMode:d,showTransitions:m}){const h=f;let g=-1;function _(){const t=g>0&&!S?`after="msg[${g-1}]"`:"";return S=!1,t}function y(t){return(t+"").replace(/"/g,"&quot;")}function b(t){return`participant.${"string"==typeof t?t:t.name}`}function v(t){return t.displaySignature??t.signature}const E={},w=[],$={};let S=!1,O="";return(0,i.R)(s.W`
		${h.map(((t,n)=>s.W`
				<use id="${b(t)}" xlink:href="#${t.isActor?"actor":"object"}" ${0==n?'x="100" y="0"':`after="${b(h[n-1])}"`}>
					<param name="name" value="${(0,a.vD)(e,t.name)}"/>
				</use>
			`))}


		${t.flatMap(((t,n)=>{const i=[];m&&t.cause.match(/^transition:/)&&(g++,i.push(s.W`
					<use	id="msg[${g}]"
						xlink:href="#note"
						${_()}
						${O}
					>
						<param name="on" value="${b(t.activeObject)}"/>
						<param name="note" value="${t.cause}"/>
						<param name="title" value='
Watch expressions after:
							${JSON.stringify(t.watchExpressions,null,2)}
Configuration before:
							${JSON.stringify(engine.treeifyConfig(t.configuration),null,2)}'/>
					</use>
				`)),"PlantUML:loop"===t.cause&&(g++,i.push(s.W`
					<use	id="msg[${g}]"
						xlink:href="#fragment"
						${_()}
					>
						<param name="on" value="${h.map(b).join(",")}"/>
						<param name="label" value="loop"/>
						<param name="condition" value=" "/>
					</use>
				`),O=`parent="msg[${g}]"`,S=!0);const a=i.concat((t.messages||[]).map(((e,n)=>{let i="";return v(e).match(/^after\(/)?(g++,i+=s.W`
						<use	id="msg[${g}]"
							xlink:href="#after"
							${_()}
							${O}
						>
							<param name="on" value="${h.map(b).join(",")}"/>
							<param name="signature" value="${v(e)}"/>
						</use>
					`,i):"set"===e.type?(c||(e.source===e.target?(g++,i+=s.W`
							<use	id="msg[${g}]"
								xlink:href="#set"
								${_()}
								${O}
							>
								<param name="on" value="${b(e.source)}"/>
								<param name="signature" value="${y(v(e))}"/>
							</use>
						`):(g++,i+=s.W`
							<use	id="msg[${g}]"
								xlink:href="#direct"
								${_()}
								${O}
								from="${b(e.source)}"
								to="${b(e.target)}"
							>
								<param name="signature" value="${y(v(e))}"/>
							</use>
						`)),i):(e.sentAt==t&&"["!==e.source&&(g++,e.callId=g,i+=s.W`
							<use	id="msg[${g}]"
								xlink:href="#call"
								${_()}
								${O}
							>
								<param name="on" value="${b(e.source)}"/>
							</use>
						`,w.push(g),$[g]=v(e)),e.receivedAt==t&&("callId"in e?(g++,i+=s.W`
								<use	id="msg[${g}]"
									xlink:href="#${e.source===e.target?"self":""}accept"
									${_()}
									call="msg[${e.callId}]"
									${O}
								>
									<param name="on" value="${b(e.target)}"/>
									<param name="signature" value="${y(v(e))}"/>
								</use>
							`,(0,r.Od)(w,e.callId),e.returnedValue&&(g++,i+=s.W`
									<use	id="msg[${g}]"
										xlink:href="#direct"
										${_()}
										${O}
										from="${b(e.target)}"
										to="${b(e.source)}"
										class="dashed"
									>
										<param name="signature" value="${y(e.returnedValue)}"/>
									</use>
								`)):(g++,i+=s.W`
								<use	id="msg[${g}]"
									xlink:href="#found"
									${_()}
									leftmost="${b(h[0].name)}"
									${O}
								>
									<param name="on" value="${b(e.target)}"/>
									<param name="signature" value="${y(v(e))}"/>
								</use>
							`)),i)})));if(t.activeObject){const o=t.activeObjects||[t.activeObject];for(const p of o){const f=p.name;function d(t){if(e.isActive(p)){const e=t.configurationAfter.currentState[f];if(!(0,r.Z$)(e).kind||u)return e.map((t=>t.name)).join(".")}}if(!l){const x=d(t);!x||0!=n&&x===E[f]||(g++,a.push(s.W`
								<use	id="msg[${g}]"
									xlink:href="#invariant"
									${_()}
									${O}
								>
									<param name="on" value="${b(f)}"/>
									<param name="invariant" value="${y(x)}"/>
									<param name="link" value="javascript:backTo(${n+1});"/>
								</use>
							`),E[f]=x)}}}return a})).join("\n")}
		${w.map((t=>(g++,s.W`
				<use	id="msg[${g}]"
					xlink:href="#unaccepted"
					${_()}
					call="msg[${t}]"
					rightmost="${b((0,r.Z$)(h))}"
					${O}
				>
					<param name="signature" value="${y($[t])}"/>
				</use>
			`))).join("\n")}
	`,{origin:n,scale:o,hideLinks:p,styleMode:d})}},6171:(t,e,n)=>{"use strict";n.d(e,{F:()=>r});var s=n(9625);function r(t){function e(e){return"string"==typeof e?t.classes[e]:e}if(t.operations=[],Object.entries(t.operationByName||{}).forEach((([e,n])=>{n?(n.name=e,n.class=t,t.operations=t.operations||[],t.operations.push(n)):delete t.operationByName})),t.objects||t.connectorByName){if(t.objects||(t.objects=[]),"object"==typeof t.classes){var n,i;null===(n=(i=Object.values(t.classes)).forEach)||void 0===n||n.call(i,(t=>{r(t)}));for(const[n,s]of Object.entries(t.classes)){var a,o;s.supertypes=null===(a=s.supertypes)||void 0===a?void 0:a.map(e),s.interfaces=null===(o=s.interfaces)||void 0===o?void 0:o.map(e)}}return t.objects.forEach((t=>{r(t)})),t.connectors=[],(0,s.LI)(t.connectorByName,((e,n)=>{t.connectors=t.connectors||[],t.connectors.push(n),n.name=e,n.ends||(n.ends=e.split("2")),n.ends=n.ends.map((e=>{var n=e;return"string"==typeof e&&((n=t.objects.find((t=>t.name==e)))||(n={name:e},t.objects.push(n))),n}))})),t}return t.states=[],t.transitions=[],Object.keys(t.stateByName||{}).forEach((e=>{var n=t.stateByName[e];function s(e){if("string"==typeof e){var n=t.transitionByName[e];return n||(n={},t.transitionByName[e]=n),n}return e}n.region=t,r(n),n.name=e,n.incoming=(n.incoming||[]).map(s),n.incoming.forEach((t=>{t.target=n})),n.outgoing=(n.outgoing||[]).map(s),n.outgoing.forEach((t=>{t.source=n})),t.states.push(n),Object.entries(n.internalTransitions||{}).forEach((([t,e])=>{t=`__internal__${t}__`,e.region=n,e.isInternal=!0,e.source=n,e.target=n,e.name=t,n.transitionByName=n.transitionByName||{},n.transitionByName[t]=e}))})),Object.keys(t.transitionByName||{}).forEach((e=>{var n=t.transitionByName[e];function s(s,r){var i=n[s];if(!i){const o=/^(.+)2(.+?)(_[0-9]+)?$/;i="source"===s?e.replace(o,"$1"):e.replace(o,"$2")}if("string"==typeof i){let c=i.split(".");function l(e){var n=void 0;return c.forEach((e=>{n=(n||t).stateByName[e]})),n}var a=l();a||(a={name:i,states:[],transitions:[],region:t},t.stateByName[i]=a,t.states.push(a)),n[s]=a,a[r]||(a[r]=[]),c.length>1?a[r].unshift(n):a[r].push(n)}}n.isInternal||(n.name=e,t.transitions.push(n),n.region=t,s("source","outgoing"),s("target","incoming"))})),t}},4733:(t,e,n)=>{"use strict";n.d(e,{E2:()=>a,i$:()=>i}),n(7582);const s=String.raw`
	// TODO: {static}, {abstract} that can be anywhere in PlantUML but will not show up as is, only underline or italicize
	// TODO: stereotypes? apparently PlantUML only replaces << & >> by the corresponding Unicode quote characters
	//		notably the predefined stereotypes such as <<Create>> (for constructors), <<signal>> (for receptions, but not really a stereotype, just a notation keyword)
	//		a priori shown at the beginning of the line in UML
	operation =	_ visibility:visibility?
			_ isStatic:("{" _ "static" _ "}")?
			_ name:ID _ "(" parameters:parameters? ")" _ returnType:(":" _ type:ID _ multiplicity:multiplicity {return {type, multiplicity};})?
			stereotypes:stereotype*
			bodyAndComment:(
				"{" _ comment:comment? NL+ body:(
					//!(_ "}") body:REST NL+ {return body;}
					body:(b:block {return b.flat();} / !(NL* _ "}") [^{}])*	{return {body: body.flat().join(""), __bodyLocation__: location()};}
				) NL* _ "}" NL+ {return {...body, comment};}
			/	comment:comment?
				NL+ {return {comment};}
			)
												{
													operationByName[name] = {
														name,
														private:	"private" === visibility ?
																	true
																:"public" === visibility ?
																	false
																:	undefined,
														isStatic: isStatic ? true : undefined,
														parameters,
														returnType: returnType?.type,
														multiplicity: returnType?.multiplicity ?? undefined,
														method: bodyAndComment.body,
														__methodLocation__: bodyAndComment.__bodyLocation__,
														comments: bodyAndComment.comment ? [bodyAndComment.comment] : undefined,
														stereotypes,
													};
												}
	block = b:("{" ([^{}] / b:block {return b.flat();})* "}") {return b.flat();}

	parameters = _ head:parameter _ tail:("," _ param:parameter _ {return param;})*	{return [head, ...tail];}
	parameter = direction:parameterDirection? _ name:ID _ type:(":" _ type:ID _ multiplicity:multiplicity {return {type, multiplicity};})?	{
													return {
														name,
														type: type?.type,
														multiplicity: type?.multiplicity ?? undefined,
														direction: direction ?? undefined,
													};
												}

	parameterDirection = d:("in" / "inout" / "out" / "return") !IDPART			{return d;}

	comment = "''" _ c:REST {return c.replace(/\\n/g, "\n").replace(/\\(\[|])/g, "$1");}

	// TODO: {static} (& {abstract} ? supported by PlantUML, but what does it mean in UML for a property to be abstract? only Classifiers and BehavioralFeatures are supposed to be abstract)
	property =	_ visibility:visibility?
			_ isStatic:("{" _ "static" _ "}")?
			_ isDerived:("/")?
			_ name:ID
			_ type:(":" _ type:ID _ {return type;})?
			multiplicity:multiplicity
			_ isReadOnly:("{" _ "readOnly" _ "}" _)?
			defaultValue:("=" _ v:REST {return v;})?
			comment:comment?
			NL+									{
													propertyByName[name] = {
														type,
														isStatic: isStatic ? true : undefined,
														isReadOnly: isReadOnly ? true : undefined,
														isDerived: isDerived ? true : undefined,
														private:	"private" === visibility ?
																	true
																:"public" === visibility ?
																	false
																:	undefined,
														multiplicity,
														comments: comment ? [comment] : undefined,
													};
													if(defaultValue) {
														propertyByName[name].defaultValue = defaultValue;
													}
												}

	multiplicity = m:("[" _
				lower:("1" _ ".." _ {return 1;})?
				upper:("*" {return -1;} / INT)
			_ "]"  _ {return {lower, upper};})?
												{return m;}

	visibility =		"+" {return "public";}
			/	"-" {return "private";}
			/	"#" {return "protected";}
			/	"~" {return "package private";}


	stereotype = "<<" _ name:ID _ ">>" _							{return name};



	INT = v:[0-9]+										{return parseInt(v.join(""));}
	REST = s:[^\n]*										{return s.join("");}
	ID = h:[A-Za-z0-9_.À-ÖØ-öø-ÿ] t:IDPART*							{return h + t.join("");}
	IDPART = [A-Za-z0-9_.À-ÖØ-öø-ÿ]
	// TODO: character escapment (including unescaping backslashes)
	STRING = '"' value:[^"]* '"'								{return value.join("");}


	NL = _ SINGLE_LINE_COMMENT? "\r"? "\n"
	_ = ([ \t] / "\\n" / MULTI_LINE_COMMENT)*
	SINGLE_LINE_COMMENT	=	"'" REST
	MULTI_LINE_COMMENT	=	"/'" ([^'] / !("'/") "'")* "'/"
`,r=`\n\t{\n\t\tconst classifiers = {};\n\t\tlet operationByName;\n\t\tlet propertyByName;\n\n\t\tfunction getClassifier(name) {\n\t\t\t//return classifiers[name] ??= {};\t??= unsupported in node as of 20201202\n\t\t\treturn classifiers[name] = classifiers[name] ?? {name};\n\t\t}\n\n\t\tfunction getInterfaces(c) {\n\t\t\t//return c.interfaces ??= [];\n\t\t\treturn c.interfaces = c.interfaces ?? [];\n\t\t}\n\t\tfunction getSupertypes(c) {\n\t\t\t//return c.supertypes ??= [];\n\t\t\treturn c.supertypes = c.supertypes ?? [];\n\t\t}\n\t\tfunction getComments(c) {\n\t\t\t//return c.comments ??= [];\n\t\t\treturn c.comments = c.comments ?? [];\n\t\t}\n\n\t\tconst packagePath = [];\n\n\t\tfunction enterPackage(name) {\n\t\t\tpackagePath.push(name);\n\t\t}\n\n\t\tfunction leavePackage() {\n\t\t\tpackagePath.pop();\n\t\t}\n\n\t\tconst self = this;\n\t\tfunction w(node) {\n\t\t\tif(self.keepLocation) {\n\t\t\t\tnode.__location__ = location();\n\t\t\t}\n\t\t}\n\n\t\tfunction reportWarning(message) {\n\t\t\tconst loc = location();\n\n\t\t\tconst length = loc.end.offset - loc.start.offset;\n\t\t\tconst msg = \`\${self.humanLocation ? \`\${self.humanLocation}: \` : ""}Line \${loc.start.line}, column \${loc.start.column} (\${length} chars): \${message}\`;\n\t\t\tif(self.warnings) {\n\t\t\t\tself.warnings.push(msg);\n\t\t\t} else {\n\t\t\t\tconsole.log(msg);\n\t\t\t}\n\t\t}\n\t}\n\tstart =\tNL* title:(_ "title" _ title:REST NL+ {return title;})?\n\t\tpackageElement* _ NL*\n\t\t{return classifiers;}\n\n\tpackage\t=\t"package" _ name:ID _ ("{" {enterPackage(name);}) NL+\n\t\t\t\tpackageElement* NL*\n\t\t\t_ ("}" {leavePackage();})\n\n\tpackageElement\t=\t_ (class / enum / note / edge / package) NL+\n\n\tclass =\tattrs:(\n\t\t\tret:(\n\t\t\t\tisAbstract:("abstract" _ {return true;})? "class"\t{return {isAbstract};}\n\t\t\t/\t"interface"\t\t\t\t\t\t{return {isInterface: true};}\n\t\t\t)\n\t\t\t{operationByName = {}; propertyByName = {}; return ret;}\n\t\t)\n\t\t_ (STRING _ "as" _)? name:ID _ stereotypes:stereotype*\n\t\tsupertypes:("extends" _ head:ID _ tail:("," _ supertype:ID _ {return supertype;})* {return [head, ...tail];})?\n\t\tinterfaces:("implements" _ head:ID _ tail:("," _ iface:ID _ {return iface;})* {return [head, ...tail];})?\n\t\t"{" NL+ (\n\t\t\tproperty\n\t\t/\toperation\n\t\t)*\n\t\tbehavior:(\n\t\t\t_ "behavior" _ b:block NL+ {return b.slice(1, -1).join("");}\n\t\t)?\n\t\t_ "}"\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst c = getClassifier(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//[...packagePath, name].join("::")\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\tif(c.operationByName) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treportWarning(\t// TODO: error + previous line number if available\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\`warning: class \${name} already defined\`\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else if(c.ends) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treportWarning(\t// TODO: error + previous line number if available\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\`warning: an association with the same name \${name} is already defined, consider adding a distinct label to that association\`\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tObject.assign(c, {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t...attrs,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\toperationByName,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpropertyByName,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstereotypes,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbehavior,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpackagePath: packagePath.slice(0),\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\tw(c);\n\t\t\t\t\t\t\t\t\t\t\t\t\tsupertypes && getSupertypes(c).push(...supertypes.map(getClassifier));\n\t\t\t\t\t\t\t\t\t\t\t\t\tinterfaces && getInterfaces(c).push(...interfaces.map(getClassifier));\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\tenum =\t"enum" _ name:ID _ stereotypes:stereotype* "{" NL+\n\t\t\tliterals:(_ lname:ID _ comment:comment? NL+ {return {name: lname, comments: comment ? [comment] : undefined};})*\n\t\t_ "}"\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst e = getClassifier(name);\n\t\t\t\t\t\t\t\t\t\t\t\t\te.name = name;\n\t\t\t\t\t\t\t\t\t\t\t\t\te.literals = literals;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\tedge = realization / generalization / association\n\n\trealization = left:ID _ left2right:("..|>" {return true;} / "<|.." {return false;}) _ right:ID\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst l = getClassifier(left);\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst r = getClassifier(right);\n\t\t\t\t\t\t\t\t\t\t\t\t\tif(left2right) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tgetInterfaces(l).push(r);\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tgetInterfaces(r).push(l);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\tgeneralization = left:ID _ left2right:("-"+ "|>" {return true;} / "<|" "-"+ {return false;}) _ right:ID\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst l = getClassifier(left);\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst r = getClassifier(right);\n\t\t\t\t\t\t\t\t\t\t\t\t\tif(left2right) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tgetSupertypes(l).push(r);\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tgetSupertypes(r).push(l);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t// PlantUML does not allow < & * on the same side\n\tassociation =\t\tleft:ID _ leftLabel:(r:STRING _ {return r;})? leftNav:"<"? leftComp:"*"?\n\t\t\t"-"+ (\n\t\t\t\tdirection hidden?\n\t\t\t/\thidden direction?\n\t\t\t)? "-"*\n\t\t\t\trightComp:"*"? rightNav:">"? _ rightLabel:(r:STRING _ {return r;})? right:ID\n\t\t\tlabel:(_ ":" _ r:REST {return r;})?\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst assoc = getClassifier(left + "2" + right + (label ? "_" + label : ""));\n\t\t\t\t\t\t\t\t\t\t\t\t\tif(assoc.ends || assoc.operationByName) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treportWarning(\t// TODO: error + previous line number if available\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\`warning: classifier \${assoc.name} already defined, add a distinct label\`\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tassoc.ends = [\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype: getClassifier(left),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tisNavigable: (!!leftNav) || (!leftNav && !rightNav),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tisComposite: !!rightComp,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmultiplicity: leftLabel,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype: getClassifier(right),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tisNavigable: (!!rightNav) || (!leftNav && !rightNav),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tisComposite: !!leftComp,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmultiplicity: rightLabel,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t\t\t\t\t\t\tw(assoc);\n\t\t\t\t\t\t\t\t\t\t\t\t\tassoc.label = label;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\tdirection\t=\t"left" / "right" / "up" / "down"\n\t\t\t/\t"l" / "r" / "u" / "d"\n\n\thidden\t\t=\t"[hidden]"\n\n\t/*\n\t\tTODO:\n\t\t\t- keep notes as comments\n\t\t\t- note on property/operation\n\t*/\n\tnote =\t"note" _ ("left" / "right" / "top" / "bottom") _ "of" _ target:ID targetTail:(_ "::" _ r:ID {return r;})* _ NL\n\t\t\tnote:(!(_ "end" _ "note") note:REST NL {return note;})*\n\t\t_ "end" _ "note"\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst tgt = getClassifier(target);\n\t\t\t\t\t\t\t\t\t\t\t\t\tif(targetTail.length) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst op = tgt.operationByName[targetTail[0]];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(op) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgetComments(op).push(note.join("\\n"));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst prop = tgt.propertyByName[targetTail[0]];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(prop) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgetComments(prop).push(note.join("\\n"));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tgetComments(tgt).push(note.join("\\n"));\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\n\t${s}\n`,i=peg.generate(String.raw`
	{
		let operationByName = {};
		let propertyByName = {};
	}
	start = NL*
		(	property
		/	operation
		)* _ {return {operationByName, propertyByName};}
	${s}
`),a=peg.generate(r)},3416:(t,e,n)=>{"use strict";n.d(e,{E2:()=>s,x6:()=>r}),n(7582);const s=peg.generate('\n\t{\n\t\tconst refSpans = new Map();\n\t\tconst map = new Map();\n\t\tlet index = 0;\n\t\tconst stack = [];\n\t\tconst toResolve = new Map();\n\t\tconst activations = [];\n\t\tconst accepted = new Set();\n\t\tlet parts;\n\t\tfunction store(id, to) {\n\t\t\tif(id) {\n\t\t\t\tif(map.has(id)) {\n\t\t\t\t\tunsupportedItem({}, `warning: ${id} already defined`);\n\t\t\t\t}\n\t\t\t\tmap.set(id, {index, to});\n/*\n\t\t\t\tif(toResolve.has(id)) {\n\t\t\t\t\tconst objs = toResolve.get(id);\n\t\t\t\t\tfor(const obj of objs) {\n\t\t\t\t\t\tobj.obj[obj.idrefAttr] = index;\n\t\t\t\t\t}\n\t\t\t\t}\n*/\n\t\t\t}\n\t\t}\n\t\t// for forward references\n\t\tfunction resolveLater(id, to) {\n\t\t\tif(!parts.has(to)) {\n\t\t\t\tlet c = toResolve.get(to);\n\t\t\t\tif(!c) {\n\t\t\t\t\tc = [];\n\t\t\t\t\ttoResolve.set(to, c);\n\t\t\t\t}\n\t\t\t\tc.push(index);\n\t\t\t}\n\t\t}\n\t\tfunction enter() {\n\t\t\tstack.push(index);\n\t\t\tindex = 0;\n\t\t}\n\t\tfunction leave() {\n\t\t\tindex = stack.pop();\n\t\t}\n\t\tfunction gates(id) {\n\t\t\tconst calls = toResolve.get(id);\n\t\t\treturn calls?.map(i => ({name: "??", accept: i}));\n\t\t}\n\t\tconst self = this;\n\t\tfunction unsupportedItem(item, message) {\n\t\t\tconst loc = location();\n\t\t\tconst length = loc.end.offset - loc.start.offset;\n\t\t\tconst msg = `${self.humanLocation ? `${self.humanLocation}: ` : ""}Line ${loc.start.line}, column ${loc.start.column} (${length} chars): ${message}`;\n\t\t\tif(self.warnings) {\n\t\t\t\tself.warnings.push(msg);\n\t\t\t} else {\n\t\t\t\tconsole.log(msg);\n\t\t\t}\n/*\n\t\t\tindex++;\n\t\t\treturn item;\n/*/\n\t\t\treturn undefined;\n/**/\n\t\t}\n\t}\n\tstart =\tNL* title:(_ "title" _ title:REST NL+ {return title;})?\n\t\tlifelines:(lifelines:lifeline* {parts = new Set(lifelines); return lifelines;})\n\t\tevents:events _\n\t\t{return {title, lifelines: lifelines.map(e => e.name), events: events.filter(e => e),\n\t\t\t//toResolve,\n\n\t\t\t// used by CLILoadModel.js/createDummyModel\n\t\t\tobjects: self.keepObjects ? lifelines : undefined,\n\t\t\trefSpans: self.keepRefSpans ? refSpans : undefined,\n\t\t};}\n\n\tevents =  (_ e:event _ NL+ {return e;})*\n\n\tlifeline = _ isActor:("actor" {return true;} / "participant" {return false;}) _ (STRING _ "as" _)? name:ID _ NL+ {return {isActor, name};}\n\n\tevent =\n\t\t\t_ id:(id:ID _ ":" _ {return id;})?\n\t\t\tfrom:ID _ "-" mode:(">" / "?") _ to:ID _\n\t\t\taction:(e:("++" / "--" / "**" / "!!") _ {return e;})?\n\t\t\t":" _ call:(sig / call:REST {return {call};})\n\t\t\tactivate:(NL+ _ "activate" _ act:ID &{\n\t\t\t\treturn mode === ">" && act === to;\n\t\t\t} _)? &NL\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tstore(id, to); resolveLater(id, to);\n\t\t\t\t\t\t\t\t\t\t\t\t\tif(activate || action === "++") {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tactivations.push(index);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tindex++;\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst ret = {arguments: call.args || undefined, target: call.target || undefined, from, to: to};\n\t\t\t\t\t\t\t\t\t\t\t\t\tif(mode === "?") {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tret.call = call.call;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tret.type = "call";\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tret.accept = call.call;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tret.type = "autoAcceptCall";\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taccepted.add(JSON.stringify([...stack, index - 1]));\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn ret;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t/\t_ from:ID _ "--\x3e" _ to:ID _ ":" _ returnValue:REST\t\t\t{return unsupportedItem({returnValue, from, to}, `warning: ignoring return from ${from} to ${to}; try using PlantUML\'s return syntax or AnimUML\'s returning syntax.`);}\n\t\t\t\t// TODO: recognize this dotted arrow right after deactivation\n\t\t/\t_ "returning" _ returningCallId:ID _ ":" _ returnValue:REST\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tindex++;\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst returningCall = map.get(returningCallId)?.index;\n\t\t\t\t\t\t\t\t\t\t\t\t\tif(returningCall === undefined || returningCall === null) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tunsupportedItem({}, `warning: call ${returningCallId} not found`);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn {type: "return", returningCall, return: returnValue};\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t/\t_ fromGate:("[" _ e:ID? _ {return e;})? "->" _ to:ID _ ":" _ call:(sig / call:REST {return {call};})\n\t\t\tactivate:(NL+ _ "activate" _ act:ID &{\n\t\t\t\treturn act === to;\n\t\t\t} _)? &NL\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tindex++;\n\t\t\t\t\t\t\t\t\t\t\t\t\tif(activate) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tactivations.push(index);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn {type: "found", arguments: call.args || undefined, call: call.call, fromGate: fromGate ?? "??", to};\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t/\t_ "activate" _ activate:ID\t\t\t\t\t\t{activations.push("UNKNOWN"); return unsupportedItem({activate}, `warning: ignoring activation of ${activate}, which does not immediately follow a call message.`);}\n\t\t/\t_ "deactivate" _ deactivate:ID\t\t\t\t\t\t{activations.pop(); return unsupportedItem({deactivate}, `warning: ignoring deactivation of ${deactivate}; try returning the call instead.`);}\n\t\t/\t_ id:(id:ID _ ":"_ {return id;})?\n\t\t\t"ref" _ "over" _ h:ID t:(_ "," _ e:ID {return e;})* _\n\t\t\taccepting:("accepting" _ gh:gate gt:("," _ e:gate {return e;})* {return [gh, ...gt]})?\n\t\t\t":" _ ref:REST\n\t\t\t\t\t\t\t\t\t\t\t\t{store(id); index++; refSpans.set(ref, [h, ...t]); return {type: "ref", ref, gates: [...accepting ?? [], ...gates(id) ?? []]};}\n\t\t/\t_ "loop" _ condition:loopCondition (NL+ {enter()}) loopBody:events _ "end"\t\t{leave(); index++; return {type: "loop", ...condition, loopBody: loopBody.filter(e => e)};}\n\t\t/\t_ type:("alt" / "par") _ h:(condition:REST (NL+ {enter()}) altBody:events\t\t{leave(); return {type: "alternative", condition: condition ? condition : undefined, altBody: altBody.filter(e => e)};})\n\t\t\tt:(_ "else" _ condition:REST (NL+ {enter()}) altBody:events\t\t{leave(); return {type: "alternative", condition, altBody: altBody.filter(e => e)};})*\n\t\t\t_ "end"\t\t\t\t\t\t\t\t\t{index++; return {type, alternatives: [h, ...t]};}\n\t\t/\t_ "create" _ create:ID\t\t\t\t\t\t\t{index++; return {create};}\n\t\t/\t_ "..." _ "after" _ "(" _ after:[^\\n)]* ")" _ "..." "."*\t\t{index++; return {type: "after", after: after.join("")};}\n\t\t/\t_ "accept" _ accept:ID\n\t\t\tactivate:(_ NL+ _ "activate" _ to:ID &{\n\t\t\t\treturn to === map.get(accept).to;\t// TODO: transform into warning?\n\t\t\t} _)? &NL\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tindex++;\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst call = map.get(accept)?.index;\n\t\t\t\t\t\t\t\t\t\t\t\t\tif(call === undefined || call === null) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tunsupportedItem({}, `warning: call ${accept} not found`);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tif(accepted.has(JSON.stringify([...stack, call]))) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tunsupportedItem({}, `warning: call ${accept} already accepted`);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tif(activate) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tactivations.push(call);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\taccepted.add(JSON.stringify([...stack, call]));\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn {type: "accept", accept: call};\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t/\t_ "return" !IDPART _ returnValue:REST\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tindex++;\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst returningCall = activations.pop();\n\t\t\t\t\t\t\t\t\t\t\t\t\tif(returningCall === undefined || returningCall === null) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tunsupportedItem({}, `warning: no message to return, remember to activate or ++`);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn {type: "return", returningCall, return: returnValue};\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\tgate\t=\taccept:ID _ "from" _ name:ID _\t\t\t\t\t\t{return {name, accept: map.get(accept).index};}\n\n\tloopCondition\t=\tupper:INT _ "times" _\t\t\t\t\t\t{return {lower: upper, upper};}\n\t\t\t/\tcondition:REST\t\t\t\t\t\t\t{return {condition};}\n\n\tREST = s:[^\\n]*\t\t\t\t\t\t\t\t\t{return s.join("");}\n\tIDSTART = [A-Za-z_]\n\tIDPART = [A-Za-z0-9_]\n\tID = h:IDSTART t:IDPART*\t\t\t\t\t\t\t\t{return h + t.join("");}\n\tSTRING = \'"\' [^"]* \'"\'\n\tsig =\ttarget:(e:[^(\\n=]+ _ "=" _ {return e.join("");})? call:[^(\\n]* _ "("\n\t\t\targs:(_ args:(h:arg t:(_ "," _ arg:arg {return arg;})* {return [h, ...t];}) {return args;})?\n\t\t")"\t\t\t\t\t\t\t\t\t\t{return {call: call.join(""), args: args ?? [], target: target?.trim()};}\n\targ = arg:[^,)]+ {return arg.join("");}\n\tNL = _ COMMENT? "\\r"? "\\n"\n\t_ = [ \\t]*\n\tCOMMENT = "\'" REST / "/\'" (!"\'/" .)* "\'/"\n\tINT\t= d:[0-9]+\t\t\t\t\t\t\t\t\t\t{return Number.parseInt(d.join(""));}\n');function r(t){return"lifelines"in t?"interaction":"fromGate"in t?"found":"call"in t||"call"in t?"call":"accept"in t?"string"==typeof t.accept?"autoAcceptCall":"accept":"returningCall"in t?"return":"state"in t?"state":"after"in t?"after":"ref"in t?"ref":"alternatives"in t?"alt":"loopBody"in t?"loop":"altBody"in t?"alternative":void 0}},7275:(t,e,n)=>{"use strict";n.d(e,{E:()=>s}),n(7582);const s=peg.generate('\n\t{\n\t\tconst regions = [];\n\t\tlet region;\n\t\tfunction newRegion() {\n\t\t\tregion = {stateByName: {}, transitionByName: {}};\n\t\t}\n\t\tnewRegion();\n\t\tfunction enter(name) {\n\t\t\tregions.push(region);\n/*\n\t\t\tif(name in region.stateByName) {\nconsole.log("region already existing", name)\n\t\t\t\tregion = region[name];\n\t\t\t} else {\n\t\t\t\tnewRegion();\n\t\t\t}\n*/\n\t\t\tregion = getState(name);\n\t\t}\n\t\tfunction leave(state) {\n\t\t\tconst nestedRegion = region;\n\t\t\tregion = regions.pop();\n\t\t\t//Object.assign(getState(state), nestedRegion);\n\t\t}\n\t\tfunction addTransition(trans, name) {\n\t\t\tsimplifyTrans(trans);\n\t\t\tif(!name) {\n\t\t\t\tconst baseName = trans.source + "2" + trans.target + "_";\n\t\t\t\tlet i = 1;\n\t\t\t\twhile((baseName + i) in region.transitionByName) i++;\n\t\t\t\tname = baseName + i;\n\t\t\t}\n\t\t\tregion.transitionByName[name] = trans;\n\t\t}\n\t\tfunction addInternalTransition(state, trans, name) {\n\t\t\tsimplifyTrans(trans);\n\t\t\tconst st = getState(state);\n\t\t\tst.internalTransitions = st.internalTransitions || {};\n\t\t\tif(!name) {\n\t\t\t\tlet i = 1;\n\t\t\t\twhile(st.internalTransitions["T" + i]) i++;\n\t\t\t\tname = "T" + i;\n\t\t\t}\n\t\t\tst.internalTransitions[name] = trans;\n\t\t}\n\t\tfunction simplifyTrans(trans) {\n\t\t\tif(trans.trigger) {\n\t\t\t\ttrans.trigger = trans.trigger.call + (\n\t\t\t\t\ttrans.trigger.args\n\t\t\t\t\t?\t"(" + (trans.trigger.args || []).join(", ") + ")"\n\t\t\t\t\t:\t""\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\ttrans.trigger = undefined;\n\t\t\t}\n\t\t\tif(trans.guard) {\n\t\t\t\ttrans.__rawGuard__ = trans.guard;\n\t\t\t\ttrans.guard = unesc(trans.guard);\n\t\t\t} else {\n\t\t\t\ttrans.guard = undefined;\n\t\t\t}\n\t\t\tif(trans.effect) {\n\t\t\t\tif(self.keepLocation) {\n\t\t\t\t\ttrans.__rawEffect__ = trans.effect;\n\t\t\t\t} else {\n\t\t\t\t\ttrans.__effectLocation__ = undefined;\n\t\t\t\t}\n\t\t\t\ttrans.effect = unesc(trans.effect);\n\t\t\t} else {\n\t\t\t\ttrans.effect = undefined;\n\t\t\t}\n\t\t\tif(trans.label) {\n\t\t\t\ttrans.label = unesc(trans.label);\n\t\t\t} else {\n\t\t\t\ttrans.label = undefined;\n\t\t\t}\n\t\t\tif(trans.comment) {\n\t\t\t\ttrans.comment = unesc(trans.comment);\n\t\t\t} else {\n\t\t\t\ttrans.comment = undefined;\n\t\t\t}\n\t\t}\n\t\tfunction unesc(s) {\n\t\t\tconst ret = s\n\t\t\t\t.replace(/\\\\(.)/g, (m, c) => {\n\t\t\t\t\tswitch(c) {\n\t\t\t\t\t\tcase "\\\\": return "\\\\";\n\t\t\t\t\t\tcase "n": return "\\n";\n\t\t\t\t\t\tcase "t": return "\\t";\n\t\t\t\t\t\tdefault: return c;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t;\n\t\t\treturn ret;\n\t\t}\n\t\tconst self = this;\n\t\tfunction reportWarning(message) {\n\t\t\tconst loc = location();\nconsole.log(loc)\n\t\t\tconst length = loc.end.offset - loc.start.offset;\n\t\t\tconst msg = `${self.humanLocation ? `${self.humanLocation}: ` : ""}Line ${loc.start.line}, column ${loc.start.column} (${length} chars): ${message}`;\n\t\t\tif(self.warnings) {\n\t\t\t\tself.warnings.push(msg);\n\t\t\t} else {\n\t\t\t\tconsole.log(msg);\n\t\t\t}\n/*\n\t\t\tindex++;\n\t\t\treturn item;\n/*/\n\t\t\treturn undefined;\n/**/\n\t\t}\n\t\tfunction capitalize(s) {\n\t\t\treturn s.charAt(0).toUpperCase() + s.slice(1);\n\t\t}\n\t\t// could be generalized to addStatePropertyValue, because it is notably used with action={type: "kind", action: "choice"}\n\t\tfunction addStateAction(state, action) {\n\t\t\tconst oldAction = getState(state)[action.type];\n\t\t\tif(oldAction) {\n\t\t\t\treportWarning(`warning: ${action.type} already defined for ${state} (old value: ${oldAction}; new value: ${action.action})`);\n\t\t\t}\n\t\t\tgetState(state)[action.type] = unesc(action.action);\n\t\t\tif(self.keepLocation) {\n\t\t\t\tgetState(state)[`__raw${capitalize(action.type)}__`] = action.action;\n\t\t\t\tgetState(state)[`__${action.type}Location__`] = action[`__${action.type}Location__`];\n\t\t\t}\n\t\t\t// TODO: keep __{}Location__\n\t\t}\n\t\tfunction getState(state) {\n\t\t\treturn region.stateByName[state] = region.stateByName[state] || {stateByName: {}, transitionByName: {}};\n\t\t}\n\t\tfunction addInit() {\n\t\t\tregion.stateByName.init = {type: "Pseudostate", kind: "initial"};\n\t\t}\n\t\tfunction addTerminate() {\n\t\t\tregion.stateByName.__end__ = {type: "Pseudostate", kind: "terminate"};\n\t\t}\n\t\tfunction addShallowHistory(st) {\n\t\t\tconst parent = getState(st);\n\t\t\tparent.stateByName = parent.stateByName || {};\n\t\t\tparent.stateByName._hist_ = {type: "Pseudostate", kind: "shallowHistory"};\n\t\t}\n\n\t\tfunction w(node, loc = undefined) {\n\t\t\treturn self.keepLocation\n\t\t\t?\n\t\t\t\t{...node, __location__: loc ?? location()}\n\t\t\t:\tnode\n\t\t\t;\n\t\t}\n\n\t\tfunction reduce(loc, npre = 1, npost = npre) {\n\t\t\treturn {\n\t\t\t\tstart: {\n\t\t\t\t\tline: loc.start.line,\n\t\t\t\t\tcolumn: loc.start.column + npre,\n\t\t\t\t\toffset: loc.start.offset + npre,\n\t\t\t\t},\n\t\t\t\tend: {\n\t\t\t\t\tline: loc.end.line,\n\t\t\t\t\tcolumn: loc.end.column - npost,\n\t\t\t\t\toffset: loc.end.offset - npost,\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\t}\n\tstart =\tNL* title:(_ "title" _ title:REST NL+ {return title;})?\n\t\t(_ (transition / state / note))* _\n\t\t{return w(region);}\n\n\ttransition = internalTransition / externalTransition\n\texternalTransition =\tsource:("[*]" {addInit(); return "init";} / source:ID)\n\t\t\t\ttransitionArrow\n\t\t\t\t_ target:(\n\t\t\t\t\t"[*]" {addTerminate(); return "__end__";}\n\t\t\t\t/\tst:ID _ "[H]" {addShallowHistory(st); return st + "._hist_";}\n\t\t\t\t/\th:ID t:(_ "." _ i:ID {return i;})* {return [h, ...t ?? []].join(".");}\n\t\t\t\t)\n\t\t\t\tname:transitionName?\n\t\t\t\t_ label:(\n\t\t\t\t\t":" _ label:(\n\t\t\t\t\t\t&(transitionLabel NL) label:transitionLabel {return label;}\n\t\t\t\t\t/\tlabel:REST {return {label};}\n\t\t\t\t\t) {return label;}\n\t\t\t\t)? loc:(_ {return location();}) NL+\n\t\t\t\tnote:transitionComment\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{addTransition(w(Object.assign({source, target, comment: note}, label), {...location(), end: loc.end}), name);}\n\n\ttransitionName =\t_ "as" _ name:(ID / STRING)\t\t\t\t\t\t\t\t\t{return name;}\n\ttransitionComment =\t// TODO: support note on link anywhere after a link, like PlantUML?\n\t\t\t\tnote:(\n\t\t\t\t\t_ "note" _ "on" _ "link" _ NL+\n\t\t\t\t\t\tnote:(!(_ "end" _ "note") note:REST NL {return note;})*\n\t\t\t\t\t_ "end" _ "note" _ NL+ {return note.join("\\n");}\n\t\t\t\t)?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{return note;}\n\ttransitionArrow = _ "-"+ (\n\t\t\t\tdirection hidden?\n\t\t\t/\thidden direction?\n\t\t\t)? "-"* ">"\n\n\tdirection\t=\t"left" / "right" / "up" / "down"\n\t\t\t/\t"l" / "r" / "u" / "d"\n\n\thidden\t\t=\t"[hidden]"\n\n\tinternalTransition = state:ID name:transitionName? _ ":" _ (\t\t// WARNING: name allowed for stateAction although not used\n\t\t\t\t\t&(stateAction NL) action:stateAction\t\t\t\t\t\t\t{addStateAction(state, action);}\n\t\t\t\t/\t&(transitionLabel NL) label:transitionLabel\t\t\t\t\t\t{addInternalTransition(state, w(label), name);}\n\t\t\t\t/\tlabel:REST\t\t\t\t\t\t\t\t\t\t{addInternalTransition(state, w({label}), name);}\n\t\t\t\t) NL+\n\tstate =\t"state" _ (STRING _ "as" _ )? name:ID _ (\n\t\t\t"<<" _ action:("choice" / "junction" / "join") _ ">>" {addStateAction(name, {type: "kind", action});}\n\t\t/\t("{" {enter(name);}) _ NL+\n\t\t\t\t(_ (transition / state))*\n\t\t\t_ ("}" {leave(name);})\n\t\t)? _ NL+\n\n\ttransitionLabel =\ttrigger:sig? _ ports:("from" _ h:ID _ t:("," _ i:ID _ {return i;})* {return [h, ...t];})? guard:("[" _ guard:(guard:[^\\]\\n]* {return {guard: guard.join(""), __guardLocation__: location()};}) _ "]" _ {return guard;})? effect:(\n\t\t\t\t\t"/" _\n\t\t\t\t\teffect:(\n\t\t\t\t\t\teffect:(\n\t\t\t\t\t\t\teffect:block {return {effect: effect.flat().slice(1, -1).join(""), __effectLocation__: reduce(location())};}\n\t\t\t\t\t\t/\teffect:REST {return {effect, __effectLocation__: location()};}\n\t\t\t\t\t\t) {return effect;}\n\t\t\t\t\t)\n\t\t\t\t\t{return effect;}\n\t\t\t\t)?\n\t\t\t\t{return {trigger, ports, ...guard, ...effect};}\n\n\tblock = b:("{" ([^{}] / b:block {return b.flat();})* "}") {return b.flat();}\n\n\tstateAction =\ttype:("entry" / "exit" / "do" {return "doActivity";}) _ "/" _ action:(\n\t\t\t\taction:block {return {action: action.flat().slice(1, -1).join(""), ["__" + type + "Location__"]: reduce(location())};}\n\t\t\t/\taction:REST {return {action, ["__" + type + "Location__"]: location()}}\n\t\t\t) {return {type, ...action};}\n\tnote =\t_ "note" _ ("left" / "right" / "top" / "bottom") _ "of" _ state:ID _ NL\n\t\t\tnote:(!(_ "end" _ "note") note:REST NL {return note;})*\n\t\t_ "end" _ "note" _ NL+\t\t\t\t\t\t\t\t\t\t\t\t{getState(state).comment = note.join("\\n");}\n\n\n\n\tREST = s:[^\\n]*\t\t\t\t\t\t\t\t\t{return s.join("");}\n\tID = h:[A-Za-z_.À-ÖØ-öø-ÿ]t:[A-Za-z0-9_.À-ÖØ-öø-ÿ]*\n\t\t\t\t\t\t\t\t\t\t\t\t{return h + t.join("");}\n\tSTRING = \'"\' s:[^"]* \'"\'\t\t\t\t\t\t\t\t{return s.join("");}\n\tsig =\tcall:ID _ args:("("\n\t\t\targs:(_ args:(h:arg t:(_ "," _ arg:arg {return arg;})* {return [h].concat(t);}) {return args;})?\n\t\t")" {return args ?? [];})?\t\t\t\t\t\t\t\t{return {call, args};}\n\targ = arg:[^,)]+ {return arg.join("");}\n\n\n\tNL = _ COMMENT? "\\r"? "\\n"\n\t_ = ([ \\t] / "\\\\n")*\n\tCOMMENT = "\'" REST / "/\'" (!"\'/" .)* "\'/"\n')},8113:(t,e,n)=>{"use strict";n.d(e,{o:()=>a});var s=n(1687);n(5012);var r=n(9625),i=n(4057);function a(t,e,{origin:n,interactionConfig:a,participants:o=[],styleMode:c}){function l(t){return`participant.${t}`}function u(t,e){return t[e.accept]}function p(t){const e=new Set(t.flatMap((e=>f(t,e))));return g.filter((t=>e.has(t)))}function f(t,n){if("fromGate"in n)return[n.to];if("call"in n)return[n.from];if("accept"in n)return"string"==typeof n.accept?[n.from,n.to]:[u(t,n).to];if("state"in n)return[n.object];if("loopBody"in n)return p(n.loopBody);if("altBody"in n)return p(n.altBody);if("alternatives"in n)return p(n.alternatives);if("ref"in n){var s;const t=p((null===(s=e.interactions[n.ref])||void 0===s?void 0:s.events)??[]),r=g.filter((e=>t.includes(e)));return 0==r.length?g:r}if("after"in n||"ref"in n||"returningCall"in n)return[];console.log("Unsupported event: ",n)}function d(t,e){return f(t,e)}function m(t,e,n,s,r){function i(){return`event[${s}${n-1}]`}function o(){return n>0?`after="${i()}"`:""}function c(t){return function(t){const e=`${s}${n}`;return a&&a[t].some((({eventRef:t})=>(console.log(t.join("."),"===",e),t.join(".")===e)))}(t)?"<param name='cursor' value='yes'/>":""}function p(t=""){return`event[${s}${n}${t}]`}function h(t){const e=p(t);return y=e,`id="${e}"`}function b(){return r?`parent="${r}"`:""}if("fromGate"in e){const v=e.target?`${e.target} = `:"";return`\n\t\t\t\t<use\t${h()}\n\t\t\t\t\txlink:href="#found"\n\t\t\t\t\t${o()}\n\t\t\t\t\t${b()}\n\t\t\t\t\tleftmost="${l(g[0])}"\n\t\t\t\t>\n\t\t\t\t\t<param name="on" value="${l(e.to)}"/>\n\t\t\t\t\t<param name="signature" value="${v}${e.call}(${e.arguments||[]})"/>\n\t\t\t\t\t<param name="circle" value="none"/>\n\t\t\t\t\t${c(e.from)}\n\t\t\t\t</use>\n\t\t\t`}if("call"in e){const E=p();return _.set(E,e),`\n\t\t\t\t<use\t${h()}\n\t\t\t\t\txlink:href="#call" \n\t\t\t\t\t${o()}\n\t\t\t\t\t${b()}\n\t\t\t\t>\n\t\t\t\t\t<param name="on" value="${l(e.from)}"/>\n\t\t\t\t\t${c(e.from)}\n\t\t\t\t</use>\n\t\t\t`}if("accept"in e){let w,$,S,O,x,T="";return"string"==typeof e.accept?(w=e,$=`${p()}.call`,S=`\n\t\t\t\t\t<use\tid="${$}"\n\t\t\t\t\t\txlink:href="#call" \n\t\t\t\t\t\t${o()}\n\t\t\t\t\t\t${b()}\n\t\t\t\t\t>\n\t\t\t\t\t\t<param name="on" value="${l(e.from)}"/>\n\t\t\t\t\t\t${c(e.from)}\n\t\t\t\t\t</use>\n\t\t\t\t`,O=$,x=w.accept,e.target&&(T=`${e.target} = `)):(w=u(t,e),$=`event[${s}${e.accept}]`,S="",O=i(),x=w.call,_.delete($),w.target&&(T=`${w.target} = `)),`\n\t\t\t\t${S}\n\t\t\t\t<use\t${h()}\n\t\t\t\t\txlink:href="#${w.to===w.from?"selfaccept":"accept"}"\n\t\t\t\t\tafter="${O}"\n\t\t\t\t\tcall="${$}"\n\t\t\t\t\t${b()}\n\t\t\t\t>\n\t\t\t\t\t<param name="on" value="${l(w.to)}"/>\n\t\t\t\t\t<param name="signature" value="${T}${x}(${w.arguments||[]})"/>\n\t\t\t\t\t${c(w.to)}\n\t\t\t\t</use>\n\t\t\t`}if("returningCall"in e){const k=t[e.returningCall];return k.from===k.to?`\n\t\t\t\t\t<use\t${h("call")}\n\t\t\t\t\t\txlink:href="#call"\n\t\t\t\t\t\t${o()}\n\t\t\t\t\t\t${b()}\n\t\t\t\t\t>\n\t\t\t\t\t\t<param name="on" value="${l(k.to)}"/>\n\t\t\t\t\t</use>\n\t\t\t\t\t<use\t${h()}\n\t\t\t\t\t\txlink:href="#selfaccept"\n\t\t\t\t\t\tafter="${p("call")}"\n\t\t\t\t\t\tcall="${p("call")}"\n\t\t\t\t\t\t${b()}\n\t\t\t\t\t\tclass="dashed"\n\t\t\t\t\t>\n\t\t\t\t\t\t<param name="on" value="${l(k.from)}"/>\n\t\t\t\t\t\t<param name="signature" value="${e.return}"/>\n\t\t\t\t\t\t${c(k.to)}\n\t\t\t\t\t</use>\n\t\t\t\t`:`\n\t\t\t\t\t<use\t${h()}\n\t\t\t\t\t\txlink:href="#direct"\n\t\t\t\t\t\t${o()}\n\t\t\t\t\t\t${b()}\n\t\t\t\t\t\tfrom="${l(k.to)}"\n\t\t\t\t\t\tto="${l(k.from)}"\n\t\t\t\t\t\tclass="dashed"\n\t\t\t\t\t>\n\t\t\t\t\t\t<param name="signature" value="${e.return}"/>\n\t\t\t\t\t\t${c(k.to)}\n\t\t\t\t\t</use>\n\t\t\t\t`}if("state"in e)return`\n\t\t\t\t<use\t${h()}\n\t\t\t\t\txlink:href="#invariant"\n\t\t\t\t\t${o()}\n\t\t\t\t\t${b()}\n\t\t\t\t>\n\t\t\t\t\t<param name="on" value="${l(e.object)}"/>\n\t\t\t\t\t<param name="invariant" value="${e.state}"/>\n\t\t\t\t\t${c(e.object)}\n\t\t\t\t</use>\n\t\t\t`;if("after"in e)return`\n\t\t\t\t<use\t${h()}\n\t\t\t\t\txlink:href="#after"\n\t\t\t\t\t${o()}\n\t\t\t\t\t${b()}\n\t\t\t\t>\n\t\t\t\t\t<param name="on" value="${g.map(l)}"/>\n\t\t\t\t\t<param name="signature" value="after(${e.after})"/>\n\t\t\t\t\t${c(e.object)}\n\t\t\t\t</use>\n\t\t\t`;if("ref"in e){const A=f(t,e);return`\n\t\t\t\t<use\t${h()}\n\t\t\t\t\txlink:href="#fragment"\n\t\t\t\t\t${o()}\n\t\t\t\t\t${b()}\n\t\t\t\t>\n\t\t\t\t\t<param name="on" value="${A.map(l)}"/>\n\t\t\t\t\t<param name="label" value="ref"/>\n\t\t\t\t\t<param name="condition" value=" "/>\n\t\t\t\t</use>\n\t\t\t\t<use\tid="${p()}.text"\n\t\t\t\t\txlink:href="#textcompartment"\n\t\t\t\t\tparent="${p()}"\n\t\t\t\t>\n\t\t\t\t\t<param name="label" value="${e.ref}"/>\n\t\t\t\t</use>\n\t\t\t\t${(e.gates||[]).map(((e,n)=>{const r=t[e.accept],i=`event[${s}${e.accept}]`;_.delete(i);const a=r.target?`${r.target} = `:"";return`\n\t\t\t\t\t\t<use\t${h(`.gate.${n}`)}\n\t\t\t\t\t\t\txlink:href="#actualgate"\n\t\t\t\t\t\t\tcall="${i}"\n\t\t\t\t\t\t\tfragment="${p()}"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<param name="signature" value="${a}${r.call}(${r.arguments||[]})"/>\n\t\t\t\t\t\t</use>\n\t\t\t\t\t`})).join("\n")}\n\t\t\t`}if("alternatives"in e){const C=`${s}${n}.`;return`\n\t\t\t\t<use\t${h()}\n\t\t\t\t\txlink:href="#fragment"\n\t\t\t\t\t${o()}\n\t\t\t\t\t${b()}\n\t\t\t\t>\n\t\t\t\t\t<param name="on" value="${d(t,e).map(l)}"/>\n\t\t\t\t\t<param name="label" value="${e.type??"alt"}"/>\n\t\t\t\t\t<param name="condition" value=" "/>\n\t\t\t\t</use>\n\t\t\t\t${e.alternatives.map(((t,e)=>{const n=`${C}${e}`;return`\n\t\t\t\t\t\t<use\tid="${n}"\n\t\t\t\t\t\t\txlink:href="#compartment"\n\t\t\t\t\t\t\t${0==e?"":`after="${C}${e-1}"`}\n\t\t\t\t\t\t\tparent="${p()}"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<param name="condition" value="${t.condition}"/>\n\t\t\t\t\t\t</use>\n\t\t\t\t\t\t${t.altBody.map(((e,s)=>m(t.altBody,e,s,`${n}.`,n))).join("\n")}\n\t\t\t\t\t`})).join("\n")}\n\t\t\t`}if("loopBody"in e){const N=`${s}${n}.`;function j(){if("condition"in e)return`[${e.condition}]`;if(!("lower"in e))return"";if(e.lower!==e.upper)return`[between ${e.lower} and ${e.upper} times]`;switch(e.lower){case 1:return"[once]";case 2:return"[twice]";default:return`[${e.lower} times]`}}return`\n\t\t\t\t<use\t${h()}\n\t\t\t\t\txlink:href="#fragment"\n\t\t\t\t\t${o()}\n\t\t\t\t\t${b()}\n\t\t\t\t>\n\t\t\t\t\t<param name="on" value="${d(t,e).map(l)}"/>\n\t\t\t\t\t<param name="label" value="loop"/>\n\t\t\t\t\t<param name="condition" value="${j()}"/>\n\t\t\t\t\t${Object.values(a||{}).includes(n)?"<param name='color' value='blue'/>":""}\n\t\t\t\t</use>\n\t\t\t\t${e.loopBody.map(((t,n)=>m(e.loopBody,t,n,N,p()))).join("\n")}\n\t\t\t`}return console.log("Error: event of unknown type: ",e),""}const h=o.map((t=>t.name));let g=t.lifelines;g||(g=e.objects.map((t=>t.name)),g=(0,r.MR)(p(t.events),(t=>h.indexOf(t))));const _=new Map;let y,b=0;return(0,s.R)(`\n\t\t${g.map(((t,n)=>{var s;return`\n\t\t\t\t<use id="${l(t)}" xlink:href="#${null!==(s=e.getObject(t))&&void 0!==s&&s.isActor?"actor":"object"}" ${0==n?'x="100" y="0"':`after="${l(g[n-1])}"`}>\n\t\t\t\t\t<param name="name" value="${(0,i.vD)(e,t)}"/>\n\t\t\t\t</use>`})).join("\n")}\n\n\n\t\t${t.events.map(((e,n)=>m(t.events,e,n,"",""))).join("\n")}\n\t\t${[..._.entries()].map((([t,e])=>{const n=e.target?`${e.target} = `:"";return`\n\t\t\t\t<use\tid="unaccepted[${b++}]"\n\t\t\t\t\txlink:href="#unaccepted"\n\t\t\t\t\tafter="${b>1?`unaccepted[${b}]`:y}"\n\t\t\t\t\tcall="${t}"\n\t\t\t\t\trightmost="${l((0,r.Z$)(g))}"\n\t\t\t\t>\n\t\t\t\t\t<param name="signature" value="${n}${e.call}(${e.arguments||[]})"/>\n\t\t\t\t</use>\n\t\t\t`})).join("\n")}\n\t`,{origin:n,styleMode:c})}},7481:(t,e,n)=>{"use strict";n.d(e,{E2:()=>i,Pz:()=>a,TA:()=>r}),n(7582);const s=t=>String.raw`

	{

		const self = this;

		function stringParse(s) {
/*			// problem with JSON.parse: "\0" is not valid JSON, it should be "\u0000"
			return JSON.parse(s);
/*/
			return eval(s);
/**/
		}

		function binOp(left, right, leftName = "left", type = "binaryOpExp") {
			if(right.length > 0) {
				let ret = {[leftName]: left, type, ...right[0]};
				if(ret.type === "templateExp") {
					ret = {...ret, tag: ret.source};
				}
				for(const part of right.slice(1)) {
					if(part.type === "templateExp") {
						ret = {...part, tag: ret};
					} else {
						ret = {[leftName]: ret, type, ...part};
					}
				}
				return ret;
			} else {
				return left;
			}
		}

		function w(node) {
			return self.keepLocation
			?
				{...node, __location__: location()}
			:	node
			;
		}
	}

	${t}

	statement	=	_ e:(	expression:functionExp		{return {type: "expressionStat", expression};}
				/	expression:classExp		{return {type: "expressionStat", expression};}
				)					{return e;}
			/	_ labels:label* s:(
					ifStat
				/	blockStat
				/	forStat
				/	forOfStat
				/	forInStat
				/	whileStat
				/	switchStat
				/	tryStat
				)					{return {...s, labels};}
			/
				_ labels:label* stat:(
					doStat
				/	returnStat
				/	continueStat
				/	breakStat
				/	variableStat
				/	importStat
				/	expressionStat
				) _ ";"?	{return {...stat, labels};}
				/ _ ";"	{return {type: "emptyStat",}}

	label		=	l:ID _ ":" _ {return l;}

	breakStat	=	"break" !IDPART _sl name:(!("case" !IDPART) n:ID {return n;})?			{return {type: "breakStat", name};}

	continueStat	=	"continue" !IDPART _sl name:ID?			{return {type: "continueStat", name};}

	tryStat		=	"try" _
				tryBlock:blockStat
				cb:(_ "catch" varName:(_ "(" _ v:ID _ ")" {return v;})? _ catchBlock:blockStat {return {catchBlock, varName};})?
				finallyBlock:(_ "finally" _ b:blockStat {return b;})?
										{return w({type: "tryStat", tryBlock, ...cb, finallyBlock});}

	importStat	=
				"export" _ "default" !IDPART _
					value:expression
												{return {type: "defaultExportStat", value};}
			/	"export" _ "*" _ "from" _ from:STRING				{return {type: "exportAllStat", from};}
			/	kind:("import" / "export") !IDPART _
				!(("function" / "const" / "let" / "var" / "async" / "class") !IDPART)
				contents:(
					"{" _ names:names?  "}" {return {names};}
				/	"*" _ "as" _ as:ID {return {as};}
				/	!"default" defaultExport:ID {return {defaultExport};}
				) _ from:("from" _ f:STRING {return f;})?
										{return {type: "importStat", ...contents, from, kind};}

	switchStat	=	"switch" !IDPART _ "(" _ selector:expression _ ")" _ "{"
					clauses:clause*
				_ "}"
										{return {type: "switchStat", selector, clauses};}

	clause		=	_ "case" !IDPART _ value:expression _ ":" statements:(_ !("default" / "case") s:statement {return s;})*	{return {value, statements, isDefault: false};}
			/	_ "default" !IDPART _ ":" statements:(_ !("default" / "case") s:statement {return s;})* _		{return {statements, isDefault: true};}


	names 		=	head:name _ tail:("," _ name:name _ {return name;})* lastComma 		{return [head, ...tail];}

	name		=	name:ID as:(_ "as" _ as:ID {return as;})?	{return {name, as};}

	ifStat		=	_ "if" !IDPART _ "(" _ condition:expression _ ")" _
					_ thenStat:statement _
				elseStat:("else"
					_ elseStat:statement _ {return elseStat;})?
										{return w({type: "ifStat", condition, thenStat, elseStat});}

	doStat		=	_ "do" !IDPART _ statement:statement _ "while" _ "(" _ condition:expression _ ")"
										{return {type: "doStat", condition, statement};}

	whileStat	=	_ "while" !IDPART _ "(" _ condition:expression _ ")" _ statement:statement _	{return {type: "whileStat", condition, statement};}

	forOfStat	=	_ "for" !IDPART _ isAwait:"await"? _ "(" _ variable:(variableStat / name:ID) _ "of" _ expression:expression _ ")"
				statement:statement
										{return {type: "forOfStat", variable, expression, statement, isAwait: isAwait ? true : false};}
	forInStat	=	_ "for" !IDPART _ "(" _ variable:(variableStat / name:ID) _ "in" _ expression:expression _ ")"
					statement:statement
										{return {type: "forInStat", variable, expression, statement};}
	forStat		=	_ "for" !IDPART _ "(" _
					init:(variableStat / expression)? _
				";" _
					condition:expression? _
				";" _
					update:expression? _
				")" statement:statement				{return {type: "forStat", init, condition, update, statement};}

	variableStat	=	_ isExport:export _ type:("var" / "let" / "const") !IDPART _ head:variableDef _ tail:("," _ name:variableDef _ {return name;})*
										{return {type, variables: [head, ...tail], isExport};}

	returnStat	=	_ "return" !IDPART returnedValue:(_sl
						v:expression
					{return v;})?
										{return w({type: "returnStat", returnedValue});}

	variableDef	=	pattern:simplePattern _ init:("=" _ init:priority2 {return init;})?
										{return {pattern, init};}

	expressionStat	=	_ expression:expression _				{return w({type: "expressionStat", expression});}

	blockStat	=	_ "{" statements:statement* _ "}"				{return {type: "block", statements};}

	pattern		=	isSpread:"..."? pattern:simplePattern				{return {...pattern, isSpread: isSpread ? true : false};}

	simplePattern	=	name:ID		// TODO: should actually be any lvalue, not just an ID
					defaultValue:(_ "=" _ e:priority2 {return e;})?
											{return w({type: "namePat", name, defaultValue});}
			/	"[" _ elements:patterns? "]"				{return {type: "arrayPat", elements};}
			/	"{" _ elements:slotPatterns? "}"				{return {type: "objectPat", elements};}

	patterns	=	head:pattern? _ tail:("," _ pattern:pattern? _{return pattern;})* ","? _	{return [head, ...tail];}

	slotPatterns	=	head:slotPattern _ tail:("," _ p:slotPattern _{return p;})* ","? _	{return [head, ...tail];}

	slotPattern	=	isSpread:"..."? _ name:(ID / numberExp) _ newName:(":" _ n:simplePattern {return n;})? _ defaultValue:("=" _ v:priority2 {return v;})? 	{return w({type: "slotPat", name, newName, defaultValue, isSpread: isSpread ? "true" : false});}

	paramPatterns	=	head:paramPattern _ tail:("," _ p:paramPattern _ {return p;})* ","? _	{return [head, ...tail];}

	paramPattern	=	pattern:pattern _ defaultValue:("=" _ v:priority2 _ {return v;})? {return {type: "paramPat", pattern, defaultValue};}

	expression	=	exp:priority1						{return exp;}

	priority1	=	head:priority2 tail:(_ "," _ exp:priority2 {return exp;})*
										{if(tail.length) return {type: "expressionListExp", expressions: [head, ...tail]}; else return head;};

/*
	priority2	= op:("yield*" / "yield") _ expression:priority2	{return {type: "yieldExp", op, expression};}
			/ exp:priority3						{return exp;}
*/
	priority2	=
				priority3

	priority3	=
				op:("yield" _ "*" {return "yield*";}/ "yield" !IDPART {return "yield";}) _sl expression:priority3?	{return {type: "yieldExp", op, expression};}
			/	left:simplePattern _ op:"=" _ right:priority3	{return {type: "destructuringAssign", left, op, right};}
			/	left:priority4
				right:( _ op:("=" / "+=" / "-=" / "**=" / "*=" / "/=" / "%=" / "<<=" / ">>>=" / ">>=" / "&=" / "^=" / "|=" / "&&=" / "||=" / "??=") _ right:priority3 {return {op, right};})?
										{if(right) return {type: "assign", left, ...right}; else return left;}

	priority4	=	left:priority5 right:(_ "?" _ thenExp:priority2 _ ":" _ elseExp:priority2 {return {thenExp, elseExp};})?
										{if(right) return {type: "conditionalExp", condition: left, ...right}; else return left;}

	priority5	=	left:priority6 right:(_ op:"??" _ right:priority6 {return {op, right};})*
										{return binOp(left, right);}

	priority6	=	left:priority7 right:(_ op:"||" _ right:priority7 {return {op, right};})*
										{return binOp(left, right);}

	priority7	=	left:priority8 right:(_ op:"&&" _ right:priority8 {return {op, right};})*
										{return binOp(left, right);}

	priority8	=	left:priority9 right:(_ !("||") op:"|" _ right:priority9 {return {op, right};})*
										{return binOp(left, right);}

	priority9	=	left:priority10 right:(_ op:"^" _ right:priority10 {return {op, right};})*
										{return binOp(left, right);}

	priority10	=	left:priority11 right:(_ op:"&" _ right:priority11 {return {op, right};})*
										{return binOp(left, right);}

	priority11	=	left:priority12 right:(_ op:("===" / "==" / "!==" / "!=") _ right:priority12 {return {op, right};})*
										{return binOp(left, right);}

	priority12	=	left:priority13 right:(_ op:("<=" / "<" / ">=" / ">" / k:("instanceof" / "in") !IDPART {return k;}) _ right:priority13 {return {op, right};})*
										{return binOp(left, right);}

	priority13	=	left:priority14 right:(_ op:("<<" / ">>>" / ">>") _ right:priority14 {return {op, right};})*
										{return binOp(left, right);}

	priority14	=	left:priority15 right:(_ op:("+" !"+" {return "+"}/ "-" !"-" {return "-"}) _ right:priority15 {return {op, right};})*
										{return binOp(left, right);}

	priority15	=	left:priority16 right:(_ op:("*" !"*" {return "*";}/ "/" / "%") _ right:priority16 {return {op, right};})*
										{return binOp(left, right);}

	priority16	=	left:priority17 right:(_ op:"**" _ right:priority16 {return {op, right};})?
										{if(right) return binOp(left, [right]); else return left;}

	priority17	=	op:("!" / "~" / "++" / "--" / "+" / "-" /
					c:("typeof" / "void" / "delete" / "await") !IDPART {return c;}
				) _ expression:priority17
										{return {type: "prefixUnaryExp", op, expression};}
			/	exp:priority18					{return exp;}

	priority18	=	expression:priority19 op:(_sl op:"++" {return op;} / _sl op:"--" {return op;})?
										{if(op) return {type: "postfixUnaryExp", expression, op}; else return expression;}

	memberExpRight	=	r:memberAccessExp
			/	computedMemberAccessExp
			/	optionalChainingExp

	priority19	=	priority20
			/	"new" !IDPART _ expression:priority19
										{return {type: "newExp", expression};}

	newWithArgsExp	=	"new" !IDPART _ expression:memberExp _ args:functionCallExp
										{return {...args, type: "newWithArgsExp", expression};}

	memberExp	=	source:priority21 rest:memberExpRight*		{return binOp(source, rest, "source");}

	priority20	=
				source:(newWithArgsExp / priority21) rest:(
					(	memberExpRight
					/	r:functionCallExp
					/	TEMPLATE
					)*
				)
										{return binOp(source, rest, "source");}

	priority21	=
				isAsync:"async"? _ params:(
					"(" _ params:paramPatterns? ")" {return params ? params : [];}
				/	name:ID {return [{type: "paramPat", pattern: w({type: "namePat", name, isSpread: false, defaultValue: null}), defaultValue: null,}];}
				) _ "=>" _ body:(blockStat / priority2)		{return {type: "lambdaExp", params, body, isAsync: isAsync ? true : false};}
			/	"(" _ exp:expression _ ")"			{return exp;}
			/	exp:primaryExp					{return exp};

	functionExp	=
				isExport:export isAsync:("async" _)? "function" _ isGenerator:"*"? _ name:(n:ID _ {return n;})? "(" _ params:paramPatterns? ")" _ body:blockStat	{return w({type: "functionExp", name, params: params, body, isExport, isAsync: isAsync ? true : false, isGenerator: isGenerator ? true : false});}

	classExp	=
				isExport:export "class" _ name:(!"extends" n:ID {return n;})? _ superClass:("extends" _ n:expression _ {return n;})? "{" _ members:(classMember / ";" _ )* "}"	{return {type: "classExp", name, superClass, members: members?.filter(e => e[0]!==";"), isExport};}

	primaryExp	=	a:numberExp						{return a;}
			/	stringExp
			/	TEMPLATE
			/	"this" !IDPART						{return w({type: "thisExp"});}
			/	"true" !IDPART						{return {type: "booleanExp", value: true};}
			/	"false"	!IDPART						{return {type: "booleanExp", value: false};}
			/	"throw" !IDPART _ value:expression				{return {type: "throwExp", value};}
			/	classExp
			/	functionExp
			/	!("new" !IDPART) a:variableExp						{return a;}
			/	arrayExp
			/	objectExp
			/	regex:REGEX						{return {type: "regexExp", regex};}

	export		=	e:("export" _ d:"default"? _ {return {isDefault: d ? true : false};})? {return e ? e : false;}

	classMember	=	isStatic:"static"? _ kind:("get" !(IDPART / _ "(")/ "set" !(IDPART / _ "(")/ "async" !IDPART)? _ isGenerator:"*"? _ name:slotName _ "(" _ params:paramPatterns? ")" _ body:blockStat _	{kind = kind?.[0]; return {type: "method", kind, name, params, body, isStatic: isStatic ? true : false, isGenerator: isGenerator ? true : false};}
			/	isStatic:"static"? _ name:ID _ defaultValue:("=" _ v:expression {return v;})? _ ";"? _		{return {type: "field", name, isStatic: isStatic ? true : false, defaultValue};}

	numberExp	=	sign:"-"? "0" ("x" / "X") digits:[0-9a-fA-F]+			{return w({type: "numberExp", value: parseInt(digits.join(""), 16)});}
			/	"0" ("b" / "B") d:[0-1_]+						{return w({type: "numberExp", value: parseInt(d.filter(e => e !== "_").join(""), 2)});}
			/	"0" ("o" / "O")  d:[0-7]+						{return w({type: "numberExp", value: parseInt(d.join(""), 8)});}
			/	"0" d:[0-7]+						{return w({type: "numberExp", value: parseInt(d.join(""), 8)});}	// legacy octal
			/	sign:"-"? num:[0-9]+ dec:("." dec:[0-9]* {return dec;})? e:(("e" / "E") esign:("-"/"+")? d:[0-9]+ {return [...esign ? [esign] : [], ...d]})?
										{return w({type: "numberExp", value: parseFloat(num.join("") + "." + ([...dec ?? [], 0]).join("") + (e ? "e" + e.join("") : "")) * (sign === "-" ? -1 : 1)});}
			/	sign:"-"? "." dec:[0-9]+				{return {type: "numberExp", value: JSON.parse(("0." + dec.join("")) * (sign === "-" ? -1 : 1))};}

	stringExp	=	value:STRING						{return {type: "stringExp", ...value};}
	memberAccessExp	=	_ "." _ propertyName:ID				{return w({type: "memberAccessExp", propertyName});}
	computedMemberAccessExp	=
				_ "[" _ propertyName:expression _ "]"		{return {type: "computedMemberAccessExp", propertyName};}
	variableExp	=	name:ID !{name==="function"}							{return w({type: "variableExp", name});}
	functionCallExp =	_ "(" _ args:args?
				  ")"						{return w({type: "functionCallExp", args: args ? args : []});}
	args		=	head:arg _ tail:("," _ arg:arg _ {return arg;})* lastComma	{return [head, ...tail];}
	arg		=	isSpread:"..."? _ expression:priority2			{return isSpread ? {type: "spreadExp", expression} : expression;}
	optionalChainingExp	=
				_ "?." _ propertyName:ID			{return {type: "optionalMemberAccessExp", propertyName};}
			/	_ "?." f:functionCallExp			{return {...f, type: "optionalFunctionCallExp"};}
			/	_ "?." c:computedMemberAccessExp		{return {...c, type: "optionalComputedMemberAccessExp"};}
	arrayExp	=	"[" _ elements:(h:arrayElement? _ t:("," _ e:arrayElement? _ {return e;})* lastComma {return [h, ...t];})? "]"	{return {type: "arrayExp", elements};}

	arrayElement	=	isSpread:"..."? e:priority2	{return {...e, isSpread: isSpread ? true : false};}

	objectExp	=	"{" _ slots:(head:slot _ tail:("," _ slot:slot _ {return slot;})* lastComma {return [head, ...tail];})? "}"
										{return w({type: "objectExp", slots});}

	slot		=	key:slotName _ ":" _ value:priority2				{return {type: "keyValueSlot", key, value};}
			/	kind:("get" !IDPART/ "set" !IDPART/ "async" !IDPART)? _ isGenerator:"*"? _ key:slotName? _ "(" _ params:paramPatterns? ")" _ body:blockStat
										{kind = kind?.[0]; if(kind && !key) {key = {type: "identKey", name: kind}; kind = undefined;} return {type: "functionSlot", kind, key, params, body, isGenerator: isGenerator ? true : false};}
			/	"..." expression:priority2					{return {type: "spreadSlot", expression};}
			/	key:ID							{return {type: "varSlot", key};}

	slotName	= 	name:ID							{return w({type: "identKey", name});}
			/	n:numberExp						{return {type: "numberKey", name: n};}
			//	n:[0-9]+						{return {type: "intKey", name: n.join("")};}
			/	name:STRING						{return w({type: "stringKey", ...name});}
			/	"[" _ expression:expression _ "]"			{return {type: "exprKey", expression};}

	lastComma	=	("," _)?

	IDSTART		=	a:. &{return a.match(/[\p{ID_Start}_$]/u)}			{return a;}
				//[A-Za-z_À-ÖØ-öø-ÿśćę$ॐ]
	IDPART		=	a:. &{return a.match(/[\p{ID_Continue}_$\u200C\u200D]/u)}		{return a;}
				//IDSTART / [0-9]
	ID		=	h:IDSTART t:IDPART*				{return h + t.join("");}
	STRING		=	'"' v:([^"\\] / "\\" a:. {return "\\" + a;})* '"'		{return {value: stringParse('"' + v.join("") + '"'), kind: '"'};}
			/	"'" v:([^'\\] / "\\" a:. {return "\\" + a;})* "'"		{return {value: stringParse('"' + v.map(e => e === '"' ? '\\"' : e).join("") + '"'), kind: "'"};}

	TEMPLATE	=	`+'"`"\tv:(\n\t\t\t\t\t\t\ts:(\n\t\t\t\t\t\t\t\ts:[^`\\\\$]+\t{return s.join("");}\n\t\t\t\t\t\t\t/\t"\\\\" a:. {return "\\\\" + a;}\n\t\t\t\t\t\t\t)+\t{return s.join("");}\n\t\t\t\t\t\t/\t"$" "{" _ expression:expression _  "}"\t{return expression;}\n\t\t\t\t\t\t/\t"$"\t\t\t\t\t{return "$";}\t// TODO: this will not work because we will not have an alternance of strings & expressions\n\t\t\t\t\t\t)* "`"'+String.raw`		{return {type: "templateExp", value: v};}


	NL		=	_ COMMENT? "\r"? "\n"
	BLANK		=	[ \t\r\n] / COMMENT
	// same line blanks
	_sl		=	(SINGLE_LINE_COMMENT / SINGLE_MULTI_LINE_COMMENT / [ \t])*
	_		=	BLANK*
	__		=	BLANK+
	SINGLE_LINE_COMMENT	=	"//" REST
	MULTI_LINE_COMMENT	=	"/*" ([^*] / !("*/") "*")* "*/"
	SINGLE_MULTI_LINE_COMMENT	=	"/*" ([^*\n] / !("*/") "*")* "*/"
	COMMENT		=	SINGLE_LINE_COMMENT
			/	MULTI_LINE_COMMENT
	REST		=	s:[^\n]*								{return s.join("");}
	REGEX		=	"/" c:([^/\\[] / "\\" a:. {return "\\" + a;} / "[" c:([^\\\]] / "\\" a:. {return "\\" + a;})* "]" {return "[" + c.join("") + "]";})* "/" mod:[dgimsuy]*				{return "/" + c.join("") + "/" + mod.join("");}
`,r=peg.generate(String.raw`
	${s("\n\t\tstart\t=\te:expression _\t\t{return e;}\n\t")}
`,{trace:!1}),i=peg.generate(String.raw`
	${s("\n\t\tstart\t=\tstats:statement* _\t{return stats;}\n\t")}
`,{trace:!1});function a(t,e=!1){function n(t,e){return t.startsWith("return")?t+";":t.match(/(?:;|})[ \t\n\r]*$/)&&!t.match(/^(?:const|var|let)/)?t:t+";"}if(t instanceof Array)return t.map((t=>n(a(t)))).join("\n");function s(t){return`(${t})`}function r(t){var e;switch(t.type){case"namePat":return`${t.isSpread?"...":""}${t.name}${t.defaultValue?"="+a(t.defaultValue):""}`;case"slotPat":return`${t.isSpread?"...":""}${"string"==typeof t.name?t.name:t.name.value}${t.newName?":"+r(t.newName):""}${t.defaultValue?"="+a(t.defaultValue):""}`;case"paramPat":return`${t.isSpread?"...":""}${r(t.pattern)}${t.defaultValue?"="+a(t.defaultValue):""}`;case"objectPat":return`{${(null===(e=t.elements)||void 0===e?void 0:e.map(r))??""}}`;case"arrayPat":return`[${t.elements.map((t=>t?r(t):""))}]`;default:throw`Unsupported pattern type: ${t.type} for ${JSON.stringify(t)}`}}function i(t){return t?a(t):""}function o(t){return t.labels?t.labels.map((t=>t+":")).join(""):""}function c(t,e="export ",n=""){return t.isExport?e+(e&&t.isExport.isDefault?"default ":""):n}function l(t){const e=JSON.stringify(t.value);return"'"===t.kind?e.replace(/'/g,"\\'").replace(/^"/,"'").replace(/"$/,"'"):e}switch(String(t.type)){case"templateExp":return(t.tag?a(t.tag):"")+"`"+t.value.map((t=>"string"==typeof t?t:"${"+a(t)+"}")).join("")+"`";case"expressionStat":return`${a(t.expression,!0)}`;case"breakStat":return"break"+(t.name?` ${t.name}`:"");case"continueStat":return"continue"+(t.name?` ${t.name}`:"");case"tryStat":return`\n\t\t\t\t${o(t)}try\n\t\t\t\t\t${a(t.tryBlock)}\n\t\t\t\t${t.catchBlock?`catch${t.varName?`(${t.varName})`:""} ${a(t.catchBlock)}`:""}\n\t\t\t\t${t.finallyBlock?`finally ${a(t.finallyBlock)}`:""}\n\t\t\t`;case"ifStat":return`${o(t)}if(${a(t.condition)}) ${n(a(t.thenStat))}${t.elseStat?` else ${a(t.elseStat)}`:""}`;case"doStat":return`${o(t)}do ${n(a(t.statement))} while(${a(t.condition)})`;case"whileStat":return`${o(t)}while(${a(t.condition)})${a(t.statement)}`;case"forOfStat":return`${o(t)}for${t.isAwait?" await":""}(${"string"==typeof t.variable?t.variable:a(t.variable)} of ${a(t.expression)}) ${a(t.statement)}`;case"forInStat":return`${o(t)}for(${"string"==typeof t.variable?t.variable:a(t.variable)} in ${a(t.expression)}) ${a(t.statement)}`;case"forStat":return`${o(t)}for(${i(t.init)} ; ${i(t.condition)} ; ${i(t.update)} ) ${a(t.statement)}`;case"returnStat":return"return"+(t.returnedValue?` ${a(t.returnedValue)}`:"");case"defaultExportStat":return`export default ${a(t.value)}`;case"exportAllStat":return`export * from ${l(t.from)}`;case"importStat":return t.as?`${t.kind} * as ${t.as} from ${l(t.from)}`:t.defaultExport?`${t.kind} ${t.defaultExport} from ${l(t.from)}`:`${t.kind} {${(null===(u=t.names)||void 0===u?void 0:u.map((t=>`${t.name}${t.as?" as "+t.as:""}`)))??""}}${t.from?` from ${l(t.from)}`:""}`;var u;case"switchStat":return`${o(t)}switch(${a(t.selector)}) {\n\t\t\t\t${(t.clauses??[]).map((t=>t.isDefault?`\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t${a(t.statements)}\n\t\t\t\t\t`:`\n\t\t\t\t\t\tcase ${a(t.value)}:\n\t\t\t\t\t\t\t${a(t.statements)}\n\t\t\t\t\t`)).join("")}\n\t\t\t}`;case"emptyStat":return";";case"block":return`${o(t)}{\n\t\t\t\t${a(t.statements)}\n\t\t\t}`;case"let":case"const":case"var":return`${c(t)}${t.type} ${t.variables.map((t=>`${r(t.pattern)}${t.init?` = ${a(t.init)}`:""}`)).join(", ")}`;case"functionCallExp":return`${a("left"in t?t.left:t.source)}(${(t.args??[]).map(a).join(", ")})`;case"optionalFunctionCallExp":return`${a("left"in t?t.left:t.source)}?.(${(t.args??[]).map(a).join(", ")})`;case"thisExp":return"this";case"throwExp":return`throw ${a(t.value)}`;case"variableExp":return`${t.name}`;case"conditionalExp":return s(`${a(t.condition)} ? ${a(t.thenExp)} : ${a(t.elseExp)}`);case"numberExp":return`(${t.value})`;case"memberAccessExp":return`${a(t.source)}.${t.propertyName}`;case"optionalMemberAccessExp":return`${a(t.source)}?.${t.propertyName}`;case"computedMemberAccessExp":return`${a(t.source??t.left)}[${a(t.propertyName)}]`;case"optionalComputedMemberAccessExp":return`${a(t.source??t.left)}?.[${a(t.propertyName)}]`;case"postfixUnaryExp":return s(`${a(t.expression)}${t.op}`);case"prefixUnaryExp":return s(`${t.op} ${a(t.expression)}`);case"newWithArgsExp":return`(new (${a(t.expression)})(${(t.args??[]).map(a).join(", ")}))`;case"newExp":return`(new (${a(t.expression)}))`;case"destructuringAssign":return s(`${r(t.left)} ${t.op} ${a(t.right)}`);case"binaryOpExp":case"assign":return s(`${a(t.left)} ${t.op} ${a(t.right)}`);case"expressionListExp":return"("+t.expressions.map(a).join(", ")+")";case"yieldExp":return`(${t.op} ${a(t.expression)})`;case"stringExp":case"stringKey":return l(t);case"booleanExp":return JSON.stringify(t.value);case"lambdaExp":return`(${t.isAsync?"async":""}(${t.params.map(r)}) => ${p=a(t.body),f="objectExp"===t.body.type,f?`(${p})`:p})`;case"functionExp":return`${c(t,void 0,e?"":"(")}${t.isAsync?"async ":""}function${t.isGenerator?"*":""}${t.name?" "+t.name:""}(${(t.params??[]).map(r)}) ${a(t.body)}${c(t,"",e?"":")")}`;case"arrayExp":return`[${(t.elements??[]).map((t=>t?`${t.isSpread?"...":""}${a(t)}`:"")).join(",")}]`;case"objectExp":return`({${(t.slots??[]).map(a).join(",")}})`;case"keyValueSlot":return`${a(t.key)}:${a(t.value)}`;case"functionSlot":return`${t.kind?t.kind+" ":""}${t.isGenerator?"*":""}${a(t.key)}(${(t.params??[]).map(r)}) ${a(t.body)}`;case"varSlot":return`${t.key}`;case"spreadSlot":case"spreadExp":return`...${a(t.expression)}`;case"identKey":return t.name;case"numberKey":return t.name.value+"";case"exprKey":return`[${a(t.expression)}]`;case"regexExp":return t.regex;case"classExp":return`${c(t)}class ${t.name??""} ${t.superClass?"extends "+a(t.superClass):""} {${t.members.map(a).join("")}}`;case"method":return`${t.isStatic?"static ":""}${t.kind?t.kind+" ":""}${t.isGenerator?"*":""}${a(t.name)}(${(t.params??[]).map(r)}) ${a(t.body)}`;case"field":return`${t.isStatic?"static ":""}${t.name}${t.defaultValue?`=${a(t.defaultValue)}`:""};`;default:throw`Unsupported JavaScript AST node: ${JSON.stringify(t)}`}var p,f}},7463:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{E:()=>makeTCSVGStatic});var fs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9317),svgdom__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6731),_TCSVGSequenceGenerator_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(1687),path__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1678),url__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(9976),svgdom_css__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(5403);const svgNS="http://www.w3.org/2000/svg",xlinkNS="http://www.w3.org/1999/xlink";let patchedSVGDOM=!1;function makeTCSVGStatic(svg,__dirname=".",settings){patchedSVGDOM||(patchSVGDOM(),patchedSVGDOM=!0);const styleRegexp=/<style>([^<]*)<\/style>/m;svg=svg.replace(styleRegexp,"\n\t\t\t<style>\n\t\t\t\t$1\n\t\t\t\t/*\n\t\t\t\t\tsvgdom defaults\n\t\t\t\t\t\tnot necessary for svgdom, but necessary for browsers or rsvg to render in the same way\n\t\t\t\t\t\tOpenSans can be install on debian-based distributions with\n\t\t\t\t\t\t\tsudo apt install fonts-open-sans\n\t\t\t\t*/\n\t\t\t\ttext {\n\t\t\t\t\tfont-family: OpenSans;\n\t\t\t\t\tfont-size: 16;\n\t\t\t\t}\n\t\t\t</style>\n\t\t");const style=svg.match(styleRegexp)[1];svg=svg.replace(styleRegexp,"\n\t\t\t<style>\n\t\t\t\t/* For browers, who do not know svgdom's default OpenSans font. */\n\t\t\t\t@font-face {\n\t\t\t\t\tfont-family: 'OpenSans';\n\t\t\t\t\tfont-style: normal;\n\t\t\t\t\tfont-weight: 400;\n\t\t\t\t\tsrc: url('https://fonts.gstatic.com/s/opensans/v28/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTS-muw.woff2') format('woff2');\n\t\t\t\t}\n\n\t\t\t\t$1\n\t\t\t</style>\n\t\t");const window=svgdom_css__WEBPACK_IMPORTED_MODULE_4__(style);patchSVGDOM(window);const setComputedStyle=window.setComputedStyle,document=window.document,root=document.createElement("g");document.appendChild(root);const getElementsByTagName=window.Document.prototype.getElementsByTagName;window.document.documentElement.constructor.prototype.getElementsByTagName=function(t){return"*"===t?this.querySelectorAll("*"):getElementsByTagName.call(this,t)},document.defaultView.location={href:""},document.defaultView.frameElement=document,globalThis.HTMLCollection={prototype:{}},globalThis.NamedNodeMap={prototype:{}},globalThis.NodeList={prototype:{}},globalThis.document=document,globalThis.window=globalThis,globalThis.ResizeObserver=function(){this.observe=function(){}},globalThis.CSS={escape:t=>t},root.innerHTML=svg;const roots=document.getElementsByTagName("svg");if(null!=settings&&settings.inlineStyles){setComputedStyle(roots[1].parentNode);const t=new RegExp("var\\(([^)]*)\\)","g");for(const e of roots[1].parentNode.querySelectorAll("*")){var _e$getAttribute;const n=null===(_e$getAttribute=e.getAttribute("style"))||void 0===_e$getAttribute?void 0:_e$getAttribute.replace(t,((t,n)=>window.getComputedStyle(e).getPropertyValue(n)));n&&e.setAttribute("style",n)}}for(const script of root.getElementsByTagName("script")){const href=script.getAttributeNS(xlinkNS,"href")||script.getAttribute("href");if(href){const t=href.replace(/^https?:\/\/[^\/]*\//,""),e=fs__WEBPACK_IMPORTED_MODULE_0__.readFileSync((0,path__WEBPACK_IMPORTED_MODULE_2__.resolve)(__dirname,t),"utf8");contextualEvalNoWith.call(globalThis,e)}else{const processed=script.innerHTML.replace(/function +([^(]*)\(/g,"globalThis.$1 = function $1(").replace(/var +([^ =]*) *=/g,"globalThis.$1 =").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&amp;/g,"&");eval(processed)}}function copy(t){roots[1].getAttribute(t)||roots[1].setAttribute(t,roots[0].getAttribute(t))}if(copy("viewBox"),copy("width"),copy("height"),null!=settings&&settings.removeDominantBaseline)for(const t of roots[1].parentNode.querySelectorAll("text")){const e="dominant-baseline",n="text-before-edge";window.getComputedStyle(t).getPropertyValue(e)===n&&(t.setAttribute("style",t.getAttribute("style").replace(new RegExp(`${e}: ${n};`),"")),t.setAttribute("y",1*window.getComputedStyle(t).getPropertyValue("font-size")+1*t.getAttribute("y")))}const ret=(0,_TCSVGSequenceGenerator_js__WEBPACK_IMPORTED_MODULE_5__.k)(roots[1].parentNode);return ret}function patchSVGDOM(t){function e(e,n,s){!function(t,e,n,s){n=n||e,Object.defineProperty(t,e,{get:function(){const t=this;return{get baseVal(){return t.getAttribute(n)||s},get value(){return t.getAttribute(n)||s}}},configurable:!0})}(t.Element.prototype,e,n,s)}t||(t=(0,svgdom__WEBPACK_IMPORTED_MODULE_1__.createSVGWindow)()),e("href","xlink:href"),e("xlink:href"),e("cx","cx",0),e("cy","cy",0);const n=Object.getOwnPropertyDescriptor(t.Element.prototype,"attributes"),s=n.get;n.get=function(){const t=s.call(this),e=this;return Object.defineProperty(t,"xlink:href",{get:function(){return{get value(){return e.getAttribute("xlink:href")}}},configurable:!0}),Object.defineProperty(t,"name",{get:function(){return{get value(){return e.getAttribute("name")}}},configurable:!0}),t},Object.defineProperty(t.Element.prototype,"attributes",{get:n.get,configurable:!0})}},921:(t,e,n)=>{"use strict";n.d(e,{H:()=>i});var s=n(9625),r=n(6171);class i{constructor(t,e){var n;const i=/after\(([^)]*)\)/,a=/when\(([^)]*)\)/;if(!(t=(0,r.F)(t)).objects){const e=t;t={name:e.name,objects:[t]},e.settings&&(t.settings=e.settings,delete e.settings),e.historyCauses&&(t.historyCauses=e.historyCauses,delete e.historyCauses)}Object.assign(this,t),Object.assign(this,{getObject(t){return this.objects.find((e=>e.name==t))},removeObject(e){(0,s.Od)(t.objects,e),t.connectors.filter((t=>t.ends.includes(e))).forEach((e=>{(0,s.Od)(t.connectors,e),delete t.connectorByName[e.name]}))},getObjectClass(e){var n;return e.class?null===(n=t.classes)||void 0===n?void 0:n[e.class]:void 0},getConnectors(t){var e;return(null===(e=this.connectors)||void 0===e?void 0:e.filter((e=>e.ends.includes(t))))||[]},getBehavior(t){return(0,s.Xq)(t.states)?t:this.getObjectClass(t)},getInitial(t){return this.isActive(t)?this.getBehavior(t).states.find((t=>"initial"==t.kind)):void 0},getState(t){var e=t.split("."),n=this.getObject(e[0]);return n=this.getBehavior(n),(e=e.slice(1)).forEach((t=>{n=n.stateByName[t]})),n},getTransition(t){var e,n=t.split("."),r=this.getObject(n[0]);return(n=n.slice(1)).slice(0,n.length-1).forEach((t=>{r=r.stateByName[t]})),(r=null===(e=r)||void 0===e?void 0:e.transitionByName[(0,s.Z$)(n).replace(/__DOT__/g,".")])||console.trace("Could not find transition: ",t),r},getRelativeName(t,e){const n=(this.connectors||[]).find((n=>n.ends.includes(t)&&n.ends.includes(e)));var s,r;return n?t==n.ends[0]?(null===(s=n.endNames)||void 0===s?void 0:s[1])||e.name:(null===(r=n.endNames)||void 0===r?void 0:r[0])||e.name:e.name},getObjectRelative(t,e){const n=(this.connectors||[]).filter((e=>e.ends.some((e=>e.name===t.name)))).map((n=>{const s=n.endNames||n.ends.map((t=>t.name));switch(n.ends.findIndex((e=>e.name===t.name))){case 0:if(e===s[1])return n.ends[1];break;case 1:if(e===s[0])return n.ends[0];break;default:return}})).filter((t=>t));return 1==n.length?n[0]:0==n.length?void 0:n},fullState(t){if(t.region){var e=this.fullState(t.region);return e.push(t),e}return[]},isAfter:t=>t.trigger&&t.trigger.match(i),noEventTrigger(t){return!t.trigger||this.isAfter(t)||t.trigger.match(a)},isActive(t){var e;return(0,s.Xq)(t.states)||(0,s.Xq)(null===(e=this.getObjectClass(t))||void 0===e?void 0:e.states)},isPort:t=>"Port"==t.type,stateFullName(t){return`${t.region?`${this.stateFullName(t.region)}.`:""}${t.name}`},transFullName(t){return`${this.stateFullName(t.region)}.${t.name.replace(/\./g,"__DOT__")}`},fullStateDisplay:t=>t?t.map((t=>t.name)).join("."):t,getOtherEnd:(t,e)=>t.ends.find((t=>t!=e)),getStateObject(t){for(var e=t.region;e.region;)e=e.region;return e},getTransObject(t){for(var e=t.region;e.region;)e=e.region;return e},navigateThroughPorts(t,e,n){const s=[],r=[],i=[];for(var a,o=t,c=e;this.isPort(c);){const t=this.getConnectors(c).find((t=>!t.ends.includes(o)));s.push(t),o=c,c=this.getOtherEnd(t,c),i.push(c),r.push(t.endNames?t.endNames[t.ends.indexOf(c)]:c.name),t.incomingTag&&t.ends[0]==c&&(a=t.incomingTag),t.outgoingTag&&t.ends[1]==c&&(a=t.outgoingTag),n&&console.log("Navigating from ",o.name," through ",t.name," to ",c.name)}return{target:c,tag:a,traversedConnectors:s,traversedProperties:r,traversedObjects:i}},setInitialState(t){var n;null==e||null===(n=e.onaddobject)||void 0===n||n.call(e,t)},get afterRegex(){return i},get whenRegex(){return a}}),null==e||null===(n=e.onload)||void 0===n||n.call(e,t)}}},4057:(t,e,n)=>{"use strict";n.d(e,{$m:()=>a,B8:()=>p,ES:()=>u,Le:()=>i,Sv:()=>c,Y3:()=>l,tD:()=>f,vD:()=>d,zE:()=>o});var s=n(9625),r=n(2392);function i(t){return t?t.replace(r.E,"$1"):t}function a(t){var e;return null===(e=t.match(r.E))||void 0===e?void 0:e[2].split(",").filter((t=>t))}function o(t){const e=[...t.transitions,...t.states.flatMap((t=>Object.values(t.internalTransitions??{})))];return(0,s.vM)(e.filter((t=>t.trigger)),(t=>i(t.trigger)))}function c(t){return(t.states??[]).flatMap((t=>[t,...c(t)]))}function l(t){return c(t).filter((t=>!t.kind))}function u(t){return[...t.transitions??[],...l(t).flatMap((t=>[...t.transitions??[],...Object.values(t.internalTransitions??{})]))]}function p(t){return t&&Object.fromEntries(function t(e){var n,s;return[...Object.entries((null==e?void 0:e.operationByName)??{}),...(null==e||null===(n=e.supertypes)||void 0===n?void 0:n.flatMap(t))??[],...(null==e||null===(s=e.interfaces)||void 0===s?void 0:s.flatMap(t))??[]].filter((([t,e])=>!e.isStatic))}(t))}function f(t){return t&&Object.fromEntries(function t(e){var n,s;return[...Object.entries((null==e?void 0:e.propertyByName)??{}),...(null==e||null===(n=e.supertypes)||void 0===n?void 0:n.flatMap(t))??[],...(null==e||null===(s=e.interfaces)||void 0===s?void 0:s.flatMap(t))??[]].filter((([t,e])=>!e.isStatic))}(t))}function d(t,e){const n=t.getObject(e);var s;return null==n||!n.isActor||(null==n?void 0:n.class)!==e&&null!=n&&n.class?`${e} : ${(null===(s=t.getObject(e))||void 0===s?void 0:s.class)||""}`:e}},3042:(t,e,n)=>{"use strict";n.d(e,{K:()=>a});const s={async create(t,e){const n=[];let s=!1;new Array(t).fill().forEach((async(t,r)=>{if(!s){const t=await e();var i;s||!t?null==t||null===(i=t.close)||void 0===i||i.call(t):(n.push({index:r,resource:t}),u())}}));let r=0;const i=[],a=[];let o=0,c=0,l=0;function u(){if(s)return;i.length>o&&(o=i.length),a.length>c&&(c=a.length);const t=i.length+a.length;if(t>l&&(l=t),0==n.length||0==t)return;const e=n.pop(),{index:r,resource:p}=e,{index:f,task:d,orig:m}=a.pop()??i.pop();d(p).then((()=>{n.push(e);try{u()}catch(t){console.error(t)}})).catch(console.error),u()}return{work:async(t,e)=>new Promise(((n,s)=>{(e?a:i).push({index:r++,async task(e){try{n(await t(e))}catch(t){console.log(t)}},orig:t,reject:s,resolve:n});try{u()}catch(t){console.error(t)}})),close(){s=!0,i.length+a.length>0&&console.log("Resource pool still has",i.length+a.length,"queued tasks (",i.length,"non urgent, and",a.length,"urgent)"),i.forEach((t=>t.resolve())),a.forEach((t=>t.resolve())),console.log("Resource pool had",l,"queued tasks at maximum (",o,"non urgent, and",c,"urgent)")}}}},r={async create(t,e){const n=await s.create(t,e);let r=!1;return{reset:async()=>await n.work((async t=>{if(await t.reset(),!r)return await t.getConfiguration()}),!0),getFireables:async t=>await n.work((async e=>{if(await e.setConfiguration(t),!r)return await e.getFireables()}),!0),fire:async(t,e)=>await n.work((async n=>{if(await n.setConfiguration(t),!r&&(await n.fire(e),!r))return await n.getConfiguration()}),!1),parseTransition:async t=>await n.work((async e=>await e.parseTransition(t)),!0),parseConfiguration:async t=>await n.work((async e=>await e.parseConfiguration(t)),!0),close(){r=!0,n.close()},get closed(){return r}}}};var i=n(7330);async function a(t,e,n,{onfired:s,poolSize:a=4,useHash:o={name:"SHA-256"}}={}){let c,l=0,u=0,p=0,f={},d=!1,m=!1;const h=await r.create(a,t),g=await h.reset();function _(t){e&&e(l,u,p,t)}try{await async function t(e,r,a,g=0){r&&s&&s(await h.parseTransition(a),e);let y=await(0,i.w)(e,h,!o);if(f[y]);else{f[y]={from:r,transition:a};let s=await h.getFireables(e);if(!s)return!0;if(0==s.length&&p++,f[y].fireables=s,l++,u+=s.length,_(g),n){const t=await n(e,l,g);var b,v;if(t)return m=!0,null!==(b=t.includes)&&void 0!==b&&b.call(t,"memorize")&&(c=e),null!==(v=t.includes)&&void 0!==v&&v.call(t,"allBranches")&&(d=!0,h.close()),!0}if((await Promise.all(s.map((async n=>{const s=await h.fire(e,n);return d||await t(s,e,n,g+1)})))).reduce(((t,e)=>t||e),!1))return!0}return!1}(g)}catch(t){if("closed"!==t)throw t}return _(),h.closed||h.close(),{nbConfigurations:l,nbTransitions:u,nbDeadlocks:p,stoppingConditionReached:m,configs:f,stoppingConfig:c}}},4985:(t,e,n)=>{"use strict";function s(t,e,n){var s=(3&t)<<4|e>>4,i=(15&e)<<2|n>>6,a=63&n,o="";return o+=r(63&t>>2),o+=r(63&s),(o+=r(63&i))+r(63&a)}function r(t){return t<10?String.fromCharCode(48+t):(t-=10)<26?String.fromCharCode(65+t):(t-=26)<26?String.fromCharCode(97+t):0==(t-=26)?"-":1==t?"_":"?"}function i(t,e){return t+"svg/"+function(t){for(var e="",n=0;n<t.length;n+=3)n+2==t.length?e+=s(t.charCodeAt(n),t.charCodeAt(n+1),0):n+1==t.length?e+=s(t.charCodeAt(n),0,0):e+=s(t.charCodeAt(n),t.charCodeAt(n+1),t.charCodeAt(n+2));return e}(pako.deflateRaw(e,{level:9,to:"string"}))}n.d(e,{K:()=>i}),n(5125)},5012:(t,e,n)=>{"use strict";n.d(e,{d:()=>l});var s=n(3416),r=n(7275),i=n(4733),a=n(9625),o=n(8263);function c(t,e,n="",s){try{return t.humanLocation=n,null!=s&&s.warnings&&(t.warnings=s.warnings),t.parse(e+"\n",{...s})}catch(r){function i(t){return null!=s&&s.noHTMLEsc?t:t.replace(/</g,"&lt;")}if("peg$SyntaxError"===r.constructor.name&&r.location){const a=r.location.start,o=r.location.end;o.offset==a.offset&&(o.offset==e.length?a.offset--:o.offset++);const c=`${i(e.slice(0,a.offset))}<span class="syntaxError" title="${r.message.replace(/"/g,"&quot;")}">${i(e.slice(a.offset,o.offset))}</span>${i(e.slice(o.offset))}`;if(globalThis.stateFigo)globalThis.stateFigo.innerHTML=`\n\t\t\t\t\t\t<style>\n\t\t\t\t\t\t\t.syntaxError {\n\t\t\t\t\t\t\t\tcolor: white;\n\t\t\t\t\t\t\t\tbackground-color: red;\n\t\t\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t\t\t\ttext-decoration-line: underline;\n\t\t\t\t\t\t\t\ttext-decoration-style: wavy;\n\t\t\t\t\t\t\t\ttext-decoration-color: red;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tpre {\n\t\t\t\t\t\t\t\tcounter-reset: line;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcode {\n\t\t\t\t\t\t\t\tcounter-increment: line;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcode:before {\n\t\t\t\t\t\t\t\tcontent: counter(line);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t</style>\n\t\t\t\t\t\t<blockquote>\n\t\t\t\t\t\tThere is a syntax error in the following code block${n?` (${n})`:""}:\n\t\t\t\t\t\t<pre>${c.replace(/^/gm,(()=>"<code></code>"))}</pre>\n\t\t\t\t\t\tline ${r.location.start.line}, column ${r.location.start.column}: ${r.message}\n\t\t\t\t\t\t</blockquote>\n\t\t\t\t\t`,globalThis.stateFigo.data="";else{const l=8,u="  ",p=l-u.length;function f(t,e){return[...t.slice(0,e)].map((t=>"\t"===t?l:1)).reduce(((t,e)=>t+e))}const d=2,m=Math.min(d,a.line),h=2,g=o.line-a.line+1;console.log(e.split(/\r?\n/).slice(a.line-1-m,o.line+h).flatMap(((t,e)=>{const n=(a.line+e-m+"").padStart(p," ")+u;if(e>=m&&e<m+g){const s=(e===m?f(t,a.column):0)+n.length,r=1;return[n+t,"".padStart(r,"^").padStart(s+r-1," ")]}return n+t})).join("\n")),console.log(`\nerror:${n?" ":""}${n} line ${a.line}, column ${a.column}: ${r.message}`)}}throw r}}async function l(t,e,n){if("string"==typeof t.classes){let s=t.classes;s.match(/^#/)&&(s=await e(s));const r=c(i.E2,s,"classes",n);t.classes=r}function l(t){if(t.behavior){const e=c(r.E,t.behavior,`behavior of object ${t.name}`,n);t.stateByName=e.stateByName,t.transitionByName=e.transitionByName,t.behavior=void 0}}function u(t){if(t.features){const e=c(i.i$,t.features,`features of object ${t.name}`,n);t.operationByName=e.operationByName,t.propertyByName=e.propertyByName,t.features=void 0}}if(await(0,a.Ic)(t.interactions,(async(r,i)=>{const a=`interaction ${r}`;if("string"==typeof i){const e=c(s.E2,i,a,n);t.interactions[r]=e}else i.loadFrom&&(await e(i.loadFrom).then((t=>{const e=c(s.E2,t,a,n);i.lifelines=e.lifelines,i.events=e.events})),i.loadFrom=void 0);!function(t,e){function n(n,s){var r;null!==(r=t.lifelines)&&void 0!==r&&r.includes(s)||console.log(`${e}: warning: participant ${s} not found`)}(0,o.vs)(t.events,{[o.Tk](t,e){t.type??(t.type=(0,s.x6)(t)),e(t)}}),(0,o.vs)(t.events,{autoAcceptCall(t,e){n(0,t.from),n(0,t.to)},call(t,e){n(0,t.from),n(0,t.to)},found(t,e){n(0,t.to)}})}(t.interactions[r],a)})),t.objects)for(const e of t.objects)l(e),u(e);else l(t),u(t);if(t.classes)for(const e of Object.values(t.classes))l(e)}},6746:(t,e,n)=>{"use strict";n.d(e,{U:()=>r,b:()=>s});class s{constructor(t){var e,n=new Promise(((n,s)=>{var r=new WebSocket(t);r.onopen=()=>n(r),r.onmessage=t=>{e&&e(t.data),e=void 0}}));this.askCommands=async()=>new Promise((async(t,n)=>{e=t,this.sendCommand("ASK_COMMANDS")})).then(JSON.parse),this.sendCommand=async(...t)=>{const e=JSON.stringify(t);(await n).send(e)},this.close=async()=>{(await n).close()}}}class r{constructor(t,e){var n=new WebSocket(t);const s=[];function r(t){n.send(t)}async function i(){return new Promise(((t,e)=>{s.push(t)}))}this.close=()=>{n.close()},n.onerror=function(t){console.log("WebSocket Error: %s",t)},n.onclose=function(){var t;null==e||null===(t=e.onclose)||void 0===t||t.call(e)};var a=Promise.resolve();n.onmessage=t=>{(function(){const n=s.shift();if(n)n(t.data);else{var o=t.data.split(":"),c=o[0],l=o.slice(1).join(":");switch(String(c)){case"RESET":this.engine.reset();break;case"GET_CONFIGURATION":a=a.then((async()=>{const t=await this.engine.getConfiguration();await r(t),null!=e&&e.ongetconfig&&await e.ongetconfig(t)}));break;case"PARSE_CONFIGURATION":{const t=i();a=a.then((async()=>{r(await this.engine.parseConfiguration(await t))}));break}case"GET_FIREABLES":a=a.then((async()=>{const t=await this.engine.getFireables();r(""+t.length);for(const e of t)r(e)}));break;case"PARSE_TRANSITION":{const t=i();a=a.then((async()=>{r(await this.engine.parseTransition(await t))}));break}case"FIRE":{const t=i();a=a.then((async()=>{await this.engine.fire(await t),null!=e&&e.onfired&&await e.onfired(await t)}));break}case"SET_CONFIGURATION":{const t=i();a=a.then((async()=>{await this.engine.setConfiguration(await t)}));break}case"EVALUATE_ATOMS":a=a.then((()=>Promise.all(l.split(";").map((async t=>{try{return await this.engine.evaluateAtom(t.replace(/\\\|/g,"|"))}catch(t){return!1}}))))).then((t=>r(JSON.stringify(t))));break;case"UUID":var u;null==e||null===(u=e.onuuid)||void 0===u||u.call(e,l);break;case"RESULTS":var p;null==e||null===(p=e.onresults)||void 0===p||p.call(e,t.data);break;case"PROGRESS":var f;null==e||null===(f=e.onprogress)||void 0===f||f.call(e,t.data);break;default:console.log("Unsupported request from server: %s",t.data)}}}).bind(this)()}}setEngine(t){this.engine=t}}},1687:(t,e,n)=>{"use strict";n.d(e,{R:()=>r,k:()=>i});var s=n(9416);function r(t,{origin:e,scale:n,hideLinks:r,styleMode:i}){return n=n/1.7||10,s.W`
		<svg xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" xmlns:c="http://myconstraints">
			<style>
				${"dark"===i?"svg {\n\t\t\t\t\t\t--main-fill: #070707;\n\t\t\t\t\t\t--note-fill: #131313;\n\t\t\t\t\t\t--main-stroke: #C7C7C7;\n\t\t\t\t\t\t--text-fill: #FFFFFF;\n\t\t\t\t\t\t--fragment-stroke: #FFFFFF;\n\t\t\t\t\t\t--polygon-fill: #111111;\n\t\t\t\t\t\t--background: #121212;\n\t\t\t\t\t}":"svg {\n\t\t\t\t\t\t--main-fill: #FEFECE;\n\t\t\t\t\t\t--note-fill: #FBFB77;\n\t\t\t\t\t\t--main-stroke: #A80036;\n\t\t\t\t\t\t--text-fill: #000000;\n\t\t\t\t\t\t--fragment-stroke: #000000;\n\t\t\t\t\t\t--polygon-fill: #EEEEEE;\n\t\t\t\t\t\t--background: #FFFFFF;\n\t\t\t\t\t}"}
				.participant {
					fill: var(--main-fill);
					stroke: var(--main-stroke);
					stroke-width: 1.5;
				}
				.participantName {
					stroke-width: 0;
				}
				.actor {
					fill: var(--main-fill);
					stroke: var(--main-stroke);
					stroke-width: 2;
				}
				.invariant {
					stroke: var(--main-stroke);
					fill: var(--note-fill);
				}
				.note {
					stroke: var(--main-stroke);
					fill: var(--note-fill);
				}
				.note polygon {
					fill: none;
				}
				.lifeline {
					stroke: var(--main-stroke);
					stroke-width: 1.0;
				}
				.messagePart {
					stroke: var(--main-stroke);
					stroke-width: 1.0;
				}
				.messageArrow {
					stroke: var(--main-stroke);
					stroke-width: 1.0;
					marker-end: url(#arrowHead);
				}
				.messageArrowHead {
					fill: var(--main-stroke);
					stroke: var(--main-stroke);
					stroke-width: 1.0;
				}
				.circle {
					stroke: var(--main-stroke);
				}
				.found circle {
					fill: none;
				}
				.set rect {
					fill: none;
				}
				.fragment rect {
					stroke: var(--fragment-stroke);
					stroke-width: 2.0;
					fill: none;
				}
				.fragment polygon {
					fill: var(--polygon-fill);
					stroke: var(--fragment-stroke);
					stroke-width: 1.0;
				}
				text {
					fill: var(--text-fill);
				}
				.fragment text, .compartment text {
					font-weight: bold;
				}
				.compartment line {
					stroke: black;
					stroke-dasharray: 2.0,2.0;
				}
				${r?"":s.W`
					a[*|href] > text {
					fill: blue; text-decoration: underline;
				}`}
				.dashed {
					stroke-dasharray: 2.0,2.0;
				}
				#horizontalWhiteStripes * {
					stroke: var(--background)!important;
				}
			</style>
			${'\n\t<script>\n\t\t\n\t\tvar OCLLibrary = {\n\t\t    __asArray(x) {\n\t\t        if (Array.isArray(x)) {\n\t\t            return x;\n\t\t        }\n\t\t        else {\n\t\t            return [x];\n\t\t        }\n\t\t    },\n\t\t\n\t\t    size(collection) {\n\t\t        return this.__asArray(collection).length;\n\t\t    },\n\t\t\n\t\t    notEmpty(collection) {\n\t\t        return this.size(collection) != 0;\n\t\t    },\n\t\t\n\t\t    empty(collection) {\n\t\t        return this.size(collection) == 0;\n\t\t    },\n\t\t\n\t\t    union(lhs, rhs) {\n\t\t        return lhs.concat(rhs);\n\t\t    },\n\t\t\n\t\t    at(collection, idx) {\n\t\t        return this.__asArray(collection)[idx - 1];\n\t\t    },\n\t\t\n\t\t    subSequence(collection, start, end) {\n\t\t        return this.__asArray(collection).slice(start - 1, end);\n\t\t    },\n\t\t\n\t\t    sum(collection) {\n\t\t        return this.__asArray(collection).reduce((acc, val) => acc + val);\n\t\t    },\n\t\t\n\t\t    iterate(collection, seed, lambda) {\n\t\t        return this.__asArray(collection).reduce(lambda, seed);\n\t\t    },\n\t\t\n\t\t    collect(collection, lambda) {\n\t\t        return this.__asArray(collection).map(lambda);\n\t\t    },\n\t\t\n\t\t    zipWith(left, right, lambda) {\n\t\t\tconst length = Math.min(left.length, right.length);\n\t\t        return left.slice(0, length).map((v, idx) => lambda(v, right[idx]));\n\t\t    },\n\t\t\n\t\t    prepend(collection, element) {\n\t\t        return [element].concat(collection);\n\t\t    },\n\t\t\n\t\t    includes(collection, element) {\n\t\t        return this.__asArray(collection).includes(element);\n\t\t    },\n\t\t\n\t\t    oclIsUndefined(val) {\n\t\t        return val ? false : true;\n\t\t    },\n\t\t\n\t\t    oclType(val) {\n\t\t        //TODO implement oclType\n\t\t    },\n\t\t\n\t\t    oclIsKindOf(val, type) {\n\t\t        //TODO implement oclIsKindOf\n\t\t    },\n\t\t\n\t\t    toString(val) {\n\t\t        return val.toString();\n\t\t    },\n\t\t\n\t\t    asOrderedSet(collection) {\n\t\t        return new Set(collection);\n\t\t    },\n\t\t\n\t\t    startWiths(str, prefix) {\n\t\t        return str.startWiths(prefix);\n\t\t    },\n\t\t\n\t\t    first(collection) {\n\t\t        return this.__asArray(collection)[0];\n\t\t    },\n\t\t\n\t\t    last(collection) {\n\t\t        let c = this.__asArray(collection);\n\t\t        return c[c.length - 1];\n\t\t    },\n\t\t\n\t\t    toInteger(string) {\n\t\t        return string * 1;\n\t\t    },\n\t\t}\n\t\t\n\t\t\n\n\t\t// 19:1-19:34\n\t\tfunction __attribute__HEAD_R() {\n\t\t\treturn 8\n\t\t\t;\n\t\t}\n\t\t// 20:1-20:40\n\t\tfunction __attribute__BODY_LENGTH() {\n\t\t\treturn 27\n\t\t\t;\n\t\t}\n\t\t// 21:1-21:39\n\t\tfunction __attribute__ARM_LENGTH() {\n\t\t\treturn 26\n\t\t\t;\n\t\t}\n\t\t// 22:1-22:37\n\t\tfunction __attribute__HEAD2ARMS() {\n\t\t\treturn 8\n\t\t\t;\n\t\t}\n\t\t// 23:1-23:39\n\t\tfunction __attribute__LEG_HEIGHT() {\n\t\t\treturn 15\n\t\t\t;\n\t\t}\n\t\t// 25:1-25:48\n\t\tfunction __attribute__INTER_OBJECT_MARGIN() {\n\t\t\treturn 100\n\t\t\t;\n\t\t}\n\t\t// 26:1-26:48\n\t\tfunction __attribute__INTER_MESSAGE_MARGIN() {\n\t\t\treturn 50\n\t\t\t;\n\t\t}\n\t\t// 27:1-27:34\n\t\tfunction __attribute__MARGIN() {\n\t\t\treturn 10\n\t\t\t;\n\t\t}\n\t\t// 29:1-29:32\n\t\tfunction __attribute__scale() {\n\t\t\treturn 10.0\n\t\t\t;\n\t\t}\n\t\t// 34:1-36:35\n\t\tfunction SVG__Rectangle__mustContainX(self, other) {\n\t\t\treturn new tcsvg.Constraints().and(\t\tother\n\t\t\t\t.ge(\n\t\t\t\t\tself.x\n\t\t\t\t\t, "./Sequence2TCSVG.atl - 35:3-35:18"\n\t\t\t\t)\n\t\t\t.and(\n\t\t\t\t\tother\n\t\t\t\t.le(\n\t\t\t\t\t\tself.x\n\t\t\t\t\t.plus(\n\t\t\t\t\t\tself.width\n\t\t\t\t\t)\n\t\t\t\t\t, "./Sequence2TCSVG.atl - 36:6-36:34"\n\t\t\t\t)\n\t\t\t)\n\t\t\t);\n\t\t}\n\t\t// 39:1-41:37\n\t\tfunction SVG__Rectangle__mustContainX_2(self, other) {\n\t\t\treturn new tcsvg.Constraints().and(\t\tother.x\n\t\t\t\t.ge(\n\t\t\t\t\tself.x\n\t\t\t\t\t, "./Sequence2TCSVG.atl - 40:3-40:20"\n\t\t\t\t)\n\t\t\t.and(\n\t\t\t\t\tother.x\n\t\t\t\t.le(\n\t\t\t\t\t\tself.x\n\t\t\t\t\t.plus(\n\t\t\t\t\t\tself.width\n\t\t\t\t\t)\n\t\t\t\t\t, "./Sequence2TCSVG.atl - 41:6-41:36"\n\t\t\t\t)\n\t\t\t)\n\t\t\t);\n\t\t}\n\t\t// 44:1-46:38\n\t\tfunction SVG__Rectangle__mustContainY(self, other) {\n\t\t\treturn new tcsvg.Constraints().and(\t\tother.y\n\t\t\t\t.ge(\n\t\t\t\t\tself.y\n\t\t\t\t\t, "./Sequence2TCSVG.atl - 45:3-45:20"\n\t\t\t\t)\n\t\t\t.and(\n\t\t\t\t\tother.y\n\t\t\t\t.le(\n\t\t\t\t\t\tself.y\n\t\t\t\t\t.plus(\n\t\t\t\t\t\tself.height\n\t\t\t\t\t)\n\t\t\t\t\t, "./Sequence2TCSVG.atl - 46:6-46:37"\n\t\t\t\t)\n\t\t\t)\n\t\t\t);\n\t\t}\n\t\t// 49:1-51:31\n\t\tfunction SVG__Rectangle__mustContain(self, other) {\n\t\t\treturn new tcsvg.Constraints().and(\tSVG__Rectangle__mustContainX_2(self, other)\n\t\t\t.and(\n\t\t\t\tSVG__Rectangle__mustContainY(self, other)\n\t\t\t)\n\t\t\t);\n\t\t}\n\t\t// 54:1-56:42\n\t\tfunction SVG__Rectangle__mustContain_2(self, other) {\n\t\t\treturn new tcsvg.Constraints().and(\tSVG__Rectangle__mustContain(self, other.topLeft)\n\t\t\t.and(\n\t\t\t\tSVG__Rectangle__mustContain(self, other.bottomRight)\n\t\t\t)\n\t\t\t);\n\t\t}\n\t\t// 59:1-62:56\n\t\tfunction textOutline(outline, name) {\n\t\t\treturn new tcsvg.Constraints().and(\t\t\toutline.width\n\t\t\t\t\t.ge(\n\t\t\t\t\t\t\tname.width\n\t\t\t\t\t\t.plus(\n\t\t\t\t\t\t\t\t(new tcsvg.Expression(__attribute__MARGIN()))\n\t\t\t\t\t\t\t.times(\n\t\t\t\t\t\t\t\t(new tcsvg.Expression(2))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 60:3-60:54"\n\t\t\t\t\t)\n\t\t\t\t.and(\n\t\t\t\t\t\tname.center\n\t\t\t\t\t.eq(\n\t\t\t\t\t\toutline.center\n\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 61:6-61:34"\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t.and(\n\t\t\t\t\toutline.height\n\t\t\t\t.ge(\n\t\t\t\t\t\tname.height\n\t\t\t\t\t.plus(\n\t\t\t\t\t\t(new tcsvg.Expression(__attribute__MARGIN()))\n\t\t\t\t\t)\n\t\t\t\t\t, "./Sequence2TCSVG.atl - 62:6-62:55"\n\t\t\t\t)\n\t\t\t)\n\t\t\t);\n\t\t}\n\t\t// 65:1-85:45\n\t\tfunction participantConstraints(part) {\n\t\t\treturn new tcsvg.Constraints().and(((tgt) => (\n\t\t\t\t((afterTgt) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t((! (OCLLibrary.oclIsUndefined(part.x))) ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttgt.outline.x\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpart.x\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 70:4-70:26"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttgt.outline.y\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpart.y\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 71:7-71:29"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: new tcsvg.Constraints())\n\t\t\t\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t((! (OCLLibrary.oclIsUndefined(part.after))) ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttgt.outline.bottom.p1.y\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tafterTgt.outline.bottom.p1.y\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 74:4-74:58"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttgt.outline.center.x\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.ge(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tafterTgt.outline.center.x\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.plus(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttgt.outline.width\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.plus(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tafterTgt.outline.width\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.div(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(new tcsvg.Expression(2))\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.plus(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(new tcsvg.Expression(__attribute__INTER_OBJECT_MARGIN()))\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 75:7-75:140"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttgt.line.p2.y\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tafterTgt.line.p2.y\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 76:7-76:41"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: new tcsvg.Constraints())\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttgt.line.p1\n\t\t\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttgt.outline.bottom.center\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 78:6-78:45"\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\t\ttgt.line.p2.x\n\t\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\t\ttgt.line.p1.x\n\t\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 79:6-79:35"\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\ttgt.line.p2.y\n\t\t\t\t\t\t\t\t\t\t\t.ge(\n\t\t\t\t\t\t\t\t\t\t\t\t\ttgt.line.p1.y\n\t\t\t\t\t\t\t\t\t\t\t\t.plus(\n\t\t\t\t\t\t\t\t\t\t\t\t\t(new tcsvg.Expression(20))\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 80:6-80:41"\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\ttextOutline(tgt.outline, tgt.name)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\ttextOutline(tgt.outline2, tgt.name2)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\ttgt.line2.p1\n\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\ttgt.line.p2\n\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 83:6-83:32"\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\ttgt.line2.p2\n\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\ttgt.line2.p1.dy((new tcsvg.Expression(40)))\n\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 84:6-84:40"\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t.and(\n\t\t\t\t\t\t\ttgt.line2.p2\n\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\ttgt.outline2.top.center\n\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 85:6-85:44"\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t))(part.after)\n\t\t\t))(part)\n\t\t\t);\n\t\t}\n\t\t// 120:1-129:85\n\t\tfunction actor(head, body, arms, leftLeg, rightLeg) {\n\t\t\treturn new tcsvg.Constraints().and(\t\t\t\t\t\t\t\t\thead.r\n\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\t(new tcsvg.Expression(__attribute__HEAD_R()))\n\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 121:3-121:29"\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\tbody.p1\n\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\thead.center.dy((new tcsvg.Expression(__attribute__HEAD_R())))\n\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 122:6-122:49"\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\tbody.p2\n\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\tbody.p1.dy((new tcsvg.Expression(__attribute__BODY_LENGTH())))\n\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 123:6-123:50"\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\tarms.p1\n\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\tbody.p1.plus(\t(new tcsvg.Expression(__attribute__ARM_LENGTH())).neg\n\t\t\t\t\t\t\t\t\t\t.div(\n\t\t\t\t\t\t\t\t\t\t\t(new tcsvg.Expression(2))\n\t\t\t\t\t\t\t\t\t\t), (new tcsvg.Expression(__attribute__HEAD2ARMS())))\n\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 124:6-124:76"\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\tarms.p2\n\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\tbody.p1.plus(\t(new tcsvg.Expression(__attribute__ARM_LENGTH()))\n\t\t\t\t\t\t\t\t\t.div(\n\t\t\t\t\t\t\t\t\t\t(new tcsvg.Expression(2))\n\t\t\t\t\t\t\t\t\t), (new tcsvg.Expression(__attribute__HEAD2ARMS())))\n\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 125:6-125:75"\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\tleftLeg.p1\n\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\tbody.p2\n\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 126:6-126:26"\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t.and(\n\t\t\t\t\t\t\tleftLeg.p2\n\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\tleftLeg.p1.plus(\t(new tcsvg.Expression(__attribute__ARM_LENGTH())).neg\n\t\t\t\t\t\t\t.div(\n\t\t\t\t\t\t\t\t(new tcsvg.Expression(2))\n\t\t\t\t\t\t\t), (new tcsvg.Expression(__attribute__LEG_HEIGHT())))\n\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 127:6-127:83"\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t.and(\n\t\t\t\t\t\trightLeg.p1\n\t\t\t\t\t.eq(\n\t\t\t\t\t\tbody.p2\n\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 128:6-128:27"\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t.and(\n\t\t\t\t\trightLeg.p2\n\t\t\t\t.eq(\n\t\t\t\t\trightLeg.p1.plus(\t(new tcsvg.Expression(__attribute__ARM_LENGTH()))\n\t\t\t\t\t.div(\n\t\t\t\t\t\t(new tcsvg.Expression(2))\n\t\t\t\t\t), (new tcsvg.Expression(__attribute__LEG_HEIGHT())))\n\t\t\t\t\t, "./Sequence2TCSVG.atl - 129:6-129:84"\n\t\t\t\t)\n\t\t\t)\n\t\t\t);\n\t\t}\n\t\t// 169:1-172:52\n\t\tfunction eventConstraints(e, on) {\n\t\t\treturn new tcsvg.Constraints().and(((tgt) => (\n\t\t\t\teventConstraints2(e, on, tgt.outline)\n\t\t\t))(e)\n\t\t\t);\n\t\t}\n\t\t// 175:1-179:52\n\t\tfunction eventConstraints2(e, on, outline) {\n\t\t\treturn new tcsvg.Constraints().and(((tgt) => (\n\t\t\t\t\t\toutline.center.x\n\t\t\t\t\t.eq(\n\t\t\t\t\t\ttgt.line.p1.x\n\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 178:3-178:35"\n\t\t\t\t\t)\n\t\t\t\t.and(\n\t\t\t\t\teventConstraintsY2(e, on, outline)\n\t\t\t\t)\n\t\t\t))(on)\n\t\t\t);\n\t\t}\n\t\t// 183:1-186:53\n\t\tfunction eventConstraintsY(e, on) {\n\t\t\treturn new tcsvg.Constraints().and(((tgt) => (\n\t\t\t\teventConstraintsY2(e, on, tgt.outline)\n\t\t\t))(e)\n\t\t\t);\n\t\t}\n\t\t// 190:1-210:4\n\t\tfunction eventConstraintsY2(e, on, outline) {\n\t\t\treturn new tcsvg.Constraints().and(((scale) => (\n\t\t\t\t((onTgt) => (\n\t\t\t\t\t((afterTgt) => (\n\t\t\t\t\t\t((parentTgt) => (\n\t\t\t\t\t\t\t\t\t\tonTgt.line.p2.y\n\t\t\t\t\t\t\t\t\t.ge(\n\t\t\t\t\t\t\t\t\t\toutline.bottomLeft.y\n\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 196:3-196:42"\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t((! (OCLLibrary.oclIsUndefined(e.after)))) ? (\n\t\t\t\t\t\t\t\t\t\t\toutline.y\n\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\tafterTgt.outline.bottomLeft.y\n\t\t\t\t\t\t\t\t\t\t\t.plus(\n\t\t\t\t\t\t\t\t\t\t\t\tscale\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 198:3-198:52"\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t((! (OCLLibrary.oclIsUndefined(e.parent)))) ? (\n\t\t\t\t\t\t\t\t\t\t\t((! (OCLLibrary.oclIsUndefined(parentTgt.label)))) ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\toutline.y\n\t\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tparentTgt.label.bottomLeft.y\n\t\t\t\t\t\t\t\t\t\t\t\t\t.plus(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tscale\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 201:4-201:52"\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\toutline.y\n\t\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tparentTgt.outline.y\n\t\t\t\t\t\t\t\t\t\t\t\t\t.plus(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tscale\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 203:4-203:43"\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\toutline.y\n\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\t\tonTgt.line.p1.y\n\t\t\t\t\t\t\t\t\t\t\t\t.plus(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tscale\n\t\t\t\t\t\t\t\t\t\t\t\t\t.times(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(new tcsvg.Expression(2))\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 206:3-206:42"\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t((! (OCLLibrary.oclIsUndefined(e.parent))) ?\n\t\t\t\t\t\t\t\t\tSVG__Rectangle__mustContain_2(parentTgt.outline, outline.enlarge((new tcsvg.Expression(5))))\n\t\t\t\t\t\t\t\t: new tcsvg.Constraints())\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t))(e.parent)\n\t\t\t\t\t))(e.after)\n\t\t\t\t))(on)\n\t\t\t))((new tcsvg.Expression(__attribute__scale())))\n\t\t\t);\n\t\t}\n\t<\/script>\n\t<defs>\n\t\t\x3c!-- 95:1-117:2 --\x3e\n\t\t<g id="object" >\n\t\t\t<line class="lifeline" id=".line"/>\n\t\t\t<rect class="participant" id=".outline"/>\n\t\t\t<text class="participantName" content-value="param(name)" id=".name">default</text>\n\t\t\t<line class="lifeline" id=".line2"/>\n\t\t\t<rect class="participant" id=".outline2"/>\n\t\t\t<text class="participantName" content-value="param(name)" id=".name2">default</text>\n\t\t\t\x3c!-- constraints --\x3e\n\t\t\t<constraints>\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn participantConstraints(s);\n\t\t\t\t}\n\t\t\t</constraints>\n\t\t</g>\n\t\t\x3c!-- 131:1-166:2 --\x3e\n\t\t<g id="actor" class="actor">\n\t\t\t<line class="lifeline" id=".line"/>\n\t\t\t<rect display="none" id=".outline"/>\n\t\t\t<text class="participantName" content-value="param(name)" id=".name">default</text>\n\t\t\t<circle id=".head"/>\n\t\t\t<line id=".body"/>\n\t\t\t<line id=".arms"/>\n\t\t\t<line id=".leftLeg"/>\n\t\t\t<line id=".rightLeg"/>\n\t\t\t<line class="lifeline" id=".line2"/>\n\t\t\t<rect display="none" fill="none" id=".outline2"/>\n\t\t\t<text class="participantName" content-value="param(name)" id=".name2">default</text>\n\t\t\t<circle id=".head2"/>\n\t\t\t<line id=".body2"/>\n\t\t\t<line id=".arms2"/>\n\t\t\t<line id=".leftLeg2"/>\n\t\t\t<line id=".rightLeg2"/>\n\t\t\t\x3c!-- constraints --\x3e\n\t\t\t<constraints name="participant">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn participantConstraints(s);\n\t\t\t}\n\t\t\t</constraints>\n\t\t\t<constraints name="actorTop">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn \tactor(this.head, this.body, this.arms, this.leftLeg, this.rightLeg)\n\t\t\t\t\t.and(\n\t\t\t\t\t\t\tthis.outline.top.center\n\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\tthis.body.p2.dy((new tcsvg.Expression(__attribute__LEG_HEIGHT())))\n\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 162:10-162:64"\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t}\n\t\t\t</constraints>\n\t\t\t<constraints name="actorBot">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn \tactor(this.head2, this.body2, this.arms2, this.leftLeg2, this.rightLeg2)\n\t\t\t\t\t.and(\n\t\t\t\t\t\t\tthis.outline2.bottom.center\n\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\tthis.head2.center.dy((new tcsvg.Expression(__attribute__HEAD_R())).neg)\n\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 164:10-164:70"\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t}\n\t\t\t</constraints>\n\t\t</g>\n\t\t\x3c!-- 220:1-232:2 --\x3e\n\t\t<g id="call" >\n\t\t\t<rect display="param(cursor) none" height="10" id=".outline" width="10"/>\n\t\t\t\x3c!-- constraints --\x3e\n\t\t\t<constraints name="eventCstr">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn eventConstraints(s, s.on);\n\t\t\t}\n\t\t\t</constraints>\n\t\t</g>\n\t\t\x3c!-- 234:1-254:2 --\x3e\n\t\t<g id="accept" >\n\t\t\t<rect display="param(cursor) none" height="10" id=".outline" width="10"/>\n\t\t\t<line class="messageArrow" id=".line"/>\n\t\t\t<text class="messageSignature" content-value="param(signature)" id=".text">default</text>\n\t\t\t\x3c!-- constraints --\x3e\n\t\t\t<constraints name="eventCstr">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn eventConstraints(s, s.on);\n\t\t\t}\n\t\t\t</constraints>\n\t\t\t<constraints name="acceptCstr">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn ((callTgt) => (\n\t\t\t\t\t\t\t\t\tthis.line.p1\n\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\tcallTgt.outline.center\n\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 250:6-250:38"\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\tthis.line.p2\n\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\tthis.outline.center\n\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 251:9-251:33"\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\tthis.text.bottom.center\n\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\tthis.line.center\n\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 252:9-252:41"\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t))(s.call);\n\t\t\t}\n\t\t\t</constraints>\n\t\t</g>\n\t\t\x3c!-- 256:1-276:2 --\x3e\n\t\t<g id="direct" >\n\t\t\t<rect display="param(cursor) none" height="10" id=".outline" width="10"/>\n\t\t\t<rect display="param(cursor) none" fill="none" height="10" id=".source" width="10"/>\n\t\t\t<line class="messageArrow" id=".line"/>\n\t\t\t<text class="messageSignature" content-value="param(signature)" id=".text">default</text>\n\t\t\t\x3c!-- constraints --\x3e\n\t\t\t<constraints name="eventCstrFrom">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn eventConstraints2(s, s.from, this.source);\n\t\t\t}\n\t\t\t</constraints>\n\t\t\t<constraints name="eventCstrTo">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn eventConstraints2(s, s.to, this.outline);\n\t\t\t}\n\t\t\t</constraints>\n\t\t\t<constraints name="directCstr">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn \t\t\tthis.line.p1\n\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\tthis.source.center\n\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 272:6-272:29"\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\tthis.line.p2\n\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\tthis.outline.center\n\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 273:9-273:33"\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t.and(\n\t\t\t\t\t\t\tthis.text.bottom.center\n\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\tthis.line.center\n\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 274:9-274:41"\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t}\n\t\t\t</constraints>\n\t\t</g>\n\t\t\x3c!-- 278:1-305:2 --\x3e\n\t\t<g id="selfaccept" >\n\t\t\t<rect display="none" height="10" id=".outline" width="10"/>\n\t\t\t<line class="messagePart" id=".line1"/>\n\t\t\t<line class="messagePart" id=".line2"/>\n\t\t\t<line class="messageArrow" id=".line3"/>\n\t\t\t<text class="messageSignature" content-value="param(signature)" id=".text">default</text>\n\t\t\t\x3c!-- constraints --\x3e\n\t\t\t<constraints name="eventCstr">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn eventConstraints(s, s.on);\n\t\t\t}\n\t\t\t</constraints>\n\t\t\t<constraints name="selfAcceptCstr">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn ((DX) => (\n\t\t\t\t\t\t((callTgt) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.line1.p1\n\t\t\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcallTgt.outline.center\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 297:6-297:39"\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.line1.p2\n\t\t\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.line1.p1.dx(DX)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 298:9-298:35"\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.line2.p1\n\t\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.line1.p2\n\t\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 299:9-299:28"\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\tthis.line3.p1\n\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\tthis.line2.p2\n\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 300:9-300:28"\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\tthis.line3.p2\n\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\tthis.line3.p1.dx(DX.neg)\n\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 301:9-301:36"\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\tthis.line3.p2\n\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\tthis.outline.center\n\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 302:9-302:34"\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\tthis.text.left.center\n\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\tthis.line2.center.dx((new tcsvg.Expression(5)))\n\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 303:9-303:46"\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t))(s.call)\n\t\t\t\t\t))((new tcsvg.Expression(20)));\n\t\t\t}\n\t\t\t</constraints>\n\t\t</g>\n\t\t\x3c!-- 307:1-327:2 --\x3e\n\t\t<g id="unaccepted" >\n\t\t\t<line class="messageArrow" id=".line"/>\n\t\t\t<text class="messageSignature" content-value="param(signature)" id=".text">default</text>\n\t\t\t\x3c!-- constraints --\x3e\n\t\t\t<constraints name="unacceptedCstr">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn ((callTgt) => (\n\t\t\t\t\t\t((rightmostTgt) => (\n\t\t\t\t\t\t\t\t\t\t\tthis.line.p1\n\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\tcallTgt.outline.center\n\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 322:6-322:38"\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\tthis.line.p2.y\n\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\tthis.line.p1.y\n\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 323:9-323:30"\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\tthis.line.p2.x\n\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\trightmostTgt.line.p1.x\n\t\t\t\t\t\t\t\t\t\t.plus(\n\t\t\t\t\t\t\t\t\t\t\t(new tcsvg.Expression(150))\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 324:9-324:49"\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\tthis.text.bottom.center\n\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\tthis.line.center\n\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 325:9-325:41"\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t))(s.rightmost)\n\t\t\t\t\t))(s.call);\n\t\t\t}\n\t\t\t</constraints>\n\t\t</g>\n\t\t\x3c!-- 329:1-353:2 --\x3e\n\t\t<g id="found" class="found">\n\t\t\t<rect display="none" height="10" id=".outline" width="10"/>\n\t\t\t<line class="messageArrow" id=".line"/>\n\t\t\t<text class="messageSignature" content-value="param(signature)" id=".text">default</text>\n\t\t\t<circle class="circle" display="param(circle) yes" id=".circle" r="5"/>\n\t\t\t\x3c!-- constraints --\x3e\n\t\t\t<constraints name="eventCstr">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn eventConstraints(s, s.on);\n\t\t\t}\n\t\t\t</constraints>\n\t\t\t<constraints name="unacceptedCstr">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn ((leftmostTgt) => (\n\t\t\t\t\t\t\t\t\t\t\tthis.line.p1.x\n\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\tleftmostTgt.line.p1.x\n\t\t\t\t\t\t\t\t\t\t\t.minus(\n\t\t\t\t\t\t\t\t\t\t\t\t(new tcsvg.Expression(150))\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 347:6-347:45"\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\tthis.line.p1.y\n\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\tthis.line.p2.y\n\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 348:9-348:30"\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\tthis.line.p2\n\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\tthis.outline.center\n\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 349:9-349:33"\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\tthis.circle.center.dx((new tcsvg.Expression(5)))\n\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\tthis.line.p1\n\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 350:9-350:38"\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\tthis.text.bottom.center\n\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\tthis.line.center\n\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 351:9-351:41"\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t))(s.leftmost);\n\t\t\t}\n\t\t\t</constraints>\n\t\t</g>\n\t\t\x3c!-- 355:1-383:2 --\x3e\n\t\t<g id="set" class="set">\n\t\t\t<rect display="none" height="10" id=".outline" width="10"/>\n\t\t\t<line class="messagePart" id=".line1"/>\n\t\t\t<line class="messagePart" id=".line2"/>\n\t\t\t<line class="messageArrow" id=".line3"/>\n\t\t\t<text class="messageSignature" content-value="param(signature)" id=".text">default</text>\n\t\t\t\x3c!-- constraints --\x3e\n\t\t\t<constraints name="eventCstr">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn eventConstraints(s, s.on);\n\t\t\t}\n\t\t\t</constraints>\n\t\t\t<constraints name="selfAcceptCstr">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn ((DX) => (\n\t\t\t\t\t\t((DY) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.line1.p1\n\t\t\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.outline.center\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 375:6-375:31"\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.line1.p2\n\t\t\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.line1.p1.dx(DX)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 376:9-376:35"\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.line2.p1\n\t\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.line1.p2\n\t\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 377:9-377:28"\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\tthis.line2.p2\n\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\tthis.line2.p1.dy(DY)\n\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 378:9-378:35"\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\tthis.line3.p1\n\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\tthis.line2.p2\n\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 379:9-379:28"\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\tthis.line3.p2\n\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\tthis.line3.p1.dx(DX.neg)\n\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 380:9-380:36"\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\tthis.text.left.center\n\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\tthis.line2.center.dx((new tcsvg.Expression(5)))\n\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 381:9-381:46"\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t))((new tcsvg.Expression(15)))\n\t\t\t\t\t))((new tcsvg.Expression(20)));\n\t\t\t}\n\t\t\t</constraints>\n\t\t</g>\n\t\t\x3c!-- 385:1-408:2 --\x3e\n\t\t<g id="after" >\n\t\t\t<rect fill="url(#horizontalWhiteStripes)" id=".outline" stroke="none"/>\n\t\t\t<text class="messageSignature" content-value="param(signature)" id=".text">default</text>\n\t\t\t\x3c!-- constraints --\x3e\n\t\t\t<constraints name="onCstr">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn (OCLLibrary.iterate(OCLLibrary.collect(s.on, (o) => ((oTgt) => (\n\t\t\t\t\t\t\t\teventConstraintsY(s, o)\n\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\toTgt.outline.center.x\n\t\t\t\t\t\t\t\t.ge(\n\t\t\t\t\t\t\t\t\t\tthis.outline.x\n\t\t\t\t\t\t\t\t\t.plus(\n\t\t\t\t\t\t\t\t\t\t(new tcsvg.Expression(5))\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 401:10-401:48"\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\toTgt.outline.center.x\n\t\t\t\t\t\t\t.le(\n\t\t\t\t\t\t\t\t\tthis.outline.topRight.x\n\t\t\t\t\t\t\t\t.minus(\n\t\t\t\t\t\t\t\t\t(new tcsvg.Expression(5))\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 402:10-402:57"\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t))(o)), (new tcsvg.Constraints()),\n\t\t\t\t\t\t(acc, c) => \tacc\n\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\tc\n\t\t\t\t\t\t)\n\t\t\t\t\t))\n\t\t\t\t\t;\n\t\t\t}\n\t\t\t</constraints>\n\t\t\t<constraints name="cstr">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn \t\tthis.outline.height\n\t\t\t\t\t\t.ge(\n\t\t\t\t\t\t\t\tthis.text.height\n\t\t\t\t\t\t\t.times(\n\t\t\t\t\t\t\t\t(new tcsvg.Expression(2))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 405:6-405:39"\n\t\t\t\t\t\t)\n\t\t\t\t\t.and(\n\t\t\t\t\t\t\tthis.text.center\n\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\tthis.outline.center\n\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 406:9-406:37"\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t}\n\t\t\t</constraints>\n\t\t</g>\n\t\t\x3c!-- 410:1-447:2 --\x3e\n\t\t<g id="note" >\n\t\t\t<rect class="note" display="none" id=".outline"/>\n\t\t\t<polygon class="note" id=".polygon"/>\n\t\t\t<text content-value="param(note)" id=".text">default<title content-value="param(title)">no title</title></text>\n\t\t\t\x3c!-- constraints --\x3e\n\t\t\t<constraints name="eventCstr">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn eventConstraintsY(s, OCLLibrary.first(s.on));\n\t\t\t}\n\t\t\t</constraints>\n\t\t\t<constraints name="outlCstr">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn ((first) => (\n\t\t\t\t\t\t((last) => (\n\t\t\t\t\t\t\t\t\tthis.outline.center.x\n\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\tlast.outline.center.x\n\t\t\t\t\t\t\t\t\t\t.plus(\n\t\t\t\t\t\t\t\t\t\t\tfirst.outline.center.x\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t.div(\n\t\t\t\t\t\t\t\t\t\t(new tcsvg.Expression(2))\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 430:6-430:77"\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\tthis.text.center\n\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\tthis.outline.center\n\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 431:9-431:37"\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t))(OCLLibrary.last(s.on))\n\t\t\t\t\t))(OCLLibrary.first(s.on));\n\t\t\t}\n\t\t\t</constraints>\n\t\t\t<constraints name="polyCstr">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn ((DELTA) => (\n\t\t\t\t\t\t((M) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tSVG__Rectangle__mustContain_2(this.outline, this.text.enlarge(M, M, \tM\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.plus(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tDELTA\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t), M))\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.polygon.pointEq((new tcsvg.Expression(0)), this.outline.topLeft)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.polygon.pointEq((new tcsvg.Expression(1)), this.outline.topRight.dx(DELTA.neg))\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.polygon.pointEq((new tcsvg.Expression(2)), this.outline.topRight.plus(DELTA.neg, DELTA))\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.polygon.pointEq((new tcsvg.Expression(3)), this.outline.topRight.dx(DELTA.neg))\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\tthis.polygon.pointEq((new tcsvg.Expression(4)), this.outline.topRight.dy(DELTA))\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\tthis.polygon.pointEq((new tcsvg.Expression(5)), this.outline.topRight.plus(DELTA.neg, DELTA))\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\tthis.polygon.pointEq((new tcsvg.Expression(6)), this.outline.topRight.dy(DELTA))\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\tthis.polygon.pointEq((new tcsvg.Expression(7)), this.outline.bottomRight)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\tthis.polygon.pointEq((new tcsvg.Expression(8)), this.outline.bottomLeft)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t))(\t(new tcsvg.Expression(__attribute__MARGIN()))\n\t\t\t\t\t\t.div(\n\t\t\t\t\t\t\t(new tcsvg.Expression(3))\n\t\t\t\t\t\t))\n\t\t\t\t\t))((new tcsvg.Expression(10)));\n\t\t\t}\n\t\t\t</constraints>\n\t\t</g>\n\t\t\x3c!-- 449:1-474:2 --\x3e\n\t\t<g id="invariant" >\n\t\t\t<rect display="none" id=".outline" width="10"/>\n\t\t\t<rect display="none" height="10" id=".helpr" width="10"/>\n\t\t\t<polygon class="invariant" id=".polygon"/>\n\t\t\t<a href-value="param(link) default">\n\t\t\t\t\t\t\t\t\t<text class="invariantText" content-value="param(invariant)" id=".text">default</text>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\x3c!-- constraints --\x3e\n\t\t\t<constraints name="eventCstr">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn eventConstraints(s, s.on);\n\t\t\t}\n\t\t\t</constraints>\n\t\t\t<constraints name="invCstr">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn ((width) => (\n\t\t\t\t\t\t((height) => (\n\t\t\t\t\t\t\t\t\t\t\tthis.outline.height\n\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\theight\n\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 469:6-469:29"\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\tthis.polygon.constrainTEllipse(this.helpr.x, this.helpr.y, \twidth\n\t\t\t\t\t\t\t\t\t\t.plus(\n\t\t\t\t\t\t\t\t\t\t\t\theight\n\t\t\t\t\t\t\t\t\t\t\t.div(\n\t\t\t\t\t\t\t\t\t\t\t\t(new tcsvg.Expression(2))\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t), width)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\tthis.polygon.center\n\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\tthis.outline.center\n\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 471:9-471:40"\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\tthis.text.center\n\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\tthis.outline.center\n\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 472:9-472:37"\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t))(\tthis.text.height\n\t\t\t\t\t\t.plus(\n\t\t\t\t\t\t\t\t(new tcsvg.Expression(__attribute__MARGIN()))\n\t\t\t\t\t\t\t.times(\n\t\t\t\t\t\t\t\t(new tcsvg.Expression(2))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t))\n\t\t\t\t\t))(this.text.width);\n\t\t\t}\n\t\t\t</constraints>\n\t\t</g>\n\t\t\x3c!-- 476:1-513:2 --\x3e\n\t\t<g id="fragment" class="fragment">\n\t\t\t<rect id=".outline"/>\n\t\t\t<polygon id=".polygon"/>\n\t\t\t<text content-value="param(label)" id=".label">default</text>\n\t\t\t<text content-value="param(condition)" id=".condition">default</text>\n\t\t\t\x3c!-- constraints --\x3e\n\t\t\t<constraints name="eventCstr">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn eventConstraintsY(s, OCLLibrary.first(s.on));\n\t\t\t}\n\t\t\t</constraints>\n\t\t\t<constraints name="outlCstr">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn ((lblOutline) => (\n\t\t\t\t\t\t((first) => (\n\t\t\t\t\t\t\t((last) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.outline.center.x\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlast.outline.center.x\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.plus(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfirst.outline.center.x\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.div(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(new tcsvg.Expression(2))\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 496:6-496:77"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(OCLLibrary.iterate(OCLLibrary.collect(s.on, (o) => ((DX) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t((oTgt) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.outline.mustContainX(\toTgt.line.p1.x\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.plus(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tDX\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.outline.mustContainX(\toTgt.line.p1.x\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.minus(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tDX\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t))(o)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t))((new tcsvg.Expression(5)))), (new tcsvg.Constraints()),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(acc, c) => \tacc\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tc\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlblOutline.topLeft\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.outline.topLeft\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 504:9-504:45"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.polygon.pointEq((new tcsvg.Expression(0)), lblOutline.topLeft)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.polygon.pointEq((new tcsvg.Expression(1)), lblOutline.topRight.dx((new tcsvg.Expression(10))))\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.polygon.pointEq((new tcsvg.Expression(2)), lblOutline.topRight.plus((new tcsvg.Expression(10)), (new tcsvg.Expression(10))))\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\tthis.polygon.pointEq((new tcsvg.Expression(3)), lblOutline.bottomRight)\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\tthis.polygon.pointEq((new tcsvg.Expression(4)), lblOutline.bottomLeft)\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\tthis.condition.topLeft\n\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\tlblOutline.topRight.dx((new tcsvg.Expression(20)))\n\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 510:9-510:55"\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\tSVG__Rectangle__mustContain_2(this.outline, this.condition)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t))(OCLLibrary.last(s.on))\n\t\t\t\t\t\t))(OCLLibrary.first(s.on))\n\t\t\t\t\t))(this.label.enlarge((new tcsvg.Expression(__attribute__MARGIN())), (new tcsvg.Expression(0))));\n\t\t\t}\n\t\t\t</constraints>\n\t\t</g>\n\t\t\x3c!-- 515:1-544:2 --\x3e\n\t\t<g id="compartment" class="compartment">\n\t\t\t<rect display="none" id=".outline"/>\n\t\t\t<line id=".line"/>\n\t\t\t<text content-value="param(condition)" id=".label">default</text>\n\t\t\t\x3c!-- constraints --\x3e\n\t\t\t<constraints name="compCstr">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn ((parTgt) => (\n\t\t\t\t\t\t((afterTgt) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.outline.x\n\t\t\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tparTgt.outline.x\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 532:6-532:34"\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.outline.width\n\t\t\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tparTgt.outline.width\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 533:9-533:45"\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\t(OCLLibrary.oclIsUndefined(s.after)) ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.outline.y\n\t\t\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tparTgt.outline.y\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 535:7-535:35"\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.outline.y\n\t\t\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tafterTgt.outline.bottomLeft.y\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.plus(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(new tcsvg.Expression(__attribute__scale()))\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 537:7-537:67"\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\tthis.line\n\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\tthis.outline.top\n\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 539:9-539:27"\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\tthis.label.topLeft.x\n\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\tparTgt.label.enlarge((new tcsvg.Expression(__attribute__MARGIN())), (new tcsvg.Expression(0))).topRight.x\n\t\t\t\t\t\t\t\t\t\t\t.plus(\n\t\t\t\t\t\t\t\t\t\t\t\t(new tcsvg.Expression(20))\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 540:9-540:85"\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\tSVG__Rectangle__mustContain_2(this.outline, this.label)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\tSVG__Rectangle__mustContain_2(parTgt.outline, this.outline)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t))(s.after)\n\t\t\t\t\t))(s.parent);\n\t\t\t}\n\t\t\t</constraints>\n\t\t</g>\n\t\t\x3c!-- 546:1-568:2 --\x3e\n\t\t<g id="textcompartment" class="textcompartment">\n\t\t\t<rect display="none" id=".outline"/>\n\t\t\t<text content-value="param(label)" id=".label">default</text>\n\t\t\t\x3c!-- constraints --\x3e\n\t\t\t<constraints name="compCstr">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn ((parTgt) => (\n\t\t\t\t\t\t\t\t\t\t\t\tthis.outline.x\n\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\tparTgt.outline.x\n\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 561:6-561:34"\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\tthis.outline.width\n\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\tparTgt.outline.width\n\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 562:9-562:45"\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\tthis.outline.y\n\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\tparTgt.label.bottomLeft.y\n\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 563:9-563:46"\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\tthis.label.center\n\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\tthis.outline.center\n\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 564:9-564:38"\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\tSVG__Rectangle__mustContain_2(this.outline, this.label.enlarge((new tcsvg.Expression(10))))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\tSVG__Rectangle__mustContain_2(parTgt.outline, this.outline)\n\t\t\t\t\t\t)\n\t\t\t\t\t))(s.parent);\n\t\t\t}\n\t\t\t</constraints>\n\t\t</g>\n\t\t\x3c!-- 570:1-592:2 --\x3e\n\t\t<g id="actualgate">\n\t\t\t<rect display="param(cursor) none" height="10" id=".outline" width="10"/>\n\t\t\t<line class="messageArrow" id=".line"/>\n\t\t\t<text class="messageSignature" content-value="param(signature)" id=".text">default</text>\n\t\t\t\x3c!-- constraints --\x3e\n\t\t\t<constraints name="compCstr">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn ((fragTgt) => (\n\t\t\t\t\t\t((callTgt) => (\n\t\t\t\t\t\t\t\t\t\tthis.outline.center.onSegment(fragTgt.outline.left)\n\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\tthis.line.p1\n\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\tcallTgt.outline.center\n\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 588:9-588:41"\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\tthis.line.p2\n\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\tthis.outline.center\n\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 589:9-589:33"\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\tthis.text.bottom.center\n\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\tthis.line.center\n\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 590:9-590:41"\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t))(s.call)\n\t\t\t\t\t))(s.fragment);\n\t\t\t}\n\t\t\t</constraints>\n\t\t</g>\n\t</defs>\n\t<marker id="arrowHead" markerWidth="10" markerHeight="8" refX="10" refY="4" orient="auto">\n\t\t<polygon class="messageArrowHead" points="0,0,10,4,0,8,6,4"/>\n\t</marker>\n\t<pattern id="horizontalWhiteStripes" patternUnits="userSpaceOnUse" width="4" height="4">\n\t\t<line x1="-5" y1="0" x2="9" y2="0" style="stroke-width: 4; stroke: white;"/>\n\t</pattern>\n'}

			${t}

			<script>
				function __attribute__scale() {
					return ${n??10};
				}
			</script>

			<script xlink:href="${e}tcsvg/c.js"/>
			<script xlink:href="${e}tcsvg/TCSVG.min.js"/>
		</svg>
	`.replace(/([^:])\/\/[^\n]*/g,"$1\n").replace(/\t/g," ")}function i(t){return t.querySelectorAll("use,defs>g,script,constraints,[display=none]").forEach((t=>t.remove())),t.querySelectorAll("[params]").forEach((t=>t.removeAttribute("params"))),t.querySelectorAll("[content-value]").forEach((t=>t.removeAttribute("content-value"))),t.querySelectorAll("text").filter((t=>" "===t.innerHTML)).forEach((t=>t.remove())),t.innerHTML.replace(/(<a .*?)(xlink:)?href="[^"]*"/g,"$1")}},9416:(t,e,n)=>{"use strict";function s(t,...e){const n=t[0].replace(/^\s*\n/,""),s=n.replace(/^(\s*)[\s\S]*$/,"$1");function r(t){return t.replace(new RegExp(`^${s}`,"mg"),"")}function i(t){return"number"==typeof t?t:t.replace(/\n/g,`\n${c}`)}function a(t){return t.replace(/^[\s\S]*\n/,"")}var o=r(n),c=a(o);return e.forEach(((n,s)=>{var l=r(t[s+1]);""===(n=Array.isArray(n)?n.map(i).join(`\n${c}`):0==n||n?i(n):"")?o.match(/\n\s*$/)&&l.match(/^\s*\n/)&&(o=o.replace(/\n\s*$/,"")):o+=n,s==e.length-1&&(l=l.trimEnd()),o+=l,c=a(l)})),o}n.d(e,{W:()=>s})},6054:(t,e,n)=>{"use strict";n.d(e,{W:()=>i});var s=n(9625),r=n(4057);function i(t,e,n=!0){var i={states:{},transitions:{}};let a=!1;function o(t){return t.trigger.replace(e.afterRegex,"$1")}function c(t){return`TO${p(t)}`}function l(t){return"shallowHistory"===t.kind&&t.incoming.some((e=>e.source!=t.region))}function u(n){const s=v.filter((t=>t.source==n));if(l(n)){const r=n.region,i=e.getInitial(r).outgoing[0],a=i.target;return[...s,...r.states.filter((t=>!t.kind)).map((s=>({name:`__${n.name}2${s.name}__`,region:t,source:n,target:s,guard:`_histories_['${e.stateFullName(r)}'] == '${s.name}'`}))),{name:`__${n.name}else__`,region:t,source:n,target:a,guard:"else",effect:i.effect}]}return s}function p(t){return t.replace(/[ .]/g,"_").replace(/</g,"LT").replace(/>/g,"GT").replace(/=/g,"EQ").replace(/&/g,"AMP").replace(/[|]/g,"PIPE").replace(/[(]/g,"LPAREN").replace(/[)]/g,"RPAREN").replace(/,/g,"COMMA").replace(/!/g,"QMARK").replace(/==/g,"EQ").replace(/\+/g,"PLUS").replace(/-/g,"MINUS")}function f(t){const e=p(t);return"else"===e?"GUARD_else":"GUARD_"+e}function d(t){return t.states&&t.states.length>0}function m(t,e,n){return(t.states||[]).filter((t=>!(e&&"initial"==t.kind))).flatMap((t=>{var e=m(t,!0,n);return 0==e.length?[t]:n?[t].concat(e):e}))}function h(t){const e=t.name.replace(/\./g,"__DOT__");return function(t){return!t.region}(t.region)?e:`${h(t.region)}${n?".":"_"}${e}`}function g(s){if(s){var r=e.stateFullName(s),a=i.states[r];return a||(a={},i.states[r]=a,a.region=g(t),a.name=h(s),a.incoming=function(t){return v.filter((e=>e.target==t))}(s).map(y),a.outgoing=u(s).map(y),"choice"===s.kind?a.kind=void 0:"shallowHistory"===s.kind?l(s)?a.kind="choice":a.kind=void 0:a.kind=s.kind,a.doActivity=s.doActivity,a.internalTransitions={},[...Object.entries(s.region.internalTransitions||{}).map((([t,e])=>[`__FROM_PARENT__${s.region.name}_${t}`,e])),...Object.entries(s.internalTransitions||{})].map((([t,e])=>{const r=y(e);a.internalTransitions[t]=r,a.internalTransitions[t].isInternal=!0;const i=n?`__internal__${t}__`:`__internal__${s.name}__${t}__`;a.internalTransitions[t].name=i,a.internalTransitions[t].source=a,a.internalTransitions[t].target=a,a.internalTransitions[t].region=a,a.transitionByName=a.transitionByName||{},a.transitionByName[i]=r}))),a}}function _(t){var n="choice"===t.source.kind&&t.guard?`${f(t.guard)}`:t.trigger||"";return n.match(e.afterRegex)?n=c(o(t)):n.match(e.whenRegex),""==n?void 0:n}function y(n){const i=function(n){var i;function l(t){var e,n;n=""==t?void 0:t,i=(e=i)&&""!=e?n&&""!=n?`${e}\n${n}`:e:n&&""!=n?n:void 0}const p=e.fullState(n.source),d=e.fullState(n.target);let m=0;for(;m<p.length&&m<d.length&&p[m]===d[m]&&(n.source!=p[m]||n.isInternal);m++);if(p.splice(0,m),d.splice(0,m),!n.isInternal){l(function(t){var n="";return(u(t.source)||[]).filter((n=>t!=n&&(n.trigger||"").match(e.afterRegex))).forEach((t=>{var e=c(o(t));n=`resetTimer(${e}); ${n}`})),n}(n));for(const t of p.slice(0).reverse())l(t.exit||"")}if(l(n.effect||""),!n.isInternal){const i=d.map((n=>function(n){var i=n.entry||"";function l(){i&&(i+="\n")}if(n.region.states.some((t=>"shallowHistory"===t.kind))&&"shallowHistory"!==n.kind&&(l(),a=!0,i+=`_histories_['${e.stateFullName(n.region)}'] = '${n.name}';`),u(n).filter((t=>(t.trigger||"").match(e.afterRegex))).forEach((t=>{var e=o(t),n=c(e);l(),i+=`setTimer(${n}, "${e}");`})),"choice"===n.kind){l();let e=!0;for(const a of(0,s.MR)(n.outgoing,(t=>"else"===t.guard))){e?e=!1:i+=" else ","else"!==a.guard&&(i+=`if(${a.guard??!1}) `);const s="";let o="";if(a.guard){const e=n.incoming[0].trigger;if(e){var p;const n=(0,r.Le)(e),s=null===(p=t.operationByName)||void 0===p?void 0:p[n];var d;s&&(o=(null===(d=s.parameters)||void 0===d?void 0:d.map((t=>`params.${t.name}`)).join(","))??"",t.operationByName[f(a.guard)]={parameters:s.parameters})}}a.guard&&(i+=`{${s}${f(a.guard)}(${o});}`)}}return i}(n)));n.lastEffect&&i.splice(-1,0,n.lastEffect);for(const t of i)l(t)}return""==i?void 0:i}(n);return{region:g(n.region),name:n.name,source:g(n.source),target:g(n.target),trigger:_(n),ports:n.ports,guard:"choice"==n.source.kind?void 0:n.guard,effect:i}}var b={};i.states[e.stateFullName(t)]=b;var v=[t,...m(t,!0,!0)].flatMap((s=>{return i=t,((r=s).transitions||[]).flatMap((t=>{var s=d(t.target)?e.getInitial(t.target).outgoing[0].target:t.target;let a=t.effect;const o=d(t.target)?e.getInitial(t.target).outgoing[0].effect:void 0;if("initial"===t.source.kind){if(i&&r==i){let e=t.source;return[{region:i||r,name:h(t),source:e,target:s,trigger:t.trigger,ports:t.ports,guard:t.guard,effect:a,lastEffect:o}]}return[]}if(d(t.source))return m(t.source,!0).filter((t=>!t.kind)).map(((e,c)=>({region:i||r,name:`${h(t)}${n?"":`_${c}`}`,source:e,target:"shallowHistory"==s.kind&&s.region==e.region?e:s,trigger:t.trigger,ports:t.ports,guard:t.guard,effect:a,lastEffect:o})));{let e=t.source;return[{region:i||r,name:h(t),source:e,target:s,trigger:t.trigger,ports:t.ports,guard:t.guard,effect:a,lastEffect:o}]}}));var r,i}));b.name=t.name,b.type=t.type,b.isActor=t.isActor,b.isObserver=t.isObserver,b.class=t.class,b.states=m(t).map(g),b.transitions=b.states.flatMap((t=>t.outgoing)),b.operationByName={...t.operationByName},b.operations=Object.values(b.operationByName);for(const[t,e]of Object.entries(b.operationByName))e.name=t;return b.propertyByName={...t.propertyByName},a&&(b.propertyByName._histories_={defaultValue:{},type:"Map<String,String>"}),n||(b.stateByName=Object.fromEntries(b.states.map((t=>[t.name,t]))),b.transitionByName=Object.fromEntries(b.transitions.map((t=>[t.name,t])))),b}},9625:(t,e,n)=>{"use strict";function s(t,e){return(t=t[0])<(e=e[0])?-1:t>e?1:0}function r(t){return Array.from(new Set(t))}function i(t){return t[t.length-1]}function a(t,e="    "){var n;const s=null===(n=t)||void 0===n?void 0:n.trim().split("\n");if((null==s?void 0:s.length)>0){const e=s[""===s[0]&&s.length>1?1:0].replace(/[^ \t].*$/,""),n=new RegExp(`^${e}`);t=s.map((t=>t.replace(n,""))).join("\n")}const r=t&&t.replace(/\\/g,"\\\\").replace(/\n/g,"\\n"+e).replace(/{/g,"<U+007B>").replace(/}/g,"<U+007D>").replace(/\\n/g,"\\l").replace(/__/g,"~__");return null==r?void 0:r.trimEnd()}function o(t,e){return t.map(((t,n)=>[t,e[n]]))}function c(t,e){var n,s,r,i=0;return(n=t.split(""),s=e.split(""),r=(t,e,n)=>t===e,o(n,s).map((([t,e],n)=>r(t,e)))).every((t=>t&&++i)),[t.slice(i),e.slice(i)]}function l(t,e){if(t)for(const[n,s]of Object.entries(t))e(n,s)}async function u(t,e){if(t)for(const[n,s]of Object.entries(t))await e(n,s)}async function p(t,e){for(const n of t)await e(n)}function f(t){return t&&t.length&&t.length>0}function d(t,e){var n=t.indexOf(e);n>=0&&t.splice(n,1)}function m(t,e){return t.reduce(((t,n)=>{const s=e(n);return{...t,[s]:(t[s]||[]).concat([n])}}),{})}function h(t,e){return t.sort(((t,n)=>{const s=e(t),r=e(n);return s<r?-1:s>r?1:0}))}async function g(t,e){const n=[];for(const s of t)n.push(await e(s));return n}function _(t){return t[0].toUpperCase()+t.slice(1)}n.d(e,{$Q:()=>c,$R:()=>o,Ic:()=>u,LI:()=>l,MR:()=>h,Mo:()=>p,Od:()=>d,Tw:()=>r,Xq:()=>f,Z$:()=>i,Z5:()=>_,hN:()=>s,sz:()=>g,uB:()=>a,vM:()=>m})},490:(t,e,n)=>{"use strict";n.d(e,{R3:()=>s});const s={async connect({url:t="ws://localhost:10015",onclose:e}={}){var n,s;if((null===(n=this.ws)||void 0===n?void 0:n.readyState)!==WebSocket.OPEN)return this.onclose=void 0,null===(s=this.ws)||void 0===s||s.close(),this.onclose=e,new Promise((async(e,n)=>{const s=new WebSocket(t);this.ws=s,s.onerror=t=>{this.onclose=void 0,n(t)};const r=[];s.onclose=()=>{var t;null===(t=this.onclose)||void 0===t||t.call(this)},s.onmessage=t=>{const{resolve:e}=r.shift();e(t.data)},s.onopen=()=>{this.close=()=>{s.close()},this.send=(t,e,n=0,r=0,i=0)=>{const a=`${t},${e},${n},${r},${i}`;s.send(a)},this.setLeftSpeed=t=>{this.send(2,1,0,t)},this.setRightSpeed=t=>{this.send(2,1,1,t)},this.setSpeed=t=>{this.send(2,1,2,t)},this.resetLeftEncoder=()=>{this.send(2,4,0)},this.resetRightEncoder=()=>{this.send(2,4,1)},this.getEvents=async()=>{const t=async function(){return new Promise(((t,e)=>{r.push({resolve:t,reject:e})}))}();return this.send(2,3),t},this.setLed=t=>{this.send(2,7,0,0,t)},this.setLedOff=()=>{this.setLed(0)},this.setLedRed=()=>{this.setLed(1)},this.setLedGreen=()=>{this.setLed(2)},this.setLedBlue=()=>{this.setLed(3)},this.resetWorld=()=>{s.send("ResetWorld")},e()}}))}}},3284:(t,e,n)=>{"use strict";n.d(e,{Tb:()=>es,DH:()=>is,xf:()=>rs});var s={};n.r(s),n.d(s,{BOM:()=>On,DOCUMENT:()=>xn,FLOW_END:()=>Tn,SCALAR:()=>kn,createScalarToken:()=>dn,isCollection:()=>An,isScalar:()=>Cn,prettyToken:()=>Nn,resolveAsScalar:()=>fn,setScalarValue:()=>mn,stringify:()=>_n,tokenType:()=>jn,visit:()=>$n});var r={};n.r(r),n.d(r,{Alias:()=>Q,CST:()=>s,Composer:()=>pn,Document:()=>Pe,Lexer:()=>Rn,LineCounter:()=>qn,Pair:()=>At,Parser:()=>Hn,Scalar:()=>et,Schema:()=>Le,YAMLError:()=>Be,YAMLMap:()=>Lt,YAMLParseError:()=>Re,YAMLSeq:()=>Dt,YAMLWarning:()=>qe,isAlias:()=>x,isCollection:()=>j,isDocument:()=>T,isMap:()=>k,isNode:()=>M,isPair:()=>A,isScalar:()=>C,isSeq:()=>N,parse:()=>Xn,parseAllDocuments:()=>Jn,parseDocument:()=>Yn,stringify:()=>Qn,visit:()=>D,visitAsync:()=>R});var i=n(7428),a=n(4057),o=n(4985),c=n(9317),l=n(8113),u=n(7463);globalThis["./ContextualEval.cjs"],n(5125);var p=n(9850),f=n(9625),d=n(5730);const m=globalThis.NODE_FETCH;var h=n(9416);function g(t,e){const n={};for(const r of e){const e=r.match(/^([^.]+)[.](.*)$/);if(e){var s;const[,r,i]=e,a=null===(s=t.getObject(r))||void 0===s?void 0:s.class;(n[a]??(n[a]=[])).push(i)}}return n}function _(t,e){var n;return t.isActive(e)||(null===(n=e.stereotypes)||void 0===n?void 0:n.includes("active"))}function y(t,e){return t.isActive(e)?e:t.objects.find((t=>t.class===e.name))}const b=Symbol.for("yaml.alias"),v=Symbol.for("yaml.document"),E=Symbol.for("yaml.map"),w=Symbol.for("yaml.pair"),$=Symbol.for("yaml.scalar"),S=Symbol.for("yaml.seq"),O=Symbol.for("yaml.node.type"),x=t=>!!t&&"object"==typeof t&&t[O]===b,T=t=>!!t&&"object"==typeof t&&t[O]===v,k=t=>!!t&&"object"==typeof t&&t[O]===E,A=t=>!!t&&"object"==typeof t&&t[O]===w,C=t=>!!t&&"object"==typeof t&&t[O]===$,N=t=>!!t&&"object"==typeof t&&t[O]===S;function j(t){if(t&&"object"==typeof t)switch(t[O]){case E:case S:return!0}return!1}function M(t){if(t&&"object"==typeof t)switch(t[O]){case b:case E:case $:case S:return!0}return!1}const I=Symbol("break visit"),L=Symbol("skip children"),P=Symbol("remove node");function D(t,e){const n=U(e);T(t)?B(null,t.contents,n,Object.freeze([t]))===P&&(t.contents=null):B(null,t,n,Object.freeze([]))}function B(t,e,n,s){const r=F(t,e,n,s);if(M(r)||A(r))return K(t,s,r),B(t,r,n,s);if("symbol"!=typeof r)if(j(e)){s=Object.freeze(s.concat(e));for(let t=0;t<e.items.length;++t){const r=B(t,e.items[t],n,s);if("number"==typeof r)t=r-1;else{if(r===I)return I;r===P&&(e.items.splice(t,1),t-=1)}}}else if(A(e)){s=Object.freeze(s.concat(e));const t=B("key",e.key,n,s);if(t===I)return I;t===P&&(e.key=null);const r=B("value",e.value,n,s);if(r===I)return I;r===P&&(e.value=null)}return r}async function R(t,e){const n=U(e);T(t)?await q(null,t.contents,n,Object.freeze([t]))===P&&(t.contents=null):await q(null,t,n,Object.freeze([]))}async function q(t,e,n,s){const r=await F(t,e,n,s);if(M(r)||A(r))return K(t,s,r),q(t,r,n,s);if("symbol"!=typeof r)if(j(e)){s=Object.freeze(s.concat(e));for(let t=0;t<e.items.length;++t){const r=await q(t,e.items[t],n,s);if("number"==typeof r)t=r-1;else{if(r===I)return I;r===P&&(e.items.splice(t,1),t-=1)}}}else if(A(e)){s=Object.freeze(s.concat(e));const t=await q("key",e.key,n,s);if(t===I)return I;t===P&&(e.key=null);const r=await q("value",e.value,n,s);if(r===I)return I;r===P&&(e.value=null)}return r}function U(t){return"object"==typeof t&&(t.Collection||t.Node||t.Value)?Object.assign({Alias:t.Node,Map:t.Node,Scalar:t.Node,Seq:t.Node},t.Value&&{Map:t.Value,Scalar:t.Value,Seq:t.Value},t.Collection&&{Map:t.Collection,Seq:t.Collection},t):t}function F(t,e,n,s){return"function"==typeof n?n(t,e,s):k(e)?n.Map?.(t,e,s):N(e)?n.Seq?.(t,e,s):A(e)?n.Pair?.(t,e,s):C(e)?n.Scalar?.(t,e,s):x(e)?n.Alias?.(t,e,s):void 0}function K(t,e,n){const s=e[e.length-1];if(j(s))s.items[t]=n;else if(A(s))"key"===t?s.key=n:s.value=n;else{if(!T(s)){const t=x(s)?"alias":"scalar";throw new Error(`Cannot replace node with ${t} parent`)}s.contents=n}}D.BREAK=I,D.SKIP=L,D.REMOVE=P,R.BREAK=I,R.SKIP=L,R.REMOVE=P;const W={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"};class G{constructor(t,e){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},G.defaultYaml,t),this.tags=Object.assign({},G.defaultTags,e)}clone(){const t=new G(this.yaml,this.tags);return t.docStart=this.docStart,t}atDocument(){const t=new G(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:G.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},G.defaultTags)}return t}add(t,e){this.atNextDocument&&(this.yaml={explicit:G.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},G.defaultTags),this.atNextDocument=!1);const n=t.trim().split(/[ \t]+/),s=n.shift();switch(s){case"%TAG":{if(2!==n.length&&(e(0,"%TAG directive should contain exactly two parts"),n.length<2))return!1;const[t,s]=n;return this.tags[t]=s,!0}case"%YAML":{if(this.yaml.explicit=!0,1!==n.length)return e(0,"%YAML directive should contain exactly one part"),!1;const[t]=n;return"1.1"===t||"1.2"===t?(this.yaml.version=t,!0):(e(6,`Unsupported YAML version ${t}`,/^\d+\.\d+$/.test(t)),!1)}default:return e(0,`Unknown directive ${s}`,!0),!1}}tagName(t,e){if("!"===t)return"!";if("!"!==t[0])return e(`Not a valid tag: ${t}`),null;if("<"===t[1]){const n=t.slice(2,-1);return"!"===n||"!!"===n?(e(`Verbatim tags aren't resolved, so ${t} is invalid.`),null):(">"!==t[t.length-1]&&e("Verbatim tags must end with a >"),n)}const[,n,s]=t.match(/^(.*!)([^!]*)$/s);s||e(`The ${t} tag has no suffix`);const r=this.tags[n];if(r)try{return r+decodeURIComponent(s)}catch(t){return e(String(t)),null}return"!"===n?t:(e(`Could not resolve tag: ${t}`),null)}tagString(t){for(const[e,n]of Object.entries(this.tags))if(t.startsWith(n))return e+t.substring(n.length).replace(/[!,[\]{}]/g,(t=>W[t]));return"!"===t[0]?t:`!<${t}>`}toString(t){const e=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],n=Object.entries(this.tags);let s;if(t&&n.length>0&&M(t.contents)){const e={};D(t.contents,((t,n)=>{M(n)&&n.tag&&(e[n.tag]=!0)})),s=Object.keys(e)}else s=[];for(const[r,i]of n)"!!"===r&&"tag:yaml.org,2002:"===i||t&&!s.some((t=>t.startsWith(i)))||e.push(`%TAG ${r} ${i}`);return e.join("\n")}}function V(t){if(/[\x00-\x19\s,[\]{}]/.test(t)){const e=JSON.stringify(t);throw new Error(`Anchor must not contain whitespace or control characters: ${e}`)}return!0}function H(t){const e=new Set;return D(t,{Value(t,n){n.anchor&&e.add(n.anchor)}}),e}function z(t,e){for(let n=1;;++n){const s=`${t}${n}`;if(!e.has(s))return s}}function J(t,e,n,s){if(s&&"object"==typeof s)if(Array.isArray(s))for(let e=0,n=s.length;e<n;++e){const n=s[e],r=J(t,s,String(e),n);void 0===r?delete s[e]:r!==n&&(s[e]=r)}else if(s instanceof Map)for(const e of Array.from(s.keys())){const n=s.get(e),r=J(t,s,e,n);void 0===r?s.delete(e):r!==n&&s.set(e,r)}else if(s instanceof Set)for(const e of Array.from(s)){const n=J(t,s,e,e);void 0===n?s.delete(e):n!==e&&(s.delete(e),s.add(n))}else for(const[e,n]of Object.entries(s)){const r=J(t,s,e,n);void 0===r?delete s[e]:r!==n&&(s[e]=r)}return t.call(e,n,s)}function Y(t,e,n){if(Array.isArray(t))return t.map(((t,e)=>Y(t,String(e),n)));if(t&&"function"==typeof t.toJSON){if(!n||!C(s=t)&&!j(s)||!s.anchor)return t.toJSON(e,n);const r={aliasCount:0,count:1,res:void 0};n.anchors.set(t,r),n.onCreate=t=>{r.res=t,delete n.onCreate};const i=t.toJSON(e,n);return n.onCreate&&n.onCreate(i),i}var s;return"bigint"!=typeof t||n?.keep?t:Number(t)}G.defaultYaml={explicit:!1,version:"1.2"},G.defaultTags={"!!":"tag:yaml.org,2002:"};class X{constructor(t){Object.defineProperty(this,O,{value:t})}clone(){const t=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(t.range=this.range.slice()),t}toJS(t,{mapAsMap:e,maxAliasCount:n,onAnchor:s,reviver:r}={}){if(!T(t))throw new TypeError("A document argument is required");const i={anchors:new Map,doc:t,keep:!0,mapAsMap:!0===e,mapKeyWarned:!1,maxAliasCount:"number"==typeof n?n:100},a=Y(this,"",i);if("function"==typeof s)for(const{count:t,res:e}of i.anchors.values())s(e,t);return"function"==typeof r?J(r,{"":a},"",a):a}}class Q extends X{constructor(t){super(b),this.source=t,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(t){let e;return D(t,{Node:(t,n)=>{if(n===this)return D.BREAK;n.anchor===this.source&&(e=n)}}),e}toJSON(t,e){if(!e)return{source:this.source};const{anchors:n,doc:s,maxAliasCount:r}=e,i=this.resolve(s);if(!i){const t=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(t)}let a=n.get(i);if(a||(Y(i,null,e),a=n.get(i)),!a||void 0===a.res)throw new ReferenceError("This should not happen: Alias anchor was not resolved?");if(r>=0&&(a.count+=1,0===a.aliasCount&&(a.aliasCount=Z(s,i,n)),a.count*a.aliasCount>r))throw new ReferenceError("Excessive alias count indicates a resource exhaustion attack");return a.res}toString(t,e,n){const s=`*${this.source}`;if(t){if(V(this.source),t.options.verifyAliasOrder&&!t.anchors.has(this.source)){const t=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(t)}if(t.implicitKey)return`${s} `}return s}}function Z(t,e,n){if(x(e)){const s=e.resolve(t),r=n&&s&&n.get(s);return r?r.count*r.aliasCount:0}if(j(e)){let s=0;for(const r of e.items){const e=Z(t,r,n);e>s&&(s=e)}return s}if(A(e)){const s=Z(t,e.key,n),r=Z(t,e.value,n);return Math.max(s,r)}return 1}const tt=t=>!t||"function"!=typeof t&&"object"!=typeof t;class et extends X{constructor(t){super($),this.value=t}toJSON(t,e){return e?.keep?this.value:Y(this.value,t,e)}toString(){return String(this.value)}}function nt(t,e,n){if(T(t)&&(t=t.contents),M(t))return t;if(A(t)){const e=n.schema[E].createNode?.(n.schema,null,n);return e.items.push(t),e}(t instanceof String||t instanceof Number||t instanceof Boolean||"undefined"!=typeof BigInt&&t instanceof BigInt)&&(t=t.valueOf());const{aliasDuplicateObjects:s,onAnchor:r,onTagObj:i,schema:a,sourceObjects:o}=n;let c;if(s&&t&&"object"==typeof t){if(c=o.get(t),c)return c.anchor||(c.anchor=r(t)),new Q(c.anchor);c={anchor:null,node:null},o.set(t,c)}e?.startsWith("!!")&&(e="tag:yaml.org,2002:"+e.slice(2));let l=function(t,e,n){if(e){const t=n.filter((t=>t.tag===e)),s=t.find((t=>!t.format))??t[0];if(!s)throw new Error(`Tag ${e} not found`);return s}return n.find((e=>e.identify?.(t)&&!e.format))}(t,e,a.tags);if(!l){if(t&&"function"==typeof t.toJSON&&(t=t.toJSON()),!t||"object"!=typeof t){const e=new et(t);return c&&(c.node=e),e}l=t instanceof Map?a[E]:Symbol.iterator in Object(t)?a[S]:a[E]}i&&(i(l),delete n.onTagObj);const u=l?.createNode?l.createNode(n.schema,t,n):"function"==typeof l?.nodeClass?.from?l.nodeClass.from(n.schema,t,n):new et(t);return e?u.tag=e:l.default||(u.tag=l.tag),c&&(c.node=u),u}function st(t,e,n){let s=n;for(let t=e.length-1;t>=0;--t){const n=e[t];if("number"==typeof n&&Number.isInteger(n)&&n>=0){const t=[];t[n]=s,s=t}else s=new Map([[n,s]])}return nt(s,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:t,sourceObjects:new Map})}et.BLOCK_FOLDED="BLOCK_FOLDED",et.BLOCK_LITERAL="BLOCK_LITERAL",et.PLAIN="PLAIN",et.QUOTE_DOUBLE="QUOTE_DOUBLE",et.QUOTE_SINGLE="QUOTE_SINGLE";const rt=t=>null==t||"object"==typeof t&&!!t[Symbol.iterator]().next().done;class it extends X{constructor(t,e){super(t),Object.defineProperty(this,"schema",{value:e,configurable:!0,enumerable:!1,writable:!0})}clone(t){const e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return t&&(e.schema=t),e.items=e.items.map((e=>M(e)||A(e)?e.clone(t):e)),this.range&&(e.range=this.range.slice()),e}addIn(t,e){if(rt(t))this.add(e);else{const[n,...s]=t,r=this.get(n,!0);if(j(r))r.addIn(s,e);else{if(void 0!==r||!this.schema)throw new Error(`Expected YAML collection at ${n}. Remaining path: ${s}`);this.set(n,st(this.schema,s,e))}}}deleteIn(t){const[e,...n]=t;if(0===n.length)return this.delete(e);const s=this.get(e,!0);if(j(s))return s.deleteIn(n);throw new Error(`Expected YAML collection at ${e}. Remaining path: ${n}`)}getIn(t,e){const[n,...s]=t,r=this.get(n,!0);return 0===s.length?!e&&C(r)?r.value:r:j(r)?r.getIn(s,e):void 0}hasAllNullValues(t){return this.items.every((e=>{if(!A(e))return!1;const n=e.value;return null==n||t&&C(n)&&null==n.value&&!n.commentBefore&&!n.comment&&!n.tag}))}hasIn(t){const[e,...n]=t;if(0===n.length)return this.has(e);const s=this.get(e,!0);return!!j(s)&&s.hasIn(n)}setIn(t,e){const[n,...s]=t;if(0===s.length)this.set(n,e);else{const t=this.get(n,!0);if(j(t))t.setIn(s,e);else{if(void 0!==t||!this.schema)throw new Error(`Expected YAML collection at ${n}. Remaining path: ${s}`);this.set(n,st(this.schema,s,e))}}}}it.maxFlowStringSingleLineLength=60;const at=t=>t.replace(/^(?!$)(?: $)?/gm,"#");function ot(t,e){return/^\n+$/.test(t)?t.substring(1):e?t.replace(/^(?! *$)/gm,e):t}const ct=(t,e,n)=>t.endsWith("\n")?ot(n,e):n.includes("\n")?"\n"+ot(n,e):(t.endsWith(" ")?"":" ")+n,lt="flow",ut="block",pt="quoted";function ft(t,e,n="flow",{indentAtStart:s,lineWidth:r=80,minContentWidth:i=20,onFold:a,onOverflow:o}={}){if(!r||r<0)return t;const c=Math.max(1+i,1+r-e.length);if(t.length<=c)return t;const l=[],u={};let p,f,d=r-e.length;"number"==typeof s&&(s>r-Math.max(2,i)?l.push(0):d=r-s);let m,h=!1,g=-1,_=-1,y=-1;for(n===ut&&(g=dt(t,g),-1!==g&&(d=g+c));m=t[g+=1];){if(n===pt&&"\\"===m){switch(_=g,t[g+1]){case"x":g+=3;break;case"u":g+=5;break;case"U":g+=9;break;default:g+=1}y=g}if("\n"===m)n===ut&&(g=dt(t,g)),d=g+c,p=void 0;else{if(" "===m&&f&&" "!==f&&"\n"!==f&&"\t"!==f){const e=t[g+1];e&&" "!==e&&"\n"!==e&&"\t"!==e&&(p=g)}if(g>=d)if(p)l.push(p),d=p+c,p=void 0;else if(n===pt){for(;" "===f||"\t"===f;)f=m,m=t[g+=1],h=!0;const e=g>y+1?g-2:_-1;if(u[e])return t;l.push(e),u[e]=!0,d=e+c,p=void 0}else h=!0}f=m}if(h&&o&&o(),0===l.length)return t;a&&a();let b=t.slice(0,l[0]);for(let s=0;s<l.length;++s){const r=l[s],i=l[s+1]||t.length;0===r?b=`\n${e}${t.slice(0,i)}`:(n===pt&&u[r]&&(b+=`${t[r]}\\`),b+=`\n${e}${t.slice(r+1,i)}`)}return b}function dt(t,e){let n=t[e+1];for(;" "===n||"\t"===n;){do{n=t[e+=1]}while(n&&"\n"!==n);n=t[e+1]}return e}const mt=(t,e)=>({indentAtStart:e?t.indent.length:t.indentAtStart,lineWidth:t.options.lineWidth,minContentWidth:t.options.minContentWidth}),ht=t=>/^(%|---|\.\.\.)/m.test(t);function gt(t,e){const n=JSON.stringify(t);if(e.options.doubleQuotedAsJSON)return n;const{implicitKey:s}=e,r=e.options.doubleQuotedMinMultiLineLength,i=e.indent||(ht(t)?"  ":"");let a="",o=0;for(let t=0,e=n[t];e;e=n[++t])if(" "===e&&"\\"===n[t+1]&&"n"===n[t+2]&&(a+=n.slice(o,t)+"\\ ",t+=1,o=t,e="\\"),"\\"===e)switch(n[t+1]){case"u":{a+=n.slice(o,t);const e=n.substr(t+2,4);switch(e){case"0000":a+="\\0";break;case"0007":a+="\\a";break;case"000b":a+="\\v";break;case"001b":a+="\\e";break;case"0085":a+="\\N";break;case"00a0":a+="\\_";break;case"2028":a+="\\L";break;case"2029":a+="\\P";break;default:"00"===e.substr(0,2)?a+="\\x"+e.substr(2):a+=n.substr(t,6)}t+=5,o=t+1}break;case"n":if(s||'"'===n[t+2]||n.length<r)t+=1;else{for(a+=n.slice(o,t)+"\n\n";"\\"===n[t+2]&&"n"===n[t+3]&&'"'!==n[t+4];)a+="\n",t+=2;a+=i," "===n[t+2]&&(a+="\\"),t+=1,o=t+1}break;default:t+=1}return a=o?a+n.slice(o):n,s?a:ft(a,i,pt,mt(e,!1))}function _t(t,e){if(!1===e.options.singleQuote||e.implicitKey&&t.includes("\n")||/[ \t]\n|\n[ \t]/.test(t))return gt(t,e);const n=e.indent||(ht(t)?"  ":""),s="'"+t.replace(/'/g,"''").replace(/\n+/g,`$&\n${n}`)+"'";return e.implicitKey?s:ft(s,n,lt,mt(e,!1))}function yt(t,e){const{singleQuote:n}=e.options;let s;if(!1===n)s=gt;else{const e=t.includes('"'),r=t.includes("'");s=e&&!r?_t:r&&!e?gt:n?_t:gt}return s(t,e)}let bt;try{bt=new RegExp("(^|(?<!\n))\n+(?!\n|$)","g")}catch{bt=/\n+(?!\n|$)/g}function vt({comment:t,type:e,value:n},s,r,i){const{blockQuote:a,commentString:o,lineWidth:c}=s.options;if(!a||/\n[\t ]+$/.test(n)||/^\s*$/.test(n))return yt(n,s);const l=s.indent||(s.forceBlockIndent||ht(n)?"  ":""),u="literal"===a||"folded"!==a&&e!==et.BLOCK_FOLDED&&(e===et.BLOCK_LITERAL||!function(t,e,n){if(!e||e<0)return!1;const s=e-n,r=t.length;if(r<=s)return!1;for(let e=0,n=0;e<r;++e)if("\n"===t[e]){if(e-n>s)return!0;if(n=e+1,r-n<=s)return!1}return!0}(n,c,l.length));if(!n)return u?"|\n":">\n";let p,f;for(f=n.length;f>0;--f){const t=n[f-1];if("\n"!==t&&"\t"!==t&&" "!==t)break}let d=n.substring(f);const m=d.indexOf("\n");-1===m?p="-":n===d||m!==d.length-1?(p="+",i&&i()):p="",d&&(n=n.slice(0,-d.length),"\n"===d[d.length-1]&&(d=d.slice(0,-1)),d=d.replace(bt,`$&${l}`));let h,g=!1,_=-1;for(h=0;h<n.length;++h){const t=n[h];if(" "===t)g=!0;else{if("\n"!==t)break;_=h}}let y=n.substring(0,_<h?_+1:h);y&&(n=n.substring(y.length),y=y.replace(/\n+/g,`$&${l}`));let b=(u?"|":">")+(g?l?"2":"1":"")+p;return t&&(b+=" "+o(t.replace(/ ?[\r\n]+/g," ")),r&&r()),u?`${b}\n${l}${y}${n=n.replace(/\n+/g,`$&${l}`)}${d}`:`${b}\n${l}${ft(`${y}${n=n.replace(/\n+/g,"\n$&").replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${l}`)}${d}`,l,ut,mt(s,!0))}`}function Et(t,e,n,s){const{implicitKey:r,inFlow:i}=e,a="string"==typeof t.value?t:Object.assign({},t,{value:String(t.value)});let{type:o}=t;o!==et.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(a.value)&&(o=et.QUOTE_DOUBLE);const c=t=>{switch(t){case et.BLOCK_FOLDED:case et.BLOCK_LITERAL:return r||i?yt(a.value,e):vt(a,e,n,s);case et.QUOTE_DOUBLE:return gt(a.value,e);case et.QUOTE_SINGLE:return _t(a.value,e);case et.PLAIN:return function(t,e,n,s){const{type:r,value:i}=t,{actualString:a,implicitKey:o,indent:c,indentStep:l,inFlow:u}=e;if(o&&i.includes("\n")||u&&/[[\]{},]/.test(i))return yt(i,e);if(!i||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(i))return o||u||!i.includes("\n")?yt(i,e):vt(t,e,n,s);if(!o&&!u&&r!==et.PLAIN&&i.includes("\n"))return vt(t,e,n,s);if(ht(i)){if(""===c)return e.forceBlockIndent=!0,vt(t,e,n,s);if(o&&c===l)return yt(i,e)}const p=i.replace(/\n+/g,`$&\n${c}`);if(a){const t=t=>t.default&&"tag:yaml.org,2002:str"!==t.tag&&t.test?.test(p),{compat:n,tags:s}=e.doc.schema;if(s.some(t)||n?.some(t))return yt(i,e)}return o?p:ft(p,c,lt,mt(e,!1))}(a,e,n,s);default:return null}};let l=c(o);if(null===l){const{defaultKeyType:t,defaultStringType:n}=e.options,s=r&&t||n;if(l=c(s),null===l)throw new Error(`Unsupported default string type ${s}`)}return l}function wt(t,e){const n=Object.assign({blockQuote:!0,commentString:at,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},t.schema.toStringOptions,e);let s;switch(n.collectionStyle){case"block":s=!1;break;case"flow":s=!0;break;default:s=null}return{anchors:new Set,doc:t,flowCollectionPadding:n.flowCollectionPadding?" ":"",indent:"",indentStep:"number"==typeof n.indent?" ".repeat(n.indent):"  ",inFlow:s,options:n}}function $t(t,e,n,s){if(A(t))return t.toString(e,n,s);if(x(t)){if(e.doc.directives)return t.toString(e);if(e.resolvedAliases?.has(t))throw new TypeError("Cannot stringify circular structure without alias nodes");e.resolvedAliases?e.resolvedAliases.add(t):e.resolvedAliases=new Set([t]),t=t.resolve(e.doc)}let r;const i=M(t)?t:e.doc.createNode(t,{onTagObj:t=>r=t});r||(r=function(t,e){if(e.tag){const n=t.filter((t=>t.tag===e.tag));if(n.length>0)return n.find((t=>t.format===e.format))??n[0]}let n,s;if(C(e)){s=e.value;const r=t.filter((t=>t.identify?.(s)));n=r.find((t=>t.format===e.format))??r.find((t=>!t.format))}else s=e,n=t.find((t=>t.nodeClass&&s instanceof t.nodeClass));if(!n)throw new Error(`Tag not resolved for ${s?.constructor?.name??typeof s} value`);return n}(e.doc.schema.tags,i));const a=function(t,e,{anchors:n,doc:s}){if(!s.directives)return"";const r=[],i=(C(t)||j(t))&&t.anchor;i&&V(i)&&(n.add(i),r.push(`&${i}`));const a=t.tag?t.tag:e.default?null:e.tag;return a&&r.push(s.directives.tagString(a)),r.join(" ")}(i,r,e);a.length>0&&(e.indentAtStart=(e.indentAtStart??0)+a.length+1);const o="function"==typeof r.stringify?r.stringify(i,e,n,s):C(i)?Et(i,e,n,s):i.toString(e,n,s);return a?C(i)||"{"===o[0]||"["===o[0]?`${a} ${o}`:`${a}\n${e.indent}${o}`:o}function St(t,e){"debug"!==t&&"warn"!==t||("undefined"!=typeof process&&process.emitWarning?process.emitWarning(e):console.warn(e))}function Ot(t,e,{key:n,value:s}){if(t?.doc.schema.merge&&xt(n))if(s=x(s)?s.resolve(t.doc):s,N(s))for(const n of s.items)Tt(t,e,n);else if(Array.isArray(s))for(const n of s)Tt(t,e,n);else Tt(t,e,s);else{const r=Y(n,"",t);if(e instanceof Map)e.set(r,Y(s,r,t));else if(e instanceof Set)e.add(r);else{const i=function(t,e,n){if(null===e)return"";if("object"!=typeof e)return String(e);if(M(t)&&n?.doc){const e=wt(n.doc,{});e.anchors=new Set;for(const t of n.anchors.keys())e.anchors.add(t.anchor);e.inFlow=!0,e.inStringifyKey=!0;const s=t.toString(e);if(!n.mapKeyWarned){let t=JSON.stringify(s);t.length>40&&(t=t.substring(0,36)+'..."'),St(n.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${t}. Set mapAsMap: true to use object keys.`),n.mapKeyWarned=!0}return s}return JSON.stringify(e)}(n,r,t),a=Y(s,i,t);i in e?Object.defineProperty(e,i,{value:a,writable:!0,enumerable:!0,configurable:!0}):e[i]=a}}return e}const xt=t=>"<<"===t||C(t)&&"<<"===t.value&&(!t.type||t.type===et.PLAIN);function Tt(t,e,n){const s=t&&x(n)?n.resolve(t.doc):n;if(!k(s))throw new Error("Merge sources must be maps or map aliases");const r=s.toJSON(null,t,Map);for(const[t,n]of r)e instanceof Map?e.has(t)||e.set(t,n):e instanceof Set?e.add(t):Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0});return e}function kt(t,e,n){const s=nt(t,void 0,n),r=nt(e,void 0,n);return new At(s,r)}class At{constructor(t,e=null){Object.defineProperty(this,O,{value:w}),this.key=t,this.value=e}clone(t){let{key:e,value:n}=this;return M(e)&&(e=e.clone(t)),M(n)&&(n=n.clone(t)),new At(e,n)}toJSON(t,e){return Ot(e,e?.mapAsMap?new Map:{},this)}toString(t,e,n){return t?.doc?function({key:t,value:e},n,s,r){const{allNullValues:i,doc:a,indent:o,indentStep:c,options:{commentString:l,indentSeq:u,simpleKeys:p}}=n;let f=M(t)&&t.comment||null;if(p){if(f)throw new Error("With simple keys, key nodes cannot have comments");if(j(t))throw new Error("With simple keys, collection cannot be used as a key value")}let d=!p&&(!t||f&&null==e&&!n.inFlow||j(t)||(C(t)?t.type===et.BLOCK_FOLDED||t.type===et.BLOCK_LITERAL:"object"==typeof t));n=Object.assign({},n,{allNullValues:!1,implicitKey:!d&&(p||!i),indent:o+c});let m,h,g,_=!1,y=!1,b=$t(t,n,(()=>_=!0),(()=>y=!0));if(!d&&!n.inFlow&&b.length>1024){if(p)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");d=!0}if(n.inFlow){if(i||null==e)return _&&s&&s(),""===b?"?":d?`? ${b}`:b}else if(i&&!p||null==e&&d)return b=`? ${b}`,f&&!_?b+=ct(b,n.indent,l(f)):y&&r&&r(),b;_&&(f=null),d?(f&&(b+=ct(b,n.indent,l(f))),b=`? ${b}\n${o}:`):(b=`${b}:`,f&&(b+=ct(b,n.indent,l(f)))),M(e)?(m=!!e.spaceBefore,h=e.commentBefore,g=e.comment):(m=!1,h=null,g=null,e&&"object"==typeof e&&(e=a.createNode(e))),n.implicitKey=!1,d||f||!C(e)||(n.indentAtStart=b.length+1),y=!1,u||!(c.length>=2)||n.inFlow||d||!N(e)||e.flow||e.tag||e.anchor||(n.indent=n.indent.substring(2));let v=!1;const E=$t(e,n,(()=>v=!0),(()=>y=!0));let w=" ";if(f||m||h)w=m?"\n":"",h&&(w+=`\n${ot(l(h),n.indent)}`),""!==E||n.inFlow?w+=`\n${n.indent}`:"\n"===w&&(w="\n\n");else if(!d&&j(e)){const t=E[0],s=E.indexOf("\n"),r=-1!==s,i=n.inFlow??e.flow??0===e.items.length;if(r||!i){let e=!1;if(r&&("&"===t||"!"===t)){let n=E.indexOf(" ");"&"===t&&-1!==n&&n<s&&"!"===E[n+1]&&(n=E.indexOf(" ",n+1)),(-1===n||s<n)&&(e=!0)}e||(w=`\n${n.indent}`)}}else""!==E&&"\n"!==E[0]||(w="");return b+=w+E,n.inFlow?v&&s&&s():g&&!v?b+=ct(b,n.indent,l(g)):y&&r&&r(),b}(this,t,e,n):JSON.stringify(this)}}function Ct(t,e,n){return(e.inFlow??t.flow?jt:Nt)(t,e,n)}function Nt({comment:t,items:e},n,{blockItemPrefix:s,flowChars:r,itemIndent:i,onChompKeep:a,onComment:o}){const{indent:c,options:{commentString:l}}=n,u=Object.assign({},n,{indent:i,type:null});let p=!1;const f=[];for(let t=0;t<e.length;++t){const r=e[t];let a=null;if(M(r))!p&&r.spaceBefore&&f.push(""),Mt(n,f,r.commentBefore,p),r.comment&&(a=r.comment);else if(A(r)){const t=M(r.key)?r.key:null;t&&(!p&&t.spaceBefore&&f.push(""),Mt(n,f,t.commentBefore,p))}p=!1;let o=$t(r,u,(()=>a=null),(()=>p=!0));a&&(o+=ct(o,i,l(a))),p&&a&&(p=!1),f.push(s+o)}let d;if(0===f.length)d=r.start+r.end;else{d=f[0];for(let t=1;t<f.length;++t){const e=f[t];d+=e?`\n${c}${e}`:"\n"}}return t?(d+="\n"+ot(l(t),c),o&&o()):p&&a&&a(),d}function jt({comment:t,items:e},n,{flowChars:s,itemIndent:r,onComment:i}){const{indent:a,indentStep:o,flowCollectionPadding:c,options:{commentString:l}}=n;r+=o;const u=Object.assign({},n,{indent:r,inFlow:!0,type:null});let p=!1,f=0;const d=[];for(let t=0;t<e.length;++t){const s=e[t];let i=null;if(M(s))s.spaceBefore&&d.push(""),Mt(n,d,s.commentBefore,!1),s.comment&&(i=s.comment);else if(A(s)){const t=M(s.key)?s.key:null;t&&(t.spaceBefore&&d.push(""),Mt(n,d,t.commentBefore,!1),t.comment&&(p=!0));const e=M(s.value)?s.value:null;e?(e.comment&&(i=e.comment),e.commentBefore&&(p=!0)):null==s.value&&t?.comment&&(i=t.comment)}i&&(p=!0);let a=$t(s,u,(()=>i=null));t<e.length-1&&(a+=","),i&&(a+=ct(a,r,l(i))),!p&&(d.length>f||a.includes("\n"))&&(p=!0),d.push(a),f=d.length}let m;const{start:h,end:g}=s;if(0===d.length)m=h+g;else if(p||(p=d.reduce(((t,e)=>t+e.length+2),2)>it.maxFlowStringSingleLineLength),p){m=h;for(const t of d)m+=t?`\n${o}${a}${t}`:"\n";m+=`\n${a}${g}`}else m=`${h}${c}${d.join(" ")}${c}${g}`;return t&&(m+=ct(m,a,l(t)),i&&i()),m}function Mt({indent:t,options:{commentString:e}},n,s,r){if(s&&r&&(s=s.replace(/^\n+/,"")),s){const r=ot(e(s),t);n.push(r.trimStart())}}function It(t,e){const n=C(e)?e.value:e;for(const s of t)if(A(s)){if(s.key===e||s.key===n)return s;if(C(s.key)&&s.key.value===n)return s}}class Lt extends it{static get tagName(){return"tag:yaml.org,2002:map"}constructor(t){super(E,t),this.items=[]}static from(t,e,n){const{keepUndefined:s,replacer:r}=n,i=new this(t),a=(t,a)=>{if("function"==typeof r)a=r.call(e,t,a);else if(Array.isArray(r)&&!r.includes(t))return;(void 0!==a||s)&&i.items.push(kt(t,a,n))};if(e instanceof Map)for(const[t,n]of e)a(t,n);else if(e&&"object"==typeof e)for(const t of Object.keys(e))a(t,e[t]);return"function"==typeof t.sortMapEntries&&i.items.sort(t.sortMapEntries),i}add(t,e){let n;n=A(t)?t:t&&"object"==typeof t&&"key"in t?new At(t.key,t.value):new At(t,t?.value);const s=It(this.items,n.key),r=this.schema?.sortMapEntries;if(s){if(!e)throw new Error(`Key ${n.key} already set`);C(s.value)&&tt(n.value)?s.value.value=n.value:s.value=n.value}else if(r){const t=this.items.findIndex((t=>r(n,t)<0));-1===t?this.items.push(n):this.items.splice(t,0,n)}else this.items.push(n)}delete(t){const e=It(this.items,t);return!!e&&this.items.splice(this.items.indexOf(e),1).length>0}get(t,e){const n=It(this.items,t)?.value;return(!e&&C(n)?n.value:n)??void 0}has(t){return!!It(this.items,t)}set(t,e){this.add(new At(t,e),!0)}toJSON(t,e,n){const s=n?new n:e?.mapAsMap?new Map:{};e?.onCreate&&e.onCreate(s);for(const t of this.items)Ot(e,s,t);return s}toString(t,e,n){if(!t)return JSON.stringify(this);for(const t of this.items)if(!A(t))throw new Error(`Map items must all be pairs; found ${JSON.stringify(t)} instead`);return!t.allNullValues&&this.hasAllNullValues(!1)&&(t=Object.assign({},t,{allNullValues:!0})),Ct(this,t,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:t.indent||"",onChompKeep:n,onComment:e})}}const Pt={collection:"map",default:!0,nodeClass:Lt,tag:"tag:yaml.org,2002:map",resolve:(t,e)=>(k(t)||e("Expected a mapping for this tag"),t),createNode:(t,e,n)=>Lt.from(t,e,n)};class Dt extends it{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(t){super(S,t),this.items=[]}add(t){this.items.push(t)}delete(t){const e=Bt(t);return"number"==typeof e&&this.items.splice(e,1).length>0}get(t,e){const n=Bt(t);if("number"!=typeof n)return;const s=this.items[n];return!e&&C(s)?s.value:s}has(t){const e=Bt(t);return"number"==typeof e&&e<this.items.length}set(t,e){const n=Bt(t);if("number"!=typeof n)throw new Error(`Expected a valid index, not ${t}.`);const s=this.items[n];C(s)&&tt(e)?s.value=e:this.items[n]=e}toJSON(t,e){const n=[];e?.onCreate&&e.onCreate(n);let s=0;for(const t of this.items)n.push(Y(t,String(s++),e));return n}toString(t,e,n){return t?Ct(this,t,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(t.indent||"")+"  ",onChompKeep:n,onComment:e}):JSON.stringify(this)}static from(t,e,n){const{replacer:s}=n,r=new this(t);if(e&&Symbol.iterator in Object(e)){let t=0;for(let i of e){if("function"==typeof s){const n=e instanceof Set?i:String(t++);i=s.call(e,n,i)}r.items.push(nt(i,void 0,n))}}return r}}function Bt(t){let e=C(t)?t.value:t;return e&&"string"==typeof e&&(e=Number(e)),"number"==typeof e&&Number.isInteger(e)&&e>=0?e:null}const Rt={collection:"seq",default:!0,nodeClass:Dt,tag:"tag:yaml.org,2002:seq",resolve:(t,e)=>(N(t)||e("Expected a sequence for this tag"),t),createNode:(t,e,n)=>Dt.from(t,e,n)},qt={identify:t=>"string"==typeof t,default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify:(t,e,n,s)=>Et(t,e=Object.assign({actualString:!0},e),n,s)},Ut={identify:t=>null==t,createNode:()=>new et(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new et(null),stringify:({source:t},e)=>"string"==typeof t&&Ut.test.test(t)?t:e.options.nullStr},Ft={identify:t=>"boolean"==typeof t,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:t=>new et("t"===t[0]||"T"===t[0]),stringify:({source:t,value:e},n)=>t&&Ft.test.test(t)&&e===("t"===t[0]||"T"===t[0])?t:e?n.options.trueStr:n.options.falseStr};function Kt({format:t,minFractionDigits:e,tag:n,value:s}){if("bigint"==typeof s)return String(s);const r="number"==typeof s?s:Number(s);if(!isFinite(r))return isNaN(r)?".nan":r<0?"-.inf":".inf";let i=JSON.stringify(s);if(!t&&e&&(!n||"tag:yaml.org,2002:float"===n)&&/^\d/.test(i)){let t=i.indexOf(".");t<0&&(t=i.length,i+=".");let n=e-(i.length-t-1);for(;n-- >0;)i+="0"}return i}const Wt={identify:t=>"number"==typeof t,default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN))$/,resolve:t=>"nan"===t.slice(-3).toLowerCase()?NaN:"-"===t[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Kt},Gt={identify:t=>"number"==typeof t,default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t),stringify(t){const e=Number(t.value);return isFinite(e)?e.toExponential():Kt(t)}},Vt={identify:t=>"number"==typeof t,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(t){const e=new et(parseFloat(t)),n=t.indexOf(".");return-1!==n&&"0"===t[t.length-1]&&(e.minFractionDigits=t.length-n-1),e},stringify:Kt},Ht=t=>"bigint"==typeof t||Number.isInteger(t),zt=(t,e,n,{intAsBigInt:s})=>s?BigInt(t):parseInt(t.substring(e),n);function Jt(t,e,n){const{value:s}=t;return Ht(s)&&s>=0?n+s.toString(e):Kt(t)}const Yt={identify:t=>Ht(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(t,e,n)=>zt(t,2,8,n),stringify:t=>Jt(t,8,"0o")},Xt={identify:Ht,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(t,e,n)=>zt(t,0,10,n),stringify:Kt},Qt={identify:t=>Ht(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(t,e,n)=>zt(t,2,16,n),stringify:t=>Jt(t,16,"0x")},Zt=[Pt,Rt,qt,Ut,Ft,Yt,Xt,Qt,Wt,Gt,Vt];function te(t){return"bigint"==typeof t||Number.isInteger(t)}const ee=({value:t})=>JSON.stringify(t),ne=[Pt,Rt].concat([{identify:t=>"string"==typeof t,default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify:ee},{identify:t=>null==t,createNode:()=>new et(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:ee},{identify:t=>"boolean"==typeof t,default:!0,tag:"tag:yaml.org,2002:bool",test:/^true|false$/,resolve:t=>"true"===t,stringify:ee},{identify:te,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(t,e,{intAsBigInt:n})=>n?BigInt(t):parseInt(t,10),stringify:({value:t})=>te(t)?t.toString():JSON.stringify(t)},{identify:t=>"number"==typeof t,default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:t=>parseFloat(t),stringify:ee}],{default:!0,tag:"",test:/^/,resolve:(t,e)=>(e(`Unresolved plain scalar ${JSON.stringify(t)}`),t)}),se={identify:t=>t instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(t,e){if("function"==typeof Buffer)return Buffer.from(t,"base64");if("function"==typeof atob){const e=atob(t.replace(/[\n\r]/g,"")),n=new Uint8Array(e.length);for(let t=0;t<e.length;++t)n[t]=e.charCodeAt(t);return n}return e("This environment does not support reading binary tags; either Buffer or atob is required"),t},stringify({comment:t,type:e,value:n},s,r,i){const a=n;let o;if("function"==typeof Buffer)o=a instanceof Buffer?a.toString("base64"):Buffer.from(a.buffer).toString("base64");else{if("function"!=typeof btoa)throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");{let t="";for(let e=0;e<a.length;++e)t+=String.fromCharCode(a[e]);o=btoa(t)}}if(e||(e=et.BLOCK_LITERAL),e!==et.QUOTE_DOUBLE){const t=Math.max(s.options.lineWidth-s.indent.length,s.options.minContentWidth),n=Math.ceil(o.length/t),r=new Array(n);for(let e=0,s=0;e<n;++e,s+=t)r[e]=o.substr(s,t);o=r.join(e===et.BLOCK_LITERAL?"\n":" ")}return Et({comment:t,type:e,value:o},s,r,i)}};function re(t,e){if(N(t))for(let n=0;n<t.items.length;++n){let s=t.items[n];if(!A(s)){if(k(s)){s.items.length>1&&e("Each pair must have its own sequence indicator");const t=s.items[0]||new At(new et(null));if(s.commentBefore&&(t.key.commentBefore=t.key.commentBefore?`${s.commentBefore}\n${t.key.commentBefore}`:s.commentBefore),s.comment){const e=t.value??t.key;e.comment=e.comment?`${s.comment}\n${e.comment}`:s.comment}s=t}t.items[n]=A(s)?s:new At(s)}}else e("Expected a sequence for this tag");return t}function ie(t,e,n){const{replacer:s}=n,r=new Dt(t);r.tag="tag:yaml.org,2002:pairs";let i=0;if(e&&Symbol.iterator in Object(e))for(let t of e){let a,o;if("function"==typeof s&&(t=s.call(e,String(i++),t)),Array.isArray(t)){if(2!==t.length)throw new TypeError(`Expected [key, value] tuple: ${t}`);a=t[0],o=t[1]}else if(t&&t instanceof Object){const e=Object.keys(t);if(1!==e.length)throw new TypeError(`Expected tuple with one key, not ${e.length} keys`);a=e[0],o=t[a]}else a=t;r.items.push(kt(a,o,n))}return r}const ae={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:re,createNode:ie};class oe extends Dt{constructor(){super(),this.add=Lt.prototype.add.bind(this),this.delete=Lt.prototype.delete.bind(this),this.get=Lt.prototype.get.bind(this),this.has=Lt.prototype.has.bind(this),this.set=Lt.prototype.set.bind(this),this.tag=oe.tag}toJSON(t,e){if(!e)return super.toJSON(t);const n=new Map;e?.onCreate&&e.onCreate(n);for(const t of this.items){let s,r;if(A(t)?(s=Y(t.key,"",e),r=Y(t.value,s,e)):s=Y(t,"",e),n.has(s))throw new Error("Ordered maps must not include duplicate keys");n.set(s,r)}return n}static from(t,e,n){const s=ie(t,e,n),r=new this;return r.items=s.items,r}}oe.tag="tag:yaml.org,2002:omap";const ce={collection:"seq",identify:t=>t instanceof Map,nodeClass:oe,default:!1,tag:"tag:yaml.org,2002:omap",resolve(t,e){const n=re(t,e),s=[];for(const{key:t}of n.items)C(t)&&(s.includes(t.value)?e(`Ordered maps must not include duplicate keys: ${t.value}`):s.push(t.value));return Object.assign(new oe,n)},createNode:(t,e,n)=>oe.from(t,e,n)};function le({value:t,source:e},n){return e&&(t?ue:pe).test.test(e)?e:t?n.options.trueStr:n.options.falseStr}const ue={identify:t=>!0===t,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new et(!0),stringify:le},pe={identify:t=>!1===t,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/i,resolve:()=>new et(!1),stringify:le},fe={identify:t=>"number"==typeof t,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN)$/,resolve:t=>"nan"===t.slice(-3).toLowerCase()?NaN:"-"===t[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Kt},de={identify:t=>"number"==typeof t,default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t.replace(/_/g,"")),stringify(t){const e=Number(t.value);return isFinite(e)?e.toExponential():Kt(t)}},me={identify:t=>"number"==typeof t,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(t){const e=new et(parseFloat(t.replace(/_/g,""))),n=t.indexOf(".");if(-1!==n){const s=t.substring(n+1).replace(/_/g,"");"0"===s[s.length-1]&&(e.minFractionDigits=s.length)}return e},stringify:Kt},he=t=>"bigint"==typeof t||Number.isInteger(t);function ge(t,e,n,{intAsBigInt:s}){const r=t[0];if("-"!==r&&"+"!==r||(e+=1),t=t.substring(e).replace(/_/g,""),s){switch(n){case 2:t=`0b${t}`;break;case 8:t=`0o${t}`;break;case 16:t=`0x${t}`}const e=BigInt(t);return"-"===r?BigInt(-1)*e:e}const i=parseInt(t,n);return"-"===r?-1*i:i}function _e(t,e,n){const{value:s}=t;if(he(s)){const t=s.toString(e);return s<0?"-"+n+t.substr(1):n+t}return Kt(t)}const ye={identify:he,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(t,e,n)=>ge(t,2,2,n),stringify:t=>_e(t,2,"0b")},be={identify:he,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(t,e,n)=>ge(t,1,8,n),stringify:t=>_e(t,8,"0")},ve={identify:he,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(t,e,n)=>ge(t,0,10,n),stringify:Kt},Ee={identify:he,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(t,e,n)=>ge(t,2,16,n),stringify:t=>_e(t,16,"0x")};class we extends Lt{constructor(t){super(t),this.tag=we.tag}add(t){let e;e=A(t)?t:t&&"object"==typeof t&&"key"in t&&"value"in t&&null===t.value?new At(t.key,null):new At(t,null),It(this.items,e.key)||this.items.push(e)}get(t,e){const n=It(this.items,t);return!e&&A(n)?C(n.key)?n.key.value:n.key:n}set(t,e){if("boolean"!=typeof e)throw new Error("Expected boolean value for set(key, value) in a YAML set, not "+typeof e);const n=It(this.items,t);n&&!e?this.items.splice(this.items.indexOf(n),1):!n&&e&&this.items.push(new At(t))}toJSON(t,e){return super.toJSON(t,e,Set)}toString(t,e,n){if(!t)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},t,{allNullValues:!0}),e,n);throw new Error("Set items must all have null values")}static from(t,e,n){const{replacer:s}=n,r=new this(t);if(e&&Symbol.iterator in Object(e))for(let t of e)"function"==typeof s&&(t=s.call(e,t,t)),r.items.push(kt(t,null,n));return r}}we.tag="tag:yaml.org,2002:set";const $e={collection:"map",identify:t=>t instanceof Set,nodeClass:we,default:!1,tag:"tag:yaml.org,2002:set",createNode:(t,e,n)=>we.from(t,e,n),resolve(t,e){if(k(t)){if(t.hasAllNullValues(!0))return Object.assign(new we,t);e("Set items must all have null values")}else e("Expected a mapping for this tag");return t}};function Se(t,e){const n=t[0],s="-"===n||"+"===n?t.substring(1):t,r=t=>e?BigInt(t):Number(t),i=s.replace(/_/g,"").split(":").reduce(((t,e)=>t*r(60)+r(e)),r(0));return"-"===n?r(-1)*i:i}function Oe(t){let{value:e}=t,n=t=>t;if("bigint"==typeof e)n=t=>BigInt(t);else if(isNaN(e)||!isFinite(e))return Kt(t);let s="";e<0&&(s="-",e*=n(-1));const r=n(60),i=[e%r];return e<60?i.unshift(0):(e=(e-i[0])/r,i.unshift(e%r),e>=60&&(e=(e-i[0])/r,i.unshift(e))),s+i.map((t=>String(t).padStart(2,"0"))).join(":").replace(/000000\d*$/,"")}const xe={identify:t=>"bigint"==typeof t||Number.isInteger(t),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(t,e,{intAsBigInt:n})=>Se(t,n),stringify:Oe},Te={identify:t=>"number"==typeof t,default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:t=>Se(t,!1),stringify:Oe},ke={identify:t=>t instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(t){const e=t.match(ke.test);if(!e)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,n,s,r,i,a,o]=e.map(Number),c=e[7]?Number((e[7]+"00").substr(1,3)):0;let l=Date.UTC(n,s-1,r,i||0,a||0,o||0,c);const u=e[8];if(u&&"Z"!==u){let t=Se(u,!1);Math.abs(t)<30&&(t*=60),l-=6e4*t}return new Date(l)},stringify:({value:t})=>t.toISOString().replace(/((T00:00)?:00)?\.000Z$/,"")},Ae=[Pt,Rt,qt,Ut,ue,pe,ye,be,ve,Ee,fe,de,me,se,ce,ae,$e,xe,Te,ke],Ce=new Map([["core",Zt],["failsafe",[Pt,Rt,qt]],["json",ne],["yaml11",Ae],["yaml-1.1",Ae]]),Ne={binary:se,bool:Ft,float:Vt,floatExp:Gt,floatNaN:Wt,floatTime:Te,int:Xt,intHex:Qt,intOct:Yt,intTime:xe,map:Pt,null:Ut,omap:ce,pairs:ae,seq:Rt,set:$e,timestamp:ke},je={"tag:yaml.org,2002:binary":se,"tag:yaml.org,2002:omap":ce,"tag:yaml.org,2002:pairs":ae,"tag:yaml.org,2002:set":$e,"tag:yaml.org,2002:timestamp":ke};function Me(t,e){let n=Ce.get(e);if(!n){if(!Array.isArray(t)){const t=Array.from(Ce.keys()).filter((t=>"yaml11"!==t)).map((t=>JSON.stringify(t))).join(", ");throw new Error(`Unknown schema "${e}"; use one of ${t} or define customTags array`)}n=[]}if(Array.isArray(t))for(const e of t)n=n.concat(e);else"function"==typeof t&&(n=t(n.slice()));return n.map((t=>{if("string"!=typeof t)return t;const e=Ne[t];if(e)return e;const n=Object.keys(Ne).map((t=>JSON.stringify(t))).join(", ");throw new Error(`Unknown custom tag "${t}"; use one of ${n}`)}))}const Ie=(t,e)=>t.key<e.key?-1:t.key>e.key?1:0;class Le{constructor({compat:t,customTags:e,merge:n,resolveKnownTags:s,schema:r,sortMapEntries:i,toStringDefaults:a}){this.compat=Array.isArray(t)?Me(t,"compat"):t?Me(null,t):null,this.merge=!!n,this.name="string"==typeof r&&r||"core",this.knownTags=s?je:{},this.tags=Me(e,this.name),this.toStringOptions=a??null,Object.defineProperty(this,E,{value:Pt}),Object.defineProperty(this,$,{value:qt}),Object.defineProperty(this,S,{value:Rt}),this.sortMapEntries="function"==typeof i?i:!0===i?Ie:null}clone(){const t=Object.create(Le.prototype,Object.getOwnPropertyDescriptors(this));return t.tags=this.tags.slice(),t}}class Pe{constructor(t,e,n){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,O,{value:v});let s=null;"function"==typeof e||Array.isArray(e)?s=e:void 0===n&&e&&(n=e,e=void 0);const r=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,uniqueKeys:!0,version:"1.2"},n);this.options=r;let{version:i}=r;n?._directives?(this.directives=n._directives.atDocument(),this.directives.yaml.explicit&&(i=this.directives.yaml.version)):this.directives=new G({version:i}),this.setSchema(i,n),this.contents=void 0===t?null:this.createNode(t,s,n)}clone(){const t=Object.create(Pe.prototype,{[O]:{value:v}});return t.commentBefore=this.commentBefore,t.comment=this.comment,t.errors=this.errors.slice(),t.warnings=this.warnings.slice(),t.options=Object.assign({},this.options),this.directives&&(t.directives=this.directives.clone()),t.schema=this.schema.clone(),t.contents=M(this.contents)?this.contents.clone(t.schema):this.contents,this.range&&(t.range=this.range.slice()),t}add(t){De(this.contents)&&this.contents.add(t)}addIn(t,e){De(this.contents)&&this.contents.addIn(t,e)}createAlias(t,e){if(!t.anchor){const n=H(this);t.anchor=!e||n.has(e)?z(e||"a",n):e}return new Q(t.anchor)}createNode(t,e,n){let s;if("function"==typeof e)t=e.call({"":t},"",t),s=e;else if(Array.isArray(e)){const t=t=>"number"==typeof t||t instanceof String||t instanceof Number,n=e.filter(t).map(String);n.length>0&&(e=e.concat(n)),s=e}else void 0===n&&e&&(n=e,e=void 0);const{aliasDuplicateObjects:r,anchorPrefix:i,flow:a,keepUndefined:o,onTagObj:c,tag:l}=n??{},{onAnchor:u,setAnchors:p,sourceObjects:f}=function(t,e){const n=[],s=new Map;let r=null;return{onAnchor:s=>{n.push(s),r||(r=H(t));const i=z(e,r);return r.add(i),i},setAnchors:()=>{for(const t of n){const e=s.get(t);if("object"!=typeof e||!e.anchor||!C(e.node)&&!j(e.node)){const e=new Error("Failed to resolve repeated object (this should not happen)");throw e.source=t,e}e.node.anchor=e.anchor}},sourceObjects:s}}(this,i||"a"),d=nt(t,l,{aliasDuplicateObjects:r??!0,keepUndefined:o??!1,onAnchor:u,onTagObj:c,replacer:s,schema:this.schema,sourceObjects:f});return a&&j(d)&&(d.flow=!0),p(),d}createPair(t,e,n={}){const s=this.createNode(t,null,n),r=this.createNode(e,null,n);return new At(s,r)}delete(t){return!!De(this.contents)&&this.contents.delete(t)}deleteIn(t){return rt(t)?null!=this.contents&&(this.contents=null,!0):!!De(this.contents)&&this.contents.deleteIn(t)}get(t,e){return j(this.contents)?this.contents.get(t,e):void 0}getIn(t,e){return rt(t)?!e&&C(this.contents)?this.contents.value:this.contents:j(this.contents)?this.contents.getIn(t,e):void 0}has(t){return!!j(this.contents)&&this.contents.has(t)}hasIn(t){return rt(t)?void 0!==this.contents:!!j(this.contents)&&this.contents.hasIn(t)}set(t,e){null==this.contents?this.contents=st(this.schema,[t],e):De(this.contents)&&this.contents.set(t,e)}setIn(t,e){rt(t)?this.contents=e:null==this.contents?this.contents=st(this.schema,Array.from(t),e):De(this.contents)&&this.contents.setIn(t,e)}setSchema(t,e={}){let n;switch("number"==typeof t&&(t=String(t)),t){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new G({version:"1.1"}),n={merge:!0,resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=t:this.directives=new G({version:t}),n={merge:!1,resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,n=null;break;default:{const e=JSON.stringify(t);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${e}`)}}if(e.schema instanceof Object)this.schema=e.schema;else{if(!n)throw new Error("With a null YAML version, the { schema: Schema } option is required");this.schema=new Le(Object.assign(n,e))}}toJS({json:t,jsonArg:e,mapAsMap:n,maxAliasCount:s,onAnchor:r,reviver:i}={}){const a={anchors:new Map,doc:this,keep:!t,mapAsMap:!0===n,mapKeyWarned:!1,maxAliasCount:"number"==typeof s?s:100},o=Y(this.contents,e??"",a);if("function"==typeof r)for(const{count:t,res:e}of a.anchors.values())r(e,t);return"function"==typeof i?J(i,{"":o},"",o):o}toJSON(t,e){return this.toJS({json:!0,jsonArg:t,mapAsMap:!1,onAnchor:e})}toString(t={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in t&&(!Number.isInteger(t.indent)||Number(t.indent)<=0)){const e=JSON.stringify(t.indent);throw new Error(`"indent" option must be a positive integer, not ${e}`)}return function(t,e){const n=[];let s=!0===e.directives;if(!1!==e.directives&&t.directives){const e=t.directives.toString(t);e?(n.push(e),s=!0):t.directives.docStart&&(s=!0)}s&&n.push("---");const r=wt(t,e),{commentString:i}=r.options;if(t.commentBefore){1!==n.length&&n.unshift("");const e=i(t.commentBefore);n.unshift(ot(e,""))}let a=!1,o=null;if(t.contents){if(M(t.contents)){if(t.contents.spaceBefore&&s&&n.push(""),t.contents.commentBefore){const e=i(t.contents.commentBefore);n.push(ot(e,""))}r.forceBlockIndent=!!t.comment,o=t.contents.comment}const e=o?void 0:()=>a=!0;let c=$t(t.contents,r,(()=>o=null),e);o&&(c+=ct(c,"",i(o))),"|"!==c[0]&&">"!==c[0]||"---"!==n[n.length-1]?n.push(c):n[n.length-1]=`--- ${c}`}else n.push($t(t.contents,r));if(t.directives?.docEnd)if(t.comment){const e=i(t.comment);e.includes("\n")?(n.push("..."),n.push(ot(e,""))):n.push(`... ${e}`)}else n.push("...");else{let e=t.comment;e&&a&&(e=e.replace(/^\n+/,"")),e&&(a&&!o||""===n[n.length-1]||n.push(""),n.push(ot(i(e),"")))}return n.join("\n")+"\n"}(this,t)}}function De(t){if(j(t))return!0;throw new Error("Expected a YAML collection as document contents")}class Be extends Error{constructor(t,e,n,s){super(),this.name=t,this.code=n,this.message=s,this.pos=e}}class Re extends Be{constructor(t,e,n){super("YAMLParseError",t,e,n)}}class qe extends Be{constructor(t,e,n){super("YAMLWarning",t,e,n)}}const Ue=(t,e)=>n=>{if(-1===n.pos[0])return;n.linePos=n.pos.map((t=>e.linePos(t)));const{line:s,col:r}=n.linePos[0];n.message+=` at line ${s}, column ${r}`;let i=r-1,a=t.substring(e.lineStarts[s-1],e.lineStarts[s]).replace(/[\n\r]+$/,"");if(i>=60&&a.length>80){const t=Math.min(i-39,a.length-79);a="…"+a.substring(t),i-=t-1}if(a.length>80&&(a=a.substring(0,79)+"…"),s>1&&/^ *$/.test(a.substring(0,i))){let n=t.substring(e.lineStarts[s-2],e.lineStarts[s-1]);n.length>80&&(n=n.substring(0,79)+"…\n"),a=n+a}if(/[^ ]/.test(a)){let t=1;const e=n.linePos[1];e&&e.line===s&&e.col>r&&(t=Math.max(1,Math.min(e.col-r,80-i)));const o=" ".repeat(i)+"^".repeat(t);n.message+=`:\n\n${a}\n${o}\n`}};function Fe(t,{flow:e,indicator:n,next:s,offset:r,onError:i,startOnNewline:a}){let o=!1,c=a,l=a,u="",p="",f=!1,d=!1,m=!1,h=null,g=null,_=null,y=null,b=null;for(const s of t)switch(m&&("space"!==s.type&&"newline"!==s.type&&"comma"!==s.type&&i(s.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),m=!1),s.type){case"space":!e&&c&&"doc-start"!==n&&"\t"===s.source[0]&&i(s,"TAB_AS_INDENT","Tabs are not allowed as indentation"),l=!0;break;case"comment":{l||i(s,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const t=s.source.substring(1)||" ";u?u+=p+t:u=t,p="",c=!1;break}case"newline":c?u?u+=s.source:o=!0:p+=s.source,c=!0,f=!0,(h||g)&&(d=!0),l=!0;break;case"anchor":h&&i(s,"MULTIPLE_ANCHORS","A node can have at most one anchor"),s.source.endsWith(":")&&i(s.offset+s.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),h=s,null===b&&(b=s.offset),c=!1,l=!1,m=!0;break;case"tag":g&&i(s,"MULTIPLE_TAGS","A node can have at most one tag"),g=s,null===b&&(b=s.offset),c=!1,l=!1,m=!0;break;case n:(h||g)&&i(s,"BAD_PROP_ORDER",`Anchors and tags must be after the ${s.source} indicator`),y&&i(s,"UNEXPECTED_TOKEN",`Unexpected ${s.source} in ${e??"collection"}`),y=s,c=!1,l=!1;break;case"comma":if(e){_&&i(s,"UNEXPECTED_TOKEN",`Unexpected , in ${e}`),_=s,c=!1,l=!1;break}default:i(s,"UNEXPECTED_TOKEN",`Unexpected ${s.type} token`),c=!1,l=!1}const v=t[t.length-1],E=v?v.offset+v.source.length:r;return m&&s&&"space"!==s.type&&"newline"!==s.type&&"comma"!==s.type&&("scalar"!==s.type||""!==s.source)&&i(s.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),{comma:_,found:y,spaceBefore:o,comment:u,hasNewline:f,hasNewlineAfterProp:d,anchor:h,tag:g,end:E,start:b??E}}function Ke(t){if(!t)return null;switch(t.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(t.source.includes("\n"))return!0;if(t.end)for(const e of t.end)if("newline"===e.type)return!0;return!1;case"flow-collection":for(const e of t.items){for(const t of e.start)if("newline"===t.type)return!0;if(e.sep)for(const t of e.sep)if("newline"===t.type)return!0;if(Ke(e.key)||Ke(e.value))return!0}return!1;default:return!0}}function We(t,e,n){if("flow-collection"===e?.type){const s=e.end[0];s.indent!==t||"]"!==s.source&&"}"!==s.source||!Ke(e)||n(s,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}function Ge(t,e,n){const{uniqueKeys:s}=t.options;if(!1===s)return!1;const r="function"==typeof s?s:(e,n)=>e===n||C(e)&&C(n)&&e.value===n.value&&!("<<"===e.value&&t.schema.merge);return e.some((t=>r(t.key,n)))}const Ve="All mapping items must start at the same column";function He(t,e,n,s){let r="";if(t){let i=!1,a="";for(const o of t){const{source:t,type:c}=o;switch(c){case"space":i=!0;break;case"comment":{n&&!i&&s(o,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const e=t.substring(1)||" ";r?r+=a+e:r=e,a="";break}case"newline":r&&(a+=t),i=!0;break;default:s(o,"UNEXPECTED_TOKEN",`Unexpected ${c} at node end`)}e+=t.length}}return{comment:r,offset:e}}const ze="Block collections are not allowed within flow collections",Je=t=>t&&("block-map"===t.type||"block-seq"===t.type);function Ye(t,e,n,s,r,i){const a="block-map"===n.type?function({composeNode:t,composeEmptyNode:e},n,s,r,i){const a=new(i?.nodeClass??Lt)(n.schema);n.atRoot&&(n.atRoot=!1);let o=s.offset,c=null;for(const i of s.items){const{start:l,key:u,sep:p,value:f}=i,d=Fe(l,{indicator:"explicit-key-ind",next:u??p?.[0],offset:o,onError:r,startOnNewline:!0}),m=!d.found;if(m){if(u&&("block-seq"===u.type?r(o,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in u&&u.indent!==s.indent&&r(o,"BAD_INDENT",Ve)),!d.anchor&&!d.tag&&!p){c=d.end,d.comment&&(a.comment?a.comment+="\n"+d.comment:a.comment=d.comment);continue}(d.hasNewlineAfterProp||Ke(u))&&r(u??l[l.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else d.found?.indent!==s.indent&&r(o,"BAD_INDENT",Ve);const h=d.end,g=u?t(n,u,d,r):e(n,h,l,null,d,r);n.schema.compat&&We(s.indent,u,r),Ge(n,a.items,g)&&r(h,"DUPLICATE_KEY","Map keys must be unique");const _=Fe(p??[],{indicator:"map-value-ind",next:f,offset:g.range[2],onError:r,startOnNewline:!u||"block-scalar"===u.type});if(o=_.end,_.found){m&&("block-map"!==f?.type||_.hasNewline||r(o,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),n.options.strict&&d.start<_.found.offset-1024&&r(g.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));const c=f?t(n,f,_,r):e(n,o,p,null,_,r);n.schema.compat&&We(s.indent,f,r),o=c.range[2];const l=new At(g,c);n.options.keepSourceTokens&&(l.srcToken=i),a.items.push(l)}else{m&&r(g.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),_.comment&&(g.comment?g.comment+="\n"+_.comment:g.comment=_.comment);const t=new At(g);n.options.keepSourceTokens&&(t.srcToken=i),a.items.push(t)}}return c&&c<o&&r(c,"IMPOSSIBLE","Map comment with trailing content"),a.range=[s.offset,o,c??o],a}(t,e,n,s,i):"block-seq"===n.type?function({composeNode:t,composeEmptyNode:e},n,s,r,i){const a=new(i?.nodeClass??Dt)(n.schema);n.atRoot&&(n.atRoot=!1);let o=s.offset,c=null;for(const{start:i,value:l}of s.items){const u=Fe(i,{indicator:"seq-item-ind",next:l,offset:o,onError:r,startOnNewline:!0});if(!u.found){if(!(u.anchor||u.tag||l)){c=u.end,u.comment&&(a.comment=u.comment);continue}l&&"block-seq"===l.type?r(u.end,"BAD_INDENT","All sequence items must start at the same column"):r(o,"MISSING_CHAR","Sequence item without - indicator")}const p=l?t(n,l,u,r):e(n,u.end,i,null,u,r);n.schema.compat&&We(s.indent,l,r),o=p.range[2],a.items.push(p)}return a.range=[s.offset,o,c??o],a}(t,e,n,s,i):function({composeNode:t,composeEmptyNode:e},n,s,r,i){const a="{"===s.start.source,o=a?"flow map":"flow sequence",c=new(i?.nodeClass??(a?Lt:Dt))(n.schema);c.flow=!0;const l=n.atRoot;l&&(n.atRoot=!1);let u=s.offset+s.start.source.length;for(let i=0;i<s.items.length;++i){const l=s.items[i],{start:p,key:f,sep:d,value:m}=l,h=Fe(p,{flow:o,indicator:"explicit-key-ind",next:f??d?.[0],offset:u,onError:r,startOnNewline:!1});if(!h.found){if(!(h.anchor||h.tag||d||m)){0===i&&h.comma?r(h.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${o}`):i<s.items.length-1&&r(h.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${o}`),h.comment&&(c.comment?c.comment+="\n"+h.comment:c.comment=h.comment),u=h.end;continue}!a&&n.options.strict&&Ke(f)&&r(f,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(0===i)h.comma&&r(h.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${o}`);else if(h.comma||r(h.start,"MISSING_CHAR",`Missing , between ${o} items`),h.comment){let t="";t:for(const e of p)switch(e.type){case"comma":case"space":break;case"comment":t=e.source.substring(1);break t;default:break t}if(t){let e=c.items[c.items.length-1];A(e)&&(e=e.value??e.key),e.comment?e.comment+="\n"+t:e.comment=t,h.comment=h.comment.substring(t.length+1)}}if(a||d||h.found){const s=h.end,i=f?t(n,f,h,r):e(n,s,p,null,h,r);Je(f)&&r(i.range,"BLOCK_IN_FLOW",ze);const g=Fe(d??[],{flow:o,indicator:"map-value-ind",next:m,offset:i.range[2],onError:r,startOnNewline:!1});if(g.found){if(!a&&!h.found&&n.options.strict){if(d)for(const t of d){if(t===g.found)break;if("newline"===t.type){r(t,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}h.start<g.found.offset-1024&&r(g.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else m&&("source"in m&&m.source&&":"===m.source[0]?r(m,"MISSING_CHAR",`Missing space after : in ${o}`):r(g.start,"MISSING_CHAR",`Missing , or : between ${o} items`));const _=m?t(n,m,g,r):g.found?e(n,g.end,d,null,g,r):null;_?Je(m)&&r(_.range,"BLOCK_IN_FLOW",ze):g.comment&&(i.comment?i.comment+="\n"+g.comment:i.comment=g.comment);const y=new At(i,_);if(n.options.keepSourceTokens&&(y.srcToken=l),a){const t=c;Ge(n,t.items,i)&&r(s,"DUPLICATE_KEY","Map keys must be unique"),t.items.push(y)}else{const t=new Lt(n.schema);t.flow=!0,t.items.push(y),c.items.push(t)}u=_?_.range[2]:g.end}else{const s=m?t(n,m,h,r):e(n,h.end,d,null,h,r);c.items.push(s),u=s.range[2],Je(m)&&r(s.range,"BLOCK_IN_FLOW",ze)}}const p=a?"}":"]",[f,...d]=s.end;let m=u;if(f&&f.source===p)m=f.offset+f.source.length;else{const t=o[0].toUpperCase()+o.substring(1);r(u,l?"MISSING_CHAR":"BAD_INDENT",l?`${t} must end with a ${p}`:`${t} in block collection must be sufficiently indented and end with a ${p}`),f&&1!==f.source.length&&d.unshift(f)}if(d.length>0){const t=He(d,m,n.options.strict,r);t.comment&&(c.comment?c.comment+="\n"+t.comment:c.comment=t.comment),c.range=[s.offset,m,t.offset]}else c.range=[s.offset,m,m];return c}(t,e,n,s,i),o=a.constructor;return"!"===r||r===o.tagName?(a.tag=o.tagName,a):(r&&(a.tag=r),a)}function Xe(t,e,n){const s=t.offset,r=function({offset:t,props:e},n,s){if("block-scalar-header"!==e[0].type)return s(e[0],"IMPOSSIBLE","Block scalar header not found"),null;const{source:r}=e[0],i=r[0];let a=0,o="",c=-1;for(let e=1;e<r.length;++e){const n=r[e];if(o||"-"!==n&&"+"!==n){const s=Number(n);!a&&s?a=s:-1===c&&(c=t+e)}else o=n}-1!==c&&s(c,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${r}`);let l=!1,u="",p=r.length;for(let t=1;t<e.length;++t){const r=e[t];switch(r.type){case"space":l=!0;case"newline":p+=r.source.length;break;case"comment":n&&!l&&s(r,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),p+=r.source.length,u=r.source.substring(1);break;case"error":s(r,"UNEXPECTED_TOKEN",r.message),p+=r.source.length;break;default:{s(r,"UNEXPECTED_TOKEN",`Unexpected token in block scalar header: ${r.type}`);const t=r.source;t&&"string"==typeof t&&(p+=t.length)}}}return{mode:i,indent:a,chomp:o,comment:u,length:p}}(t,e,n);if(!r)return{value:"",type:null,comment:"",range:[s,s,s]};const i=">"===r.mode?et.BLOCK_FOLDED:et.BLOCK_LITERAL,a=t.source?function(t){const e=t.split(/\n( *)/),n=e[0],s=n.match(/^( *)/),r=[s?.[1]?[s[1],n.slice(s[1].length)]:["",n]];for(let t=1;t<e.length;t+=2)r.push([e[t],e[t+1]]);return r}(t.source):[];let o=a.length;for(let t=a.length-1;t>=0;--t){const e=a[t][1];if(""!==e&&"\r"!==e)break;o=t}if(0===o){const e="+"===r.chomp&&a.length>0?"\n".repeat(Math.max(1,a.length-1)):"";let n=s+r.length;return t.source&&(n+=t.source.length),{value:e,type:i,comment:r.comment,range:[s,n,n]}}let c=t.indent+r.indent,l=t.offset+r.length,u=0;for(let t=0;t<o;++t){const[e,s]=a[t];if(""!==s&&"\r"!==s){if(e.length<c){const t="Block scalars with more-indented leading empty lines must use an explicit indentation indicator";n(l+e.length,"MISSING_CHAR",t)}0===r.indent&&(c=e.length),u=t;break}0===r.indent&&e.length>c&&(c=e.length),l+=e.length+s.length+1}for(let t=a.length-1;t>=o;--t)a[t][0].length>c&&(o=t+1);let p="",f="",d=!1;for(let t=0;t<u;++t)p+=a[t][0].slice(c)+"\n";for(let t=u;t<o;++t){let[e,s]=a[t];l+=e.length+s.length+1;const o="\r"===s[s.length-1];if(o&&(s=s.slice(0,-1)),s&&e.length<c){const t="Block scalar lines must not be less indented than their "+(r.indent?"explicit indentation indicator":"first line");n(l-s.length-(o?2:1),"BAD_INDENT",t),e=""}i===et.BLOCK_LITERAL?(p+=f+e.slice(c)+s,f="\n"):e.length>c||"\t"===s[0]?(" "===f?f="\n":d||"\n"!==f||(f="\n\n"),p+=f+e.slice(c)+s,f="\n",d=!0):""===s?"\n"===f?p+="\n":f="\n":(p+=f+s,f=" ",d=!1)}switch(r.chomp){case"-":break;case"+":for(let t=o;t<a.length;++t)p+="\n"+a[t][0].slice(c);"\n"!==p[p.length-1]&&(p+="\n");break;default:p+="\n"}const m=s+r.length+t.source.length;return{value:p,type:i,comment:r.comment,range:[s,m,m]}}function Qe(t,e,n){const{offset:s,type:r,source:i,end:a}=t;let o,c;const l=(t,e,r)=>n(s+t,e,r);switch(r){case"scalar":o=et.PLAIN,c=function(t,e){let n="";switch(t[0]){case"\t":n="a tab character";break;case",":n="flow indicator character ,";break;case"%":n="directive indicator character %";break;case"|":case">":n=`block scalar indicator ${t[0]}`;break;case"@":case"`":n=`reserved character ${t[0]}`}return n&&e(0,"BAD_SCALAR_START",`Plain value cannot start with ${n}`),Ze(t)}(i,l);break;case"single-quoted-scalar":o=et.QUOTE_SINGLE,c=function(t,e){return"'"===t[t.length-1]&&1!==t.length||e(t.length,"MISSING_CHAR","Missing closing 'quote"),Ze(t.slice(1,-1)).replace(/''/g,"'")}(i,l);break;case"double-quoted-scalar":o=et.QUOTE_DOUBLE,c=function(t,e){let n="";for(let s=1;s<t.length-1;++s){const r=t[s];if("\r"!==r||"\n"!==t[s+1])if("\n"===r){const{fold:e,offset:r}=tn(t,s);n+=e,s=r}else if("\\"===r){let r=t[++s];const i=en[r];if(i)n+=i;else if("\n"===r)for(r=t[s+1];" "===r||"\t"===r;)r=t[1+ ++s];else if("\r"===r&&"\n"===t[s+1])for(r=t[1+ ++s];" "===r||"\t"===r;)r=t[1+ ++s];else if("x"===r||"u"===r||"U"===r){const i={x:2,u:4,U:8}[r];n+=nn(t,s+1,i,e),s+=i}else{const r=t.substr(s-1,2);e(s-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${r}`),n+=r}}else if(" "===r||"\t"===r){const e=s;let i=t[s+1];for(;" "===i||"\t"===i;)i=t[1+ ++s];"\n"===i||"\r"===i&&"\n"===t[s+2]||(n+=s>e?t.slice(e,s+1):r)}else n+=r}return'"'===t[t.length-1]&&1!==t.length||e(t.length,"MISSING_CHAR",'Missing closing "quote'),n}(i,l);break;default:return n(t,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${r}`),{value:"",type:null,comment:"",range:[s,s+i.length,s+i.length]}}const u=s+i.length,p=He(a,u,e,n);return{value:c,type:o,comment:p.comment,range:[s,u,p.offset]}}function Ze(t){let e,n;try{e=new RegExp("(.*?)(?<![ \t])[ \t]*\r?\n","sy"),n=new RegExp("[ \t]*(.*?)(?:(?<![ \t])[ \t]*)?\r?\n","sy")}catch(t){e=/(.*?)[ \t]*\r?\n/ys,n=/[ \t]*(.*?)[ \t]*\r?\n/ys}let s=e.exec(t);if(!s)return t;let r=s[1],i=" ",a=e.lastIndex;for(n.lastIndex=a;s=n.exec(t);)""===s[1]?"\n"===i?r+=i:i="\n":(r+=i+s[1],i=" "),a=n.lastIndex;const o=/[ \t]*(.*)/ys;return o.lastIndex=a,s=o.exec(t),r+i+(s?.[1]??"")}function tn(t,e){let n="",s=t[e+1];for(;!(" "!==s&&"\t"!==s&&"\n"!==s&&"\r"!==s||"\r"===s&&"\n"!==t[e+2]);)"\n"===s&&(n+="\n"),s=t[(e+=1)+1];return n||(n=" "),{fold:n,offset:e}}const en={0:"\0",a:"",b:"\b",e:"",f:"\f",n:"\n",r:"\r",t:"\t",v:"\v",N:"",_:" ",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","\t":"\t"};function nn(t,e,n,s){const r=t.substr(e,n),i=r.length===n&&/^[0-9a-fA-F]+$/.test(r)?parseInt(r,16):NaN;if(isNaN(i)){const r=t.substr(e-2,n+2);return s(e-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${r}`),r}return String.fromCodePoint(i)}function sn(t,e,n,s){const{value:r,type:i,comment:a,range:o}="block-scalar"===e.type?Xe(e,t.options.strict,s):Qe(e,t.options.strict,s),c=n?t.directives.tagName(n.source,(t=>s(n,"TAG_RESOLVE_FAILED",t))):null,l=n&&c?function(t,e,n,s,r){if("!"===n)return t[$];const i=[];for(const e of t.tags)if(!e.collection&&e.tag===n){if(!e.default||!e.test)return e;i.push(e)}for(const t of i)if(t.test?.test(e))return t;const a=t.knownTags[n];return a&&!a.collection?(t.tags.push(Object.assign({},a,{default:!1,test:void 0})),a):(r(s,"TAG_RESOLVE_FAILED",`Unresolved tag: ${n}`,"tag:yaml.org,2002:str"!==n),t[$])}(t.schema,r,c,n,s):"scalar"===e.type?function({directives:t,schema:e},n,s,r){const i=e.tags.find((t=>t.default&&t.test?.test(n)))||e[$];if(e.compat){const a=e.compat.find((t=>t.default&&t.test?.test(n)))??e[$];i.tag!==a.tag&&r(s,"TAG_RESOLVE_FAILED",`Value may be parsed as either ${t.tagString(i.tag)} or ${t.tagString(a.tag)}`,!0)}return i}(t,r,e,s):t.schema[$];let u;try{const i=l.resolve(r,(t=>s(n??e,"TAG_RESOLVE_FAILED",t)),t.options);u=C(i)?i:new et(i)}catch(t){const i=t instanceof Error?t.message:String(t);s(n??e,"TAG_RESOLVE_FAILED",i),u=new et(r)}return u.range=o,u.source=r,i&&(u.type=i),c&&(u.tag=c),l.format&&(u.format=l.format),a&&(u.comment=a),u}function rn(t,e,n){if(e){null===n&&(n=e.length);for(let s=n-1;s>=0;--s){let n=e[s];switch(n.type){case"space":case"comment":case"newline":t-=n.source.length;continue}for(n=e[++s];"space"===n?.type;)t+=n.source.length,n=e[++s];break}}return t}const an={composeNode:on,composeEmptyNode:cn};function on(t,e,n,s){const{spaceBefore:r,comment:i,anchor:a,tag:o}=n;let c,l=!0;switch(e.type){case"alias":c=function({options:t},{offset:e,source:n,end:s},r){const i=new Q(n.substring(1));""===i.source&&r(e,"BAD_ALIAS","Alias cannot be an empty string"),i.source.endsWith(":")&&r(e+n.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);const a=e+n.length,o=He(s,a,t.strict,r);return i.range=[e,a,o.offset],o.comment&&(i.comment=o.comment),i}(t,e,s),(a||o)&&s(e,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":c=sn(t,e,o,s),a&&(c.anchor=a.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":c=function(t,e,n,s,r){const i=s?e.directives.tagName(s.source,(t=>r(s,"TAG_RESOLVE_FAILED",t))):null,a="block-map"===n.type?"map":"block-seq"===n.type?"seq":"{"===n.start.source?"map":"seq";if(!s||!i||"!"===i||i===Lt.tagName&&"map"===a||i===Dt.tagName&&"seq"===a||!a)return Ye(t,e,n,r,i);let o=e.schema.tags.find((t=>t.tag===i&&t.collection===a));if(!o){const c=e.schema.knownTags[i];if(!c||c.collection!==a)return c?.collection?r(s,"BAD_COLLECTION_TYPE",`${c.tag} used for ${a} collection, but expects ${c.collection}`,!0):r(s,"TAG_RESOLVE_FAILED",`Unresolved tag: ${i}`,!0),Ye(t,e,n,r,i);e.schema.tags.push(Object.assign({},c,{default:!1})),o=c}const c=Ye(t,e,n,r,i,o),l=o.resolve?.(c,(t=>r(s,"TAG_RESOLVE_FAILED",t)),e.options)??c,u=M(l)?l:new et(l);return u.range=c.range,u.tag=i,o?.format&&(u.format=o.format),u}(an,t,e,o,s),a&&(c.anchor=a.source.substring(1));break;default:s(e,"UNEXPECTED_TOKEN","error"===e.type?e.message:`Unsupported token (type: ${e.type})`),c=cn(t,e.offset,void 0,null,n,s),l=!1}return a&&""===c.anchor&&s(a,"BAD_ALIAS","Anchor cannot be an empty string"),r&&(c.spaceBefore=!0),i&&("scalar"===e.type&&""===e.source?c.comment=i:c.commentBefore=i),t.options.keepSourceTokens&&l&&(c.srcToken=e),c}function cn(t,e,n,s,{spaceBefore:r,comment:i,anchor:a,tag:o,end:c},l){const u=sn(t,{type:"scalar",offset:rn(e,n,s),indent:-1,source:""},o,l);return a&&(u.anchor=a.source.substring(1),""===u.anchor&&l(a,"BAD_ALIAS","Anchor cannot be an empty string")),r&&(u.spaceBefore=!0),i&&(u.comment=i,u.range[2]=c),u}function ln(t){if("number"==typeof t)return[t,t+1];if(Array.isArray(t))return 2===t.length?t:[t[0],t[1]];const{offset:e,source:n}=t;return[e,e+("string"==typeof n?n.length:1)]}function un(t){let e="",n=!1,s=!1;for(let r=0;r<t.length;++r){const i=t[r];switch(i[0]){case"#":e+=(""===e?"":s?"\n\n":"\n")+(i.substring(1)||" "),n=!0,s=!1;break;case"%":"#"!==t[r+1]?.[0]&&(r+=1),n=!1;break;default:n||(s=!0),n=!1}}return{comment:e,afterEmptyLine:s}}class pn{constructor(t={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(t,e,n,s)=>{const r=ln(t);s?this.warnings.push(new qe(r,e,n)):this.errors.push(new Re(r,e,n))},this.directives=new G({version:t.version||"1.2"}),this.options=t}decorate(t,e){const{comment:n,afterEmptyLine:s}=un(this.prelude);if(n){const r=t.contents;if(e)t.comment=t.comment?`${t.comment}\n${n}`:n;else if(s||t.directives.docStart||!r)t.commentBefore=n;else if(j(r)&&!r.flow&&r.items.length>0){let t=r.items[0];A(t)&&(t=t.key);const e=t.commentBefore;t.commentBefore=e?`${n}\n${e}`:n}else{const t=r.commentBefore;r.commentBefore=t?`${n}\n${t}`:n}}e?(Array.prototype.push.apply(t.errors,this.errors),Array.prototype.push.apply(t.warnings,this.warnings)):(t.errors=this.errors,t.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:un(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(t,e=!1,n=-1){for(const e of t)yield*this.next(e);yield*this.end(e,n)}*next(t){switch(t.type){case"directive":this.directives.add(t.source,((e,n,s)=>{const r=ln(t);r[0]+=e,this.onError(r,"BAD_DIRECTIVE",n,s)})),this.prelude.push(t.source),this.atDirectives=!0;break;case"document":{const e=function(t,e,{offset:n,start:s,value:r,end:i},a){const o=Object.assign({_directives:e},t),c=new Pe(void 0,o),l={atRoot:!0,directives:c.directives,options:c.options,schema:c.schema},u=Fe(s,{indicator:"doc-start",next:r??i?.[0],offset:n,onError:a,startOnNewline:!0});u.found&&(c.directives.docStart=!0,!r||"block-map"!==r.type&&"block-seq"!==r.type||u.hasNewline||a(u.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),c.contents=r?on(l,r,u,a):cn(l,u.end,s,null,u,a);const p=c.contents.range[2],f=He(i,p,!1,a);return f.comment&&(c.comment=f.comment),c.range=[n,p,f.offset],c}(this.options,this.directives,t,this.onError);this.atDirectives&&!e.directives.docStart&&this.onError(t,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(e,!1),this.doc&&(yield this.doc),this.doc=e,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(t.source);break;case"error":{const e=t.source?`${t.message}: ${JSON.stringify(t.source)}`:t.message,n=new Re(ln(t),"UNEXPECTED_TOKEN",e);this.atDirectives||!this.doc?this.errors.push(n):this.doc.errors.push(n);break}case"doc-end":{if(!this.doc){const e="Unexpected doc-end without preceding document";this.errors.push(new Re(ln(t),"UNEXPECTED_TOKEN",e));break}this.doc.directives.docEnd=!0;const e=He(t.end,t.offset+t.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),e.comment){const t=this.doc.comment;this.doc.comment=t?`${t}\n${e.comment}`:e.comment}this.doc.range[2]=e.offset;break}default:this.errors.push(new Re(ln(t),"UNEXPECTED_TOKEN",`Unsupported token ${t.type}`))}}*end(t=!1,e=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(t){const t=Object.assign({_directives:this.directives},this.options),n=new Pe(void 0,t);this.atDirectives&&this.onError(e,"MISSING_CHAR","Missing directives-end indicator line"),n.range=[0,e,e],this.decorate(n,!1),yield n}}}function fn(t,e=!0,n){if(t){const s=(t,e,s)=>{const r="number"==typeof t?t:Array.isArray(t)?t[0]:t.offset;if(!n)throw new Re([r,r+1],e,s);n(r,e,s)};switch(t.type){case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return Qe(t,e,s);case"block-scalar":return Xe(t,e,s)}}return null}function dn(t,e){const{implicitKey:n=!1,indent:s,inFlow:r=!1,offset:i=-1,type:a="PLAIN"}=e,o=Et({type:a,value:t},{implicitKey:n,indent:s>0?" ".repeat(s):"",inFlow:r,options:{blockQuote:!0,lineWidth:-1}}),c=e.end??[{type:"newline",offset:-1,indent:s,source:"\n"}];switch(o[0]){case"|":case">":{const t=o.indexOf("\n"),e=o.substring(0,t),n=o.substring(t+1)+"\n",r=[{type:"block-scalar-header",offset:i,indent:s,source:e}];return hn(r,c)||r.push({type:"newline",offset:-1,indent:s,source:"\n"}),{type:"block-scalar",offset:i,indent:s,props:r,source:n}}case'"':return{type:"double-quoted-scalar",offset:i,indent:s,source:o,end:c};case"'":return{type:"single-quoted-scalar",offset:i,indent:s,source:o,end:c};default:return{type:"scalar",offset:i,indent:s,source:o,end:c}}}function mn(t,e,n={}){let{afterKey:s=!1,implicitKey:r=!1,inFlow:i=!1,type:a}=n,o="indent"in t?t.indent:null;if(s&&"number"==typeof o&&(o+=2),!a)switch(t.type){case"single-quoted-scalar":a="QUOTE_SINGLE";break;case"double-quoted-scalar":a="QUOTE_DOUBLE";break;case"block-scalar":{const e=t.props[0];if("block-scalar-header"!==e.type)throw new Error("Invalid block scalar header");a=">"===e.source[0]?"BLOCK_FOLDED":"BLOCK_LITERAL";break}default:a="PLAIN"}const c=Et({type:a,value:e},{implicitKey:r||null===o,indent:null!==o&&o>0?" ".repeat(o):"",inFlow:i,options:{blockQuote:!0,lineWidth:-1}});switch(c[0]){case"|":case">":!function(t,e){const n=e.indexOf("\n"),s=e.substring(0,n),r=e.substring(n+1)+"\n";if("block-scalar"===t.type){const e=t.props[0];if("block-scalar-header"!==e.type)throw new Error("Invalid block scalar header");e.source=s,t.source=r}else{const{offset:e}=t,n="indent"in t?t.indent:-1,i=[{type:"block-scalar-header",offset:e,indent:n,source:s}];hn(i,"end"in t?t.end:void 0)||i.push({type:"newline",offset:-1,indent:n,source:"\n"});for(const e of Object.keys(t))"type"!==e&&"offset"!==e&&delete t[e];Object.assign(t,{type:"block-scalar",indent:n,props:i,source:r})}}(t,c);break;case'"':gn(t,c,"double-quoted-scalar");break;case"'":gn(t,c,"single-quoted-scalar");break;default:gn(t,c,"scalar")}}function hn(t,e){if(e)for(const n of e)switch(n.type){case"space":case"comment":t.push(n);break;case"newline":return t.push(n),!0}return!1}function gn(t,e,n){switch(t.type){case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":t.type=n,t.source=e;break;case"block-scalar":{const s=t.props.slice(1);let r=e.length;"block-scalar-header"===t.props[0].type&&(r-=t.props[0].source.length);for(const t of s)t.offset+=r;delete t.props,Object.assign(t,{type:n,source:e,end:s});break}case"block-map":case"block-seq":{const s={type:"newline",offset:t.offset+e.length,indent:t.indent,source:"\n"};delete t.items,Object.assign(t,{type:n,source:e,end:[s]});break}default:{const s="indent"in t?t.indent:-1,r="end"in t&&Array.isArray(t.end)?t.end.filter((t=>"space"===t.type||"comment"===t.type||"newline"===t.type)):[];for(const e of Object.keys(t))"type"!==e&&"offset"!==e&&delete t[e];Object.assign(t,{type:n,indent:s,source:e,end:r})}}}const _n=t=>"type"in t?yn(t):bn(t);function yn(t){switch(t.type){case"block-scalar":{let e="";for(const n of t.props)e+=yn(n);return e+t.source}case"block-map":case"block-seq":{let e="";for(const n of t.items)e+=bn(n);return e}case"flow-collection":{let e=t.start.source;for(const n of t.items)e+=bn(n);for(const n of t.end)e+=n.source;return e}case"document":{let e=bn(t);if(t.end)for(const n of t.end)e+=n.source;return e}default:{let e=t.source;if("end"in t&&t.end)for(const n of t.end)e+=n.source;return e}}}function bn({start:t,key:e,sep:n,value:s}){let r="";for(const e of t)r+=e.source;if(e&&(r+=yn(e)),n)for(const t of n)r+=t.source;return s&&(r+=yn(s)),r}const vn=Symbol("break visit"),En=Symbol("skip children"),wn=Symbol("remove item");function $n(t,e){"type"in t&&"document"===t.type&&(t={start:t.start,value:t.value}),Sn(Object.freeze([]),t,e)}function Sn(t,e,n){let s=n(e,t);if("symbol"==typeof s)return s;for(const r of["key","value"]){const i=e[r];if(i&&"items"in i){for(let e=0;e<i.items.length;++e){const s=Sn(Object.freeze(t.concat([[r,e]])),i.items[e],n);if("number"==typeof s)e=s-1;else{if(s===vn)return vn;s===wn&&(i.items.splice(e,1),e-=1)}}"function"==typeof s&&"key"===r&&(s=s(e,t))}}return"function"==typeof s?s(e,t):s}$n.BREAK=vn,$n.SKIP=En,$n.REMOVE=wn,$n.itemAtPath=(t,e)=>{let n=t;for(const[t,s]of e){const e=n?.[t];if(!e||!("items"in e))return;n=e.items[s]}return n},$n.parentCollection=(t,e)=>{const n=$n.itemAtPath(t,e.slice(0,-1))?.[e[e.length-1][0]];if(n&&"items"in n)return n;throw new Error("Parent collection not found")};const On="\ufeff",xn="",Tn="",kn="",An=t=>!!t&&"items"in t,Cn=t=>!!t&&("scalar"===t.type||"single-quoted-scalar"===t.type||"double-quoted-scalar"===t.type||"block-scalar"===t.type);function Nn(t){switch(t){case On:return"<BOM>";case xn:return"<DOC>";case Tn:return"<FLOW_END>";case kn:return"<SCALAR>";default:return JSON.stringify(t)}}function jn(t){switch(t){case On:return"byte-order-mark";case xn:return"doc-mode";case Tn:return"flow-error-end";case kn:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case"\n":case"\r\n":return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(t[0]){case" ":case"\t":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}function Mn(t){switch(t){case void 0:case" ":case"\n":case"\r":case"\t":return!0;default:return!1}}const In="0123456789ABCDEFabcdef".split(""),Ln="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()".split(""),Pn=",[]{}".split(""),Dn=" ,[]{}\n\r\t".split(""),Bn=t=>!t||Dn.includes(t);class Rn{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(t,e=!1){t&&(this.buffer=this.buffer?this.buffer+t:t,this.lineEndPos=null),this.atEnd=!e;let n=this.next??"stream";for(;n&&(e||this.hasChars(1));)n=yield*this.parseNext(n)}atLineEnd(){let t=this.pos,e=this.buffer[t];for(;" "===e||"\t"===e;)e=this.buffer[++t];return!e||"#"===e||"\n"===e||"\r"===e&&"\n"===this.buffer[t+1]}charAt(t){return this.buffer[this.pos+t]}continueScalar(t){let e=this.buffer[t];if(this.indentNext>0){let n=0;for(;" "===e;)e=this.buffer[++n+t];if("\r"===e){const e=this.buffer[n+t+1];if("\n"===e||!e&&!this.atEnd)return t+n+1}return"\n"===e||n>=this.indentNext||!e&&!this.atEnd?t+n:-1}if("-"===e||"."===e){const e=this.buffer.substr(t,3);if(("---"===e||"..."===e)&&Mn(this.buffer[t+3]))return-1}return t}getLine(){let t=this.lineEndPos;return("number"!=typeof t||-1!==t&&t<this.pos)&&(t=this.buffer.indexOf("\n",this.pos),this.lineEndPos=t),-1===t?this.atEnd?this.buffer.substring(this.pos):null:("\r"===this.buffer[t-1]&&(t-=1),this.buffer.substring(this.pos,t))}hasChars(t){return this.pos+t<=this.buffer.length}setNext(t){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=t,null}peek(t){return this.buffer.substr(this.pos,t)}*parseNext(t){switch(t){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let t=this.getLine();if(null===t)return this.setNext("stream");if(t[0]===On&&(yield*this.pushCount(1),t=t.substring(1)),"%"===t[0]){let e=t.length;const n=t.indexOf("#");if(-1!==n){const s=t[n-1];" "!==s&&"\t"!==s||(e=n-1)}for(;;){const n=t[e-1];if(" "!==n&&"\t"!==n)break;e-=1}const s=(yield*this.pushCount(e))+(yield*this.pushSpaces(!0));return yield*this.pushCount(t.length-s),this.pushNewline(),"stream"}if(this.atLineEnd()){const e=yield*this.pushSpaces(!0);return yield*this.pushCount(t.length-e),yield*this.pushNewline(),"stream"}return yield xn,yield*this.parseLineStart()}*parseLineStart(){const t=this.charAt(0);if(!t&&!this.atEnd)return this.setNext("line-start");if("-"===t||"."===t){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");const t=this.peek(3);if("---"===t&&Mn(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,"doc";if("..."===t&&Mn(this.charAt(3)))return yield*this.pushCount(3),"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!Mn(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){const[t,e]=this.peek(2);if(!e&&!this.atEnd)return this.setNext("block-start");if(("-"===t||"?"===t||":"===t)&&Mn(e)){const t=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=t,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);const t=this.getLine();if(null===t)return this.setNext("doc");let e=yield*this.pushIndicators();switch(t[e]){case"#":yield*this.pushCount(t.length-e);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(Bn),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return e+=(yield*this.parseBlockScalarHeader()),e+=(yield*this.pushSpaces(!0)),yield*this.pushCount(t.length-e),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let t,e,n=-1;do{t=yield*this.pushNewline(),t>0?(e=yield*this.pushSpaces(!1),this.indentValue=n=e):e=0,e+=(yield*this.pushSpaces(!0))}while(t+e>0);const s=this.getLine();if(null===s)return this.setNext("flow");if((-1!==n&&n<this.indentNext&&"#"!==s[0]||0===n&&(s.startsWith("---")||s.startsWith("..."))&&Mn(s[3]))&&(n!==this.indentNext-1||1!==this.flowLevel||"]"!==s[0]&&"}"!==s[0]))return this.flowLevel=0,yield Tn,yield*this.parseLineStart();let r=0;for(;","===s[r];)r+=(yield*this.pushCount(1)),r+=(yield*this.pushSpaces(!0)),this.flowKey=!1;switch(r+=(yield*this.pushIndicators()),s[r]){case void 0:return"flow";case"#":return yield*this.pushCount(s.length-r),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(Bn),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{const t=this.charAt(1);if(this.flowKey||Mn(t)||","===t)return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){const t=this.charAt(0);let e=this.buffer.indexOf(t,this.pos+1);if("'"===t)for(;-1!==e&&"'"===this.buffer[e+1];)e=this.buffer.indexOf("'",e+2);else for(;-1!==e;){let t=0;for(;"\\"===this.buffer[e-1-t];)t+=1;if(t%2==0)break;e=this.buffer.indexOf('"',e+1)}const n=this.buffer.substring(0,e);let s=n.indexOf("\n",this.pos);if(-1!==s){for(;-1!==s;){const t=this.continueScalar(s+1);if(-1===t)break;s=n.indexOf("\n",t)}-1!==s&&(e=s-("\r"===n[s-1]?2:1))}if(-1===e){if(!this.atEnd)return this.setNext("quoted-scalar");e=this.buffer.length}return yield*this.pushToIndex(e+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let t=this.pos;for(;;){const e=this.buffer[++t];if("+"===e)this.blockScalarKeep=!0;else if(e>"0"&&e<="9")this.blockScalarIndent=Number(e)-1;else if("-"!==e)break}return yield*this.pushUntil((t=>Mn(t)||"#"===t))}*parseBlockScalar(){let t,e=this.pos-1,n=0;t:for(let s=this.pos;t=this.buffer[s];++s)switch(t){case" ":n+=1;break;case"\n":e=s,n=0;break;case"\r":{const t=this.buffer[s+1];if(!t&&!this.atEnd)return this.setNext("block-scalar");if("\n"===t)break}default:break t}if(!t&&!this.atEnd)return this.setNext("block-scalar");if(n>=this.indentNext){-1===this.blockScalarIndent?this.indentNext=n:this.indentNext+=this.blockScalarIndent;do{const t=this.continueScalar(e+1);if(-1===t)break;e=this.buffer.indexOf("\n",t)}while(-1!==e);if(-1===e){if(!this.atEnd)return this.setNext("block-scalar");e=this.buffer.length}}if(!this.blockScalarKeep)for(;;){let t=e-1,s=this.buffer[t];"\r"===s&&(s=this.buffer[--t]);const r=t;for(;" "===s||"\t"===s;)s=this.buffer[--t];if(!("\n"===s&&t>=this.pos&&t+1+n>r))break;e=t}return yield kn,yield*this.pushToIndex(e+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){const t=this.flowLevel>0;let e,n=this.pos-1,s=this.pos-1;for(;e=this.buffer[++s];)if(":"===e){const e=this.buffer[s+1];if(Mn(e)||t&&","===e)break;n=s}else if(Mn(e)){let r=this.buffer[s+1];if("\r"===e&&("\n"===r?(s+=1,e="\n",r=this.buffer[s+1]):n=s),"#"===r||t&&Pn.includes(r))break;if("\n"===e){const t=this.continueScalar(s+1);if(-1===t)break;s=Math.max(s,t-2)}}else{if(t&&Pn.includes(e))break;n=s}return e||this.atEnd?(yield kn,yield*this.pushToIndex(n+1,!0),t?"flow":"doc"):this.setNext("plain-scalar")}*pushCount(t){return t>0?(yield this.buffer.substr(this.pos,t),this.pos+=t,t):0}*pushToIndex(t,e){const n=this.buffer.slice(this.pos,t);return n?(yield n,this.pos+=n.length,n.length):(e&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(Bn))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"-":case"?":case":":{const t=this.flowLevel>0,e=this.charAt(1);if(Mn(e)||t&&Pn.includes(e))return t?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}}return 0}*pushTag(){if("<"===this.charAt(1)){let t=this.pos+2,e=this.buffer[t];for(;!Mn(e)&&">"!==e;)e=this.buffer[++t];return yield*this.pushToIndex(">"===e?t+1:t,!1)}{let t=this.pos+1,e=this.buffer[t];for(;e;)if(Ln.includes(e))e=this.buffer[++t];else{if("%"!==e||!In.includes(this.buffer[t+1])||!In.includes(this.buffer[t+2]))break;e=this.buffer[t+=3]}return yield*this.pushToIndex(t,!1)}}*pushNewline(){const t=this.buffer[this.pos];return"\n"===t?yield*this.pushCount(1):"\r"===t&&"\n"===this.charAt(1)?yield*this.pushCount(2):0}*pushSpaces(t){let e,n=this.pos-1;do{e=this.buffer[++n]}while(" "===e||t&&"\t"===e);const s=n-this.pos;return s>0&&(yield this.buffer.substr(this.pos,s),this.pos=n),s}*pushUntil(t){let e=this.pos,n=this.buffer[e];for(;!t(n);)n=this.buffer[++e];return yield*this.pushToIndex(e,!1)}}class qn{constructor(){this.lineStarts=[],this.addNewLine=t=>this.lineStarts.push(t),this.linePos=t=>{let e=0,n=this.lineStarts.length;for(;e<n;){const s=e+n>>1;this.lineStarts[s]<t?e=s+1:n=s}return this.lineStarts[e]===t?{line:e+1,col:1}:0===e?{line:0,col:t}:{line:e,col:t-this.lineStarts[e-1]+1}}}}function Un(t,e){for(let n=0;n<t.length;++n)if(t[n].type===e)return!0;return!1}function Fn(t){for(let e=0;e<t.length;++e)switch(t[e].type){case"space":case"comment":case"newline":break;default:return e}return-1}function Kn(t){switch(t?.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function Wn(t){switch(t.type){case"document":return t.start;case"block-map":{const e=t.items[t.items.length-1];return e.sep??e.start}case"block-seq":return t.items[t.items.length-1].start;default:return[]}}function Gn(t){if(0===t.length)return[];let e=t.length;t:for(;--e>=0;)switch(t[e].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break t}for(;"space"===t[++e]?.type;);return t.splice(e,t.length)}function Vn(t){if("flow-seq-start"===t.start.type)for(const e of t.items)!e.sep||e.value||Un(e.start,"explicit-key-ind")||Un(e.sep,"map-value-ind")||(e.key&&(e.value=e.key),delete e.key,Kn(e.value)?e.value.end?Array.prototype.push.apply(e.value.end,e.sep):e.value.end=e.sep:Array.prototype.push.apply(e.start,e.sep),delete e.sep)}class Hn{constructor(t){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new Rn,this.onNewLine=t}*parse(t,e=!1){this.onNewLine&&0===this.offset&&this.onNewLine(0);for(const n of this.lexer.lex(t,e))yield*this.next(n);e||(yield*this.end())}*next(t){if(this.source=t,this.atScalar)return this.atScalar=!1,yield*this.step(),void(this.offset+=t.length);const e=jn(t);if(e)if("scalar"===e)this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=e,yield*this.step(),e){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+t.length);break;case"space":this.atNewLine&&" "===t[0]&&(this.indent+=t.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=t.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=t.length}else{const e=`Not a YAML token: ${t}`;yield*this.pop({type:"error",offset:this.offset,message:e,source:t}),this.offset+=t.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){const t=this.peek(1);if("doc-end"!==this.type||t&&"doc-end"===t.type){if(!t)return yield*this.stream();switch(t.type){case"document":return yield*this.document(t);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(t);case"block-scalar":return yield*this.blockScalar(t);case"block-map":return yield*this.blockMap(t);case"block-seq":return yield*this.blockSequence(t);case"flow-collection":return yield*this.flowCollection(t);case"doc-end":return yield*this.documentEnd(t)}yield*this.pop()}else{for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source})}}peek(t){return this.stack[this.stack.length-t]}*pop(t){const e=t??this.stack.pop();if(e)if(0===this.stack.length)yield e;else{const t=this.peek(1);switch("block-scalar"===e.type?e.indent="indent"in t?t.indent:0:"flow-collection"===e.type&&"document"===t.type&&(e.indent=0),"flow-collection"===e.type&&Vn(e),t.type){case"document":t.value=e;break;case"block-scalar":t.props.push(e);break;case"block-map":{const n=t.items[t.items.length-1];if(n.value)return t.items.push({start:[],key:e,sep:[]}),void(this.onKeyLine=!0);if(!n.sep)return Object.assign(n,{key:e,sep:[]}),void(this.onKeyLine=!Un(n.start,"explicit-key-ind"));n.value=e;break}case"block-seq":{const n=t.items[t.items.length-1];n.value?t.items.push({start:[],value:e}):n.value=e;break}case"flow-collection":{const n=t.items[t.items.length-1];return void(!n||n.value?t.items.push({start:[],key:e,sep:[]}):n.sep?n.value=e:Object.assign(n,{key:e,sep:[]}))}default:yield*this.pop(),yield*this.pop(e)}if(!("document"!==t.type&&"block-map"!==t.type&&"block-seq"!==t.type||"block-map"!==e.type&&"block-seq"!==e.type)){const n=e.items[e.items.length-1];n&&!n.sep&&!n.value&&n.start.length>0&&-1===Fn(n.start)&&(0===e.indent||n.start.every((t=>"comment"!==t.type||t.indent<e.indent)))&&("document"===t.type?t.end=n.start:t.items.push({start:n.start}),e.items.splice(-1,1))}}else{const t="Tried to pop an empty stack";yield{type:"error",offset:this.offset,source:"",message:t}}}*stream(){switch(this.type){case"directive-line":return void(yield{type:"directive",offset:this.offset,source:this.source});case"byte-order-mark":case"space":case"comment":case"newline":return void(yield this.sourceToken);case"doc-mode":case"doc-start":{const t={type:"document",offset:this.offset,start:[]};return"doc-start"===this.type&&t.start.push(this.sourceToken),void this.stack.push(t)}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(t){if(t.value)return yield*this.lineEnd(t);switch(this.type){case"doc-start":return void(-1!==Fn(t.start)?(yield*this.pop(),yield*this.step()):t.start.push(this.sourceToken));case"anchor":case"tag":case"space":case"comment":case"newline":return void t.start.push(this.sourceToken)}const e=this.startBlockValue(t);e?this.stack.push(e):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(t){if("map-value-ind"===this.type){const e=Gn(Wn(this.peek(2)));let n;t.end?(n=t.end,n.push(this.sourceToken),delete t.end):n=[this.sourceToken];const s={type:"block-map",offset:t.offset,indent:t.indent,items:[{start:e,key:t,sep:n}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=s}else yield*this.lineEnd(t)}*blockScalar(t){switch(this.type){case"space":case"comment":case"newline":return void t.props.push(this.sourceToken);case"scalar":if(t.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let t=this.source.indexOf("\n")+1;for(;0!==t;)this.onNewLine(this.offset+t),t=this.source.indexOf("\n",t)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(t){const e=t.items[t.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,e.value){const n="end"in e.value?e.value.end:void 0;"comment"===(Array.isArray(n)?n[n.length-1]:void 0)?.type?n?.push(this.sourceToken):t.items.push({start:[this.sourceToken]})}else e.sep?e.sep.push(this.sourceToken):e.start.push(this.sourceToken);return;case"space":case"comment":if(e.value)t.items.push({start:[this.sourceToken]});else if(e.sep)e.sep.push(this.sourceToken);else{if(this.atIndentedComment(e.start,t.indent)){const n=t.items[t.items.length-2]?.value?.end;if(Array.isArray(n))return Array.prototype.push.apply(n,e.start),n.push(this.sourceToken),void t.items.pop()}e.start.push(this.sourceToken)}return}if(this.indent>=t.indent){const n=!this.onKeyLine&&this.indent===t.indent&&e.sep;let s=[];if(n&&e.sep&&!e.value){const n=[];for(let s=0;s<e.sep.length;++s){const r=e.sep[s];switch(r.type){case"newline":n.push(s);break;case"space":break;case"comment":r.indent>t.indent&&(n.length=0);break;default:n.length=0}}n.length>=2&&(s=e.sep.splice(n[1]))}switch(this.type){case"anchor":case"tag":return void(n||e.value?(s.push(this.sourceToken),t.items.push({start:s}),this.onKeyLine=!0):e.sep?e.sep.push(this.sourceToken):e.start.push(this.sourceToken));case"explicit-key-ind":return e.sep||Un(e.start,"explicit-key-ind")?n||e.value?(s.push(this.sourceToken),t.items.push({start:s})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]}):e.start.push(this.sourceToken),void(this.onKeyLine=!0);case"map-value-ind":if(Un(e.start,"explicit-key-ind"))if(e.sep)if(e.value)t.items.push({start:[],key:null,sep:[this.sourceToken]});else if(Un(e.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:s,key:null,sep:[this.sourceToken]}]});else if(Kn(e.key)&&!Un(e.sep,"newline")){const t=Gn(e.start),n=e.key,s=e.sep;s.push(this.sourceToken),delete e.key,delete e.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:t,key:n,sep:s}]})}else s.length>0?e.sep=e.sep.concat(s,this.sourceToken):e.sep.push(this.sourceToken);else if(Un(e.start,"newline"))Object.assign(e,{key:null,sep:[this.sourceToken]});else{const t=Gn(e.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:t,key:null,sep:[this.sourceToken]}]})}else e.sep?e.value||n?t.items.push({start:s,key:null,sep:[this.sourceToken]}):Un(e.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):e.sep.push(this.sourceToken):Object.assign(e,{key:null,sep:[this.sourceToken]});return void(this.onKeyLine=!0);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const r=this.flowScalar(this.type);return void(n||e.value?(t.items.push({start:s,key:r,sep:[]}),this.onKeyLine=!0):e.sep?this.stack.push(r):(Object.assign(e,{key:r,sep:[]}),this.onKeyLine=!0))}default:{const r=this.startBlockValue(t);if(r)return n&&"block-seq"!==r.type&&Un(e.start,"explicit-key-ind")&&t.items.push({start:s}),void this.stack.push(r)}}}yield*this.pop(),yield*this.step()}*blockSequence(t){const e=t.items[t.items.length-1];switch(this.type){case"newline":if(e.value){const n="end"in e.value?e.value.end:void 0;"comment"===(Array.isArray(n)?n[n.length-1]:void 0)?.type?n?.push(this.sourceToken):t.items.push({start:[this.sourceToken]})}else e.start.push(this.sourceToken);return;case"space":case"comment":if(e.value)t.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(e.start,t.indent)){const n=t.items[t.items.length-2]?.value?.end;if(Array.isArray(n))return Array.prototype.push.apply(n,e.start),n.push(this.sourceToken),void t.items.pop()}e.start.push(this.sourceToken)}return;case"anchor":case"tag":if(e.value||this.indent<=t.indent)break;return void e.start.push(this.sourceToken);case"seq-item-ind":if(this.indent!==t.indent)break;return void(e.value||Un(e.start,"seq-item-ind")?t.items.push({start:[this.sourceToken]}):e.start.push(this.sourceToken))}if(this.indent>t.indent){const e=this.startBlockValue(t);if(e)return void this.stack.push(e)}yield*this.pop(),yield*this.step()}*flowCollection(t){const e=t.items[t.items.length-1];if("flow-error-end"===this.type){let t;do{yield*this.pop(),t=this.peek(1)}while(t&&"flow-collection"===t.type)}else if(0===t.end.length){switch(this.type){case"comma":case"explicit-key-ind":return void(!e||e.sep?t.items.push({start:[this.sourceToken]}):e.start.push(this.sourceToken));case"map-value-ind":return void(!e||e.value?t.items.push({start:[],key:null,sep:[this.sourceToken]}):e.sep?e.sep.push(this.sourceToken):Object.assign(e,{key:null,sep:[this.sourceToken]}));case"space":case"comment":case"newline":case"anchor":case"tag":return void(!e||e.value?t.items.push({start:[this.sourceToken]}):e.sep?e.sep.push(this.sourceToken):e.start.push(this.sourceToken));case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const n=this.flowScalar(this.type);return void(!e||e.value?t.items.push({start:[],key:n,sep:[]}):e.sep?this.stack.push(n):Object.assign(e,{key:n,sep:[]}))}case"flow-map-end":case"flow-seq-end":return void t.end.push(this.sourceToken)}const n=this.startBlockValue(t);n?this.stack.push(n):(yield*this.pop(),yield*this.step())}else{const e=this.peek(2);if("block-map"===e.type&&("map-value-ind"===this.type&&e.indent===t.indent||"newline"===this.type&&!e.items[e.items.length-1].sep))yield*this.pop(),yield*this.step();else if("map-value-ind"===this.type&&"flow-collection"!==e.type){const n=Gn(Wn(e));Vn(t);const s=t.end.splice(1,t.end.length);s.push(this.sourceToken);const r={type:"block-map",offset:t.offset,indent:t.indent,items:[{start:n,key:t,sep:s}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=r}else yield*this.lineEnd(t)}}flowScalar(t){if(this.onNewLine){let t=this.source.indexOf("\n")+1;for(;0!==t;)this.onNewLine(this.offset+t),t=this.source.indexOf("\n",t)+1}return{type:t,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(t){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;const e=Gn(Wn(t));return e.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:e}]}}case"map-value-ind":{this.onKeyLine=!0;const e=Gn(Wn(t));return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:e,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(t,e){return"comment"===this.type&&!(this.indent<=e)&&t.every((t=>"newline"===t.type||"space"===t.type))}*documentEnd(t){"doc-mode"!==this.type&&(t.end?t.end.push(this.sourceToken):t.end=[this.sourceToken],"newline"===this.type&&(yield*this.pop()))}*lineEnd(t){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;default:t.end?t.end.push(this.sourceToken):t.end=[this.sourceToken],"newline"===this.type&&(yield*this.pop())}}}function zn(t){const e=!1!==t.prettyErrors;return{lineCounter:t.lineCounter||e&&new qn||null,prettyErrors:e}}function Jn(t,e={}){const{lineCounter:n,prettyErrors:s}=zn(e),r=new Hn(n?.addNewLine),i=new pn(e),a=Array.from(i.compose(r.parse(t)));if(s&&n)for(const e of a)e.errors.forEach(Ue(t,n)),e.warnings.forEach(Ue(t,n));return a.length>0?a:Object.assign([],{empty:!0},i.streamInfo())}function Yn(t,e={}){const{lineCounter:n,prettyErrors:s}=zn(e),r=new Hn(n?.addNewLine),i=new pn(e);let a=null;for(const e of i.compose(r.parse(t),!0,t.length))if(a){if("silent"!==a.options.logLevel){a.errors.push(new Re(e.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}}else a=e;return s&&n&&(a.errors.forEach(Ue(t,n)),a.warnings.forEach(Ue(t,n))),a}function Xn(t,e,n){let s;"function"==typeof e?s=e:void 0===n&&e&&"object"==typeof e&&(n=e);const r=Yn(t,n);if(!r)return null;if(r.warnings.forEach((t=>St(r.options.logLevel,t))),r.errors.length>0){if("silent"!==r.options.logLevel)throw r.errors[0];r.errors=[]}return r.toJS(Object.assign({reviver:s},n))}function Qn(t,e,n){let s=null;if("function"==typeof e||Array.isArray(e)?s=e:void 0===n&&e&&(n=e),"string"==typeof n&&(n=n.length),"number"==typeof n){const t=Math.round(n);n=t<1?void 0:t>8?{indent:8}:{indent:t}}if(void 0===t){const{keepUndefined:t}=n??e??{};if(!t)return}return new Pe(t,s,n).toString(n)}const Zn=r;var ts=n(5886);n(6054);const es={raw:!0,forAnimation:!1,editing:!1,hideLinks:!1,showExplicitSM:!1,hideOuterSMBoxes:!1,showPorts:!1,hideClasses:!1,hideMethods:!1,hideStateMachines:!1,showEndNames:!1,hideOperations:!1,checkEvents:!1},ns={getSlots:()=>[],isFireable:()=>!0,isActivable:()=>!0,getFireURI:()=>"",isCurrent:()=>!0,eventMatched:()=>!0};async function ss(t,e,n){if(n.rawPlantUML){t=`${t}.puml`;const n=`@startuml\n${e}\n@enduml`;void 0!==n?(c.writeFileSync(t,n),console.log("Saved to",t)):console.log("Unchanged",t)}else await async function(t,e){const n=(0,o.K)("http://127.0.0.1:8082/plantuml/",e);console.log(n);{const e=await m(n),s=await e.text();s.match(/>An error has occured/)&&console.error("PlantUML error"),void 0!==s?(c.writeFileSync(t,s),console.log("Saved to",t)):console.log("Unchanged",t)}}(`${t}.svg`,e)}async function rs(t,e,n){const s=(0,i.tC)(e,ns,n);await ss(t,s,n)}async function is(t){const e=t[2],n=await(0,ts.u7)(e,t[3]||"model");console.log("Setting connector types to existing associations when posssible.");const s=(0,d.OR)(n,!0);for(const t of s.warnings)if(t.type.id===d.v3.noConnectorType.id){var r;const e=null===(r=Object.entries(t.fixes).find((([t,e])=>t.match(/^Set type to existing association(?: ".*")?\.$/))))||void 0===r?void 0:r[1];e&&e()}console.log("Model static analysis results:"),(0,d.BJ)(n);const o=t[4]||"testDiagram",f=o,m=Object.fromEntries(t.slice(5).map((t=>t.split("="))).map((([t,e])=>[t,"true"===e||"false"!==e&&e.split(",").filter((t=>t))])));if(m.rejectedObjects??(m.rejectedObjects=[]),m.listActive){console.log("ACTIVE_OBJECTS:");for(const t of n.objects.filter((t=>n.isActive(t))))console.log(t.name);console.log("END")}if(m.listInteractions){console.log("INTERACTIONS:");for(const t of Object.keys(n.interactions??{}))console.log(t);console.log("END")}if(m.listClasses){console.log("CLASSES:");for(const[t,e]of Object.entries(n.classes??{})){var b;m.hideActorClasses&&null!==(b=e.stereotypes)&&void 0!==b&&b.includes("actor")||e.literals||e.ends||console.log(t)}console.log("END")}if(m.listEnumerations){console.log("ENUMERATIONS:");for(const[t,e]of Object.entries(n.classes??{}))e.literals&&console.log(t);console.log("END")}if(m.listActive||m.listInteractions)return;!function(t,e,n,s){const r=`${e}.doc.schema.yml`;console.log(r),console.log("Writing documentation JSON Schema to",r),c.writeFileSync(r,h.W`
		# DO NOT MODIFY THIS FILE
		# It is automatically generated from ${t}.
		# Any change will be overwritten.
		${Zn.stringify(function(t,{foldedStateFQNs:e=[]}={}){const n=g(t,e);return{$schema:"https://json-schema.org/draft/2020-12/schema",type:"object",properties:{interactions:{description:"This object must contain the descriptions of all interaction/sequence diagrams from your model.",type:"object",properties:Object.fromEntries(Object.keys(t.interactions??{}).map((t=>[t,{description:`This object must contain the description of interaction/sequence diagram "${t}".`,type:"object",properties:{specRef:{description:"Use this field to specify the reference to the corresponding use case from your requirement specification document. The generated document will use this information to properly cite this use case.",type:"string"},desc:{description:"Use this field to describe the corresponding interaction/sequence diagram.",type:"string"}},required:["specRef","desc"],additionalProperties:!1}]))),required:Object.keys(t.interactions??{}),additionalProperties:!1},classifiers:{description:"This object must contain the descriptions of all enumerations, structures, and classes from your model.",type:"object",properties:Object.fromEntries(Object.values(t.classes??{}).flatMap((e=>{if(e.literals)return[[e.name,{description:`This object must contain the description of enumeration "${e.name}", and all of its literals.`,type:"object",properties:{desc:{description:`Use this field to describe enumeration "${e.name}".`,type:"string"},literals:{type:"object",properties:Object.fromEntries(e.literals.map((t=>[t.name,{description:`Use this field to describe enumeration literal "${e.name}::${t.name}".`,type:"string"}]))),required:e.literals.map((t=>t.name)),additionalProperties:!1}},required:["desc","literals"],additionalProperties:!1}]];if(e.ends)return[];{var s,r,i;const a=Object.entries(e.propertyByName??{}).length,o=null===(s=e.operations)||void 0===s?void 0:s.length,c=n[e.name],l=null==c?void 0:c.length;return[[e.name,{description:`This object must contain the description of class "${e.name}", and all of its operations & properties.${_(t,e)?" It must also contain a description of its behavior/state machine.":""}`,type:"object",properties:{desc:{description:`Use this field to describe class "${e.name}".`,type:"string"},...o?{operations:{type:"object",properties:Object.fromEntries((null===(r=e.operations)||void 0===r?void 0:r.map((t=>[t.name,{description:`Use this field to describe operation "${e.name}::${t.name}".`,type:"string"}])))??[]),required:null===(i=e.operations)||void 0===i?void 0:i.map((t=>t.name)),additionalProperties:!1}}:{},...a?{properties:{type:"object",properties:Object.fromEntries(Object.entries(e.propertyByName??{}).map((([t,n])=>[t,{description:`Use this field to describe property "${e.name}::${t}".`,type:"string"}]))),required:Object.entries(e.propertyByName??{}).map((([t,e])=>t)),additionalProperties:!1}}:{},..._(t,e)?{behavior:{description:`Use this object to describe ${e.name}'s behavior.`,type:"object",properties:{desc:{description:`Use this field to describe ${e.name}'s top-level behavior.`,type:"string"},...l?{foldedStates:{description:`Use this object to describe ${e.name}'s folded states.`,type:"object",properties:Object.fromEntries(c.map((t=>[t,{description:`Use this field to describe state ${t} from ${e.name}'s behavior.`,type:"string"}]))),required:c,additionalProperties:!1}}:{}},required:["desc",...l?["foldedStates"]:[]],additionalProperties:!1}}:{}},required:["desc",...o?["operations"]:[],...a?["properties"]:[],..._(t,e)?["behavior"]:[]],additionalProperties:!1}]]}}))),required:Object.values(t.classes??{}).flatMap((t=>t.literals?t.name:t.ends?[]:t.name)),additionalProperties:!1}},required:["interactions","classifiers"],additionalProperties:!1}}(n,{foldedStateFQNs:s.foldedStateFQNs}),void 0,4)}
	`);const i=`${t}.doc.yml`;if(c.statSync(i,{throwIfNoEntry:!1})){let t;try{t="Documentation file could not be read.";const e=c.readFileSync(i).toString();t="Documentation file could not be parsed.";const s=Zn.parse(e);t="Documentation file could not be processed.",function(t,e){for(const[s,r]of Object.entries(e.interactions??{})){var n;const e=null===(n=t.interactions)||void 0===n?void 0:n[s];e?e.comments=[r.desc]:console.log(`Error: interaction not found: "${s}"`)}for(const[n,a]of Object.entries(e.classifiers??{})){var s;const e=null===(s=t.classes)||void 0===s?void 0:s[n];if(e)if(e.comments=[a.desc],"literals"in e&&"literals"in a)for(const[t,n]of Object.entries(a.literals??{})){const s=e.literals.find((e=>e.name===t));s&&(s.comments=[n])}else{if("operations"in a)for(const[t,n]of Object.entries(a.operations)){var r;const s=null===(r=e.operationByName)||void 0===r?void 0:r[t];s&&(s.comments=[n])}if("properties"in a)for(const[t,n]of Object.entries(a.properties)){var i;const s=null===(i=e.propertyByName)||void 0===i?void 0:i[t];s&&(s.comments=[n])}if("behavior"in a){const n=y(t,e);n.behaviorComment=a.behavior.desc;for(const[t,e]of Object.entries(a.behavior.foldedStates??{})){let s=n;for(const e of t.split("."))s=s.stateByName[e];s.comment=e}}}else console.log(`Error: classifier not found: "${n}"`)}}(n,s)}catch(e){console.log(t,e)}}else{console.log(`Documentation file "${i}" not found, extracting from model.`);const t=function(t,e,{foldedStateFQNs:n=[]}={}){const s=g(t,n);return h.W`
		# yaml-language-server: $schema=${e}
		interactions:
			${Object.entries(t.interactions??{}).map((([t,e])=>h.W`
				"${t}":
					specRef: |
						TODO
					desc: |
						TODO
			`))}
		classifiers:
			${Object.values(t.classes??{}).map((e=>{const n=s[e.name],r=null==n?void 0:n.length;var i,a,o,c;return e.literals?h.W`
						${e.name}:
							desc: |
								${null!==(i=e.comments)&&void 0!==i&&i.length?e.comments:"TODO"}
							literals:
								${e.literals.map((t=>{var e;return h.W`
									${t.name}: |
										${null!==(e=t.comments)&&void 0!==e&&e.length?t.comments:"TODO"}
								`}))}
					`:e.ends?void 0:h.W`
						${e.name}:
							desc: |
								${null!==(a=e.comments)&&void 0!==a&&a.length?e.comments:"TODO"}
							${null!==(o=e.operations)&&void 0!==o&&o.length?h.W`
								operations:
									${null===(c=e.operations)||void 0===c?void 0:c.map((t=>{var e;return h.W`
										${t.name}: |
											${null!==(e=t.comments)&&void 0!==e&&e.length?t.comments:"TODO"}
									`}))}
							`:""}
							${Object.entries(e.propertyByName??{}).length?h.W`
								properties:
									${Object.entries(e.propertyByName??{}).map((([t,e])=>{var n;return h.W`
										${t}: |
											${null!==(n=e.comments)&&void 0!==n&&n.length?e.comments:"TODO"}
									`}))}
							`:""}
							${_(t,e)?h.W`
								behavior:
									desc: |
										TODO
									${r?h.W`
										foldedStates:
											${n.map((t=>h.W`
												${t}: |
													TODO
											`))}
									`:""}
							`:""}
					`})).filter((t=>t))}
	`}(n,r,{foldedStateFQNs:s.foldedStateFQNs});c.writeFileSync(i,t.replace(/\t/g,"    "))}}(e,o,n,m);const v={operationCommentLocation:!1,propertyCommentLocation:!1,objectCommentLocation:!1};if(await rs(f,n,{...es,...m}),await rs(`${f}-context`,n,{...es,...m,hideStateMachines:!0,displayedObjects:n.objects.filter((t=>!m.rejectedObjects.includes(t.name))),hideMethods:!0,...v}),await rs(`${f}-class`,n,{...es,...m,hideStateMachines:!0,classDiagram:!0,...v}),await rs(`${f}-classes`,n,{...es,...m,hideStateMachines:!0,classDiagram:!0,showDataTypes:!1,...v}),await rs(`${f}-datatypes`,n,{...es,...m,hideStateMachines:!0,classDiagram:!0,showNonDataTypes:!1,...v}),n.classes){c.writeFileSync(`${f}-macros.tex`,function(t){const e=[];e.push("\\makeatletter");for(const[s,r]of Object.entries(t.interactions??{})){var n;r.comments&&e.push(h.W`
				\\@namedef{inter${s.replaceAll(/[ _'[\]]/g,"").normalize("NFD").replace(/\p{Diacritic}/gu,"")}Description\\macroSuffix}{
					${(null===(n=r.comments)||void 0===n?void 0:n.join("\n"))??""}
				}
			`)}for(const[n,i]of Object.entries(t.classes)){var s;if(i.literals)e.push(h.W`
				\\@namedef{enum${n}Description\\macroSuffix}{
					${(null===(s=i.comments)||void 0===s?void 0:s.join("\n"))??""}
				}
			`),e.push(h.W`
				\\@namedef{enum${n}LiteralList\\macroSuffix}{${i.literals.map((t=>t.name)).join(", ")}}
			`),e.push(h.W`
				\\@namedef{enum${n}LiteralDescriptions\\macroSuffix}{
					\\begin{itemize}
						${i.literals.map((t=>h.W`
							\\item	{\\bf ${t.name}}
								${t.comments?` --- ${t.comments.join("\n")}`:""}
						`))}
					\\end{itemize}
				}
			`);else if(!i.ends){var r;const s=Object.entries(i.propertyByName||{});e.push(h.W`
				\\@namedef{class${n}Description\\macroSuffix}{
					${(null===(r=i.comments)||void 0===r?void 0:r.join("\n"))??""}
				}
			`);const o=os(t,i);if(o){o.behaviorComment&&e.push(h.W`
						\\@namedef{behavior${n}Description\\macroSuffix}{
							${o.behaviorComment}
						}
					`);for(const s of(0,a.Y3)(o))s.comment&&e.push(h.W`
							\\@namedef{state${n}${t.stateFullName(s).replace(/[^.]*[.]/,"").replace(".","")}Description\\macroSuffix}{
								${s.comment}
							}
						`)}e.push(h.W`
				\\@namedef{class${n}Properties\\macroSuffix}{
					${s.length?h.W`
						\\begin{itemize}
							${s.map((([t,e])=>h.W`
								\\item	{\\bf ${t}${e.type?` : ${e.type}${(0,p.BV)(e)}`:""}}
									${e.comments?` --- ${e.comments.join("\n")}`:""}
							`)).join("\n")}
						\\end{itemize}
					`:h.W`
						\\begin{quote}
							N.A.
						\\end{quote}`}
				}
			`);const c=Object.entries(i.operationByName||{});e.push(h.W`
				\\@namedef{class${n}Operations\\macroSuffix}{
					${c.length?h.W`
						\\begin{itemize}
							${c.map((([t,e])=>h.W`
								\\item	{\\bf ${as(e)}}
								${e.comments?` --- ${e.comments.join("\n")}`:""}
							`)).join("\n")}
						\\end{itemize}
					`:h.W`
						\\begin{quote}
							N.A.
						\\end{quote}`}
				}
			`)}}return e.push("\\makeatother"),e.join("\n").replace(/_/g,"\\_")}(n));for(const[t,e]of Object.entries(n.classes)){var E;m.hideActorClasses&&null!==(E=e.stereotypes)&&void 0!==E&&E.includes("actor")||e.literals||e.ends||await rs(`${f}-class-${t}`,n,{...es,...m,hideStateMachines:!0,classDiagram:!0,showDataTypes:!1,displayedClasses:[e],...v})}}else c.writeFileSync(`${f}-macros.tex`,"% no classifier in model\n");for(const t of m.genActivitiesFor??[]){var w;const[e,s,r]=t.split("."),a="class"===e?n.classes[s]:n.getObject(s),o=null==a||null===(w=a.operationByName)||void 0===w?void 0:w[r];if(o){const e=`\n\t\t\t\tgroup ${as(o)}\n\t\t\t\t${(0,i.hy)(o)}\n\t\t\t\tend group\n\t\t\t`;await ss(`${f}-activity-${t}`,e,m)}else console.log(`Error: operation ${t} not found.`)}await async function(t=""){for(const s of n.objects.filter((t=>n.isActive(t)))){console.log("Processing",s.name);const r=`${o}${t}-${s.name}`;await rs(r,n,{displayedObjects:[s],...es,...m}),await rs(`${r}-SM`,n,{...es,displayedObjects:[s],hideClasses:!0,...m,hideOuterSMBoxes:!0});for(const t of(null===(e=m.foldedStateFQNs)||void 0===e?void 0:e.filter((t=>t.startsWith(s.name+"."))))||[]){var e;await rs(`${r}-${t}-SM`,n,{...es,displayedObjects:[s],hideClasses:!0,...m,onlyStateFQN:t,hideOuterSMBoxes:!1})}}}(),Object.entries(n.interactions||{}).forEach((([t,e],s)=>{e.isDummy||(console.log("Processing",t),console.group(),function(t,e,n){!function(t,e){void 0!==e?(c.writeFileSync(t,e,"utf8",(t=>{t&&console.log(t)})),console.log("Saved to",t)):console.log("Unchanged",t)}(n,function(t,e,n=!0,s){const r=(0,l.o)(t,e,{});return n?(0,u.E)(r,void 0,s):r}(t,e,!0,{inlineStyles:!0,removeDominantBaseline:!0}))}(e,n,`${f}-sequence-${t.replace(/ /g,"_")}.svg`),console.groupEnd())}))}function as(t){const e=`${t.name}(${(t.parameters||[]).map((t=>"string"==typeof t?t:`${t.name??""}${t.type?` : ${t.type}${(0,p.BV)(t)}`:""}`)).join(", ")})${t.returnType?` : ${t.returnType}${(0,p.BV)(t)}`:""}${(0,f.Xq)(t.stereotypes)?" "+t.stereotypes.map((t=>`<<${t}>>`)).join(""):""}`;return t.isStatic?`\\underline{${e}}`:e}function os(t,e){return t.isActive(e)?e:t.objects.find((t=>t.class===e.name))}},8686:(t,e,n)=>{"use strict";n.d(e,{x:()=>s});class s{constructor(t){this.n=t,this.buffer=[],this.start=0,this.end=0,this.size=0}get contents(){return this.size===this.n&&this.end!==this.n?[...this.buffer.slice(this.start),...this.buffer.slice(0,this.end)]:this.buffer.slice(this.start,this.end)}push(t){this.end===this.n&&(this.end=0),this.buffer[this.end]=t,this.end++,this.size===this.n?(this.start++,this.start===this.n&&(this.start=0)):this.size++}debug(){return{n:this.n,buffer:this.buffer,start:this.start,end:this.end,size:this.size,contents:this.contents}}}},6459:(t,e,n)=>{"use strict";async function s(t,e,n,s,r,i,a,o,c){for(c.push({configuration:null,neighbours:t,index:0});!c.isEmpty();){const t=c.peek();if(t.index<t.neighbours.length){const i=t.neighbours[t.index++],l=await n(i);if(await o(i,l)){if(c.push({configuration:i,neighbours:await e(i),index:0}),await s(t.configuration,i,l,a))return a;continue}if(await r(t.configuration,i,l,a))return a}else if(c.pop(),null!=t.configuration&&await i(t.configuration,t,a))return a}return a}n.d(e,{l:()=>s})},6337:(t,e,n)=>{"use strict";function s(t,e,n,s){this.m_capacity=t,this.m_hashFunction=t=>Math.abs(e(t)),this.m_equalsFunction=n,this.m_maxLoadFactor=.667,this.m_growthFactor=2,this.m_items=new Array(t),this.m_size=0,this.m_isMap=s}n.d(e,{j:()=>s});const r={size(){return this.m_size},toString(){let t="capacity="+this.m_capacity+", size="+this.m_size+" items=[";for(let e=0;e<this.m_capacity;e++)0!=e&&(t+=", "),t+=JSON.stringify(this.m_items[e]);return t+="]",t},add(t,e=null){this.m_size>=this.m_capacity*this.m_maxLoadFactor&&this.grow();let n=this.m_hashFunction(t)%this.m_capacity;if(null==this.m_items[n])return this.m_items[n]=this.m_isMap?{key:t,value:e}:t,this.m_size++,!this.m_isMap||null;let s=this.m_items[n];if(this.m_equalsFunction(t,this.m_isMap?s.key:s)){if(!this.m_isMap)return!1;let t=s.value;return s.value=e,t}let r=n;do{n=(n+1)%this.m_capacity}while(null!=this.m_items[n]&&!this.m_equalsFunction(t,this.m_isMap?this.m_items[n].key:this.m_items[n])&&n!=r);if(n==r)throw new Error("The hashset is full");if(null==this.m_items[n])return this.m_items[n]=this.m_isMap?{key:t,value:e}:t,this.m_size++,!this.m_isMap||null;if(!this.m_isMap)return!1;let i=this.m_items[n].value;return this.m_items[n].value=e,i},contains(t){let e=this.m_hashFunction(t)%this.m_capacity;if(null==this.m_items[e])return!1;let n=this.m_items[e];if(this.m_equalsFunction(t,this.m_isMap?n.key:n))return!0;let s=e;do{e=(e+1)%this.m_capacity}while(null!=this.m_items[e]&&!this.m_equalsFunction(t,this.m_isMap?this.m_items[e].key:this.m_items[e])&&e!=s);return e!=s&&null!=this.m_items[e]},get(t){let e=this.m_hashFunction(t)%this.m_capacity;if(null==this.m_items[e])return null;let n=this.m_items[e];if(this.m_equalsFunction(t,this.m_isMap?n.key:n))return this.m_isMap?n.value:n;let s=e;do{e=(e+1)%this.m_capacity}while(null!=this.m_items[e]&&!this.m_equalsFunction(t,this.m_isMap?this.m_items[e].key:this.m_items[e])&&e!=s);return e==s||null==this.m_items[e]?null:this.m_isMap?this.m_items[e].value:this.m_items[e]},grow(){let t=this.m_capacity*this.m_growthFactor,e=new Array(t);for(let t=0;t<this.m_capacity;t++){let n=this.m_items[t];null!=n&&this.internalAddRehash(e,n,this.m_hashFunction(this.m_isMap?n.key:n))}this.m_capacity=t,this.m_items=e},internalAddRehash(t,e,n){let s=t.length,r=n%s;if(null==t[r])return void(t[r]=e);let i=r;do{r=(r+1)%s}while(null!=t[r]&&r!=i);if(r==i)throw new Error("The hashset is full");null==t[r]&&(t[r]=e)}};r.addIfAbsent=r.add,s.prototype=r,s.prototype.constructor=s},4419:(t,e,n)=>{"use strict";function s(t,e){this.m_growthFactor=e,this.m_top=-1,this.m_items=new Array(t)}n.d(e,{P:()=>s});const r={size(){return this.m_top+1},capacity(){return this.m_items.length},isEmpty(){return-1==this.m_top},isFull(){return this.m_top+1==this.capacity()},push(t){this.growIfFull(),this.m_items[++this.m_top]=t},pop(){return this.isEmpty()?null:this.m_items[this.m_top--]},peek(){return this.isEmpty()?null:this.m_items[this.m_top]},growIfFull(){this.m_top+1<this.m_items.length||(this.m_items.length=this.m_items.length*this.m_growthFactor)},toString:function(){let t="  capacity="+this.capacity()+", size="+this.size()+", isEmpty= "+this.isEmpty()+", isFull= "+this.isFull()+", top="+this.m_top+", items=[";for(let e=0;e<this.capacity();e++)0!=e&&(t+=", "),t+=JSON.stringify(this.m_items[e]);return t+="]",t},map(t){let e=[];for(let n=0;n<this.size();n++)e.push(t(this.m_items[n]));return e}};s.prototype=r,s.prototype.constructor=s},7788:(t,e,n)=>{"use strict";n.r(e),n.d(e,{nbfs_naive:()=>r});var s=n(593);async function r(t,e,n,r,i,a){const o={initial:()=>t,next:e};let c=[],{verified:l,trace:u,configuration_count:p}=await(0,s.bfs_hashset_predicate_mc_full)(o,n,(async function(t){if(!await r(t))return!1;const e=new Proxy(o,(l=async()=>await o.next(t),{get:function(t,e,n){return"initial"===e?l:Reflect.get(...arguments)}}));var l;const u=await(0,s.bfs_hashset_predicate_mc_full)(e,n,(e=>e===t),i,a);return c=u.trace,u.trace.length>0}),i,a);return u.reverse(),c.reverse(),u.push(...c),{verified:l,trace:u,configuration_count:p}}},7996:(t,e,n)=>{"use strict";n.r(e),n.d(e,{ndfs_gs09_cdlp05:()=>a});var s=n(6459),r=n(6337),i=n(4419);async function a(t,e,n,a,o,c){return async function(t,e,n,r,i,a,o){let c={holds:!0,witness:null,trace:[],cc:0,weight:0},{holds:l,witness:u,trace:p,cc:f}=await(0,s.l)(t,e,n,(function(t,e,n,s){const r=a.peek();return r.allRed=!0,r.canonical=n,s.cc++,!1}),(async function(t,e,n,s){return!!await async function(t,e,n,s){const o=i.get(n);return o.color===Symbol.for("cyan")&&!(i.get(a.peek().canonical).weight-o.weight==0&&!await r(t)&&!await r(e)||(s.holds=!1,s.witness=e,s.trace=a.map((t=>t.configuration)).slice(1),s.trace.push(e),0))}(t,e,n,s)||(i.get(n)!==Symbol.for("red")&&(a.peek().allRed=!1),!1)}),(async function(t,c,l){if(l.weight-=await r(t)?1:0,!0===c.allRed)return i.add(c.canonical,Symbol.for("red")),!1;if(await r(t)){const r=await async function(t,e,n,r,i){let a={holds:!0,witness:null,trace:[]};return a=await(0,s.l)(t,e,n,((t,e,n,s)=>!1),(function(t,e,n,s){return r.get(n).color===Symbol.for("cyan")&&(s.holds=!1,s.witness=e,s.trace=i.map((t=>t.configuration)).slice(1),s.trace.push(e),!0)}),((t,e,n)=>!1),a,(function(t,e){return r.get(e)===Symbol.for("blue")&&(r.add(e,Symbol.for("red")),!0)}),i),a}(await e(t),e,n,i,o);return r.holds?(i.add(c.canonical,Symbol.for("red")),!1):(l.holds=!1,l.witness=t,l.trace=a.map((t=>t.configuration)).slice(1),l.trace.push(t),l.trace.push(...r.trace),!0)}return i.add(c.canonical,Symbol.for("blue")),a.isEmpty()||(a.peek().allRed=!1),!1}),c,(async function(t,e){return null===i.get(e)&&(c.weight+=await r(t)?1:0,i.add(e,{color:Symbol.for("cyan"),weight:c.weight}),!0)}),a);return{verified:l,trace:p,configuration_count:f}}(t,e,n,a,new r.j(1024,o,c,!0),new i.P(1024,2),new i.P(1024,2))}},593:(t,e,n)=>{"use strict";n.r(e),n.d(e,{bfs_hashset_predicate_mc_full:()=>l,bfs_hashset_predicate_mc_simple:()=>u,dfs_hashset_predicate_mc_full:()=>p});var s=n(6337);function r(t){this.m_growthFactor=2,this.m_read_idx=0,this.m_write_idx=0,this.m_barrier_idx=0,this.m_items=new Array(t),this.m_size=0}const i={size(){return this.m_size},capacity(){return this.m_items.length},isEmpty(){return 0==this.m_size},isFull(){return this.m_size==this.capacity()},enqueue:function(t){this.growIfFull(),this.m_items[this.m_write_idx]=t,this.m_write_idx=(this.m_write_idx+1)%this.capacity(),this.m_size++},dequeue:function(){if(this.isEmpty())return null;let t=this.m_items[this.m_read_idx];return this.m_read_idx=(this.m_read_idx+1)%this.capacity(),this.m_size--,t},markLayer(){this.m_barrier_idx=this.m_write_idx},layerChanged(){return this.m_read_idx==this.m_barrier_idx},growIfFull:function(){if(this.m_size<this.m_items.length)return;let t=this.capacity();if(this.m_items.length=t*this.m_growthFactor,this.m_write_idx<=this.m_read_idx)if(0==this.m_write_idx)this.m_write_idx=t;else if(this.m_write_idx<=t-this.m_read_idx)this.m_items.copyWithin(t,0,this.m_write_idx),this.m_barrier_idx<this.m_write_idx&&(this.m_barrier_idx=t+this.m_barrier_idx),this.m_write_idx=t+this.m_write_idx;else{let e=this.m_items.length-(t-this.m_read_idx);this.m_items.copyWithin(e,this.m_read_idx,t),this.m_barrier_idx>=this.m_read_idx&&(this.m_barrier_idx=e+(this.m_barrier_idx-this.m_read_idx)),this.m_read_idx=e}},toString:function(){let t="capacity="+this.capacity()+", size="+this.m_size+", isEmpty= "+this.isEmpty()+", isFull= "+this.isFull()+", ridx="+this.m_read_idx+", widx="+this.m_write_idx+", bidx="+this.m_barrier_idx+" items=[";for(let e=0;e<this.capacity();e++)0!=e&&(t+=", "),t+=JSON.stringify(this.m_items[e]);return t+="]",t}};r.prototype=i,r.prototype.constructor=r;var a=n(4419),o=n(6459);async function c(t,e=(t=>t),n,s,r,i){let a=await t.initial(),o={holds:!0,witness:null,configuration_count:0,parents:i},{holds:c,witness:l,configuration_count:u,parents:p}=await async function(e,n,r,i,a,o,c,l,u){let p=!0;for(;!u.isEmpty()||p;){let n=null,a=null;p?(a=e,p=!1):(n=u.dequeue(),a=await(d=n,t.next(d)));for(let t of a){let e=await r(t);if(await(f=e,s.add(f))){if(u.enqueue(t),await i(n,t,0,c))return c}else if(await!1)return c}if(await!1)return c}var f,d;return c}(a,0,e,(async function(t,e,s,r){return r.holds=await n(e),r.witness=r.holds?e:null,r.configuration_count++,r.parents.contains(e)||r.parents.add(e,t),r.holds}),0,0,o,0,r);if(c){let t=function(t,e){let n=[],s=t;for(;null!=s;)n.push(s),s=e.get(s);return n.reverse()}(l,p);return{verified:!1,trace:t,configuration_count:u}}return{verified:!0,trace:[],configuration_count:u}}async function l(t,e,n,i,a){return c(t,e,n,new s.j(1024,i,a,!1),new r(1024),new s.j(1024,i,a,!0))}async function u(t,e){let n=e=>t.configurationHashFn(e),i=(e,n)=>t.configurationEqFn(e,n),a=new s.j(1024,n,i,!1),o=new r(1024),l=new s.j(1024,n,i,!0);return c(t,(t=>t),e,a,o,l)}async function p(t,e,n,r,i){return async function(t,e=(t=>t),n,s,r){let i=await t.initial(),{holds:a,witness:c,configuration_count:l,trace:u}=await(0,o.l)(i,(e=>t.next(e)),e,(async function(t,e,s,i){return await n(e)?(i.holds=!1,i.witness=e,i.trace=r.map((t=>t.configuration)).slice(1),!0):(i.configuration_count++,!1)}),((t,e,n,s)=>!1),((t,e,n)=>!1),{holds:!0,witness:null,configuration_count:0,trace:[]},((t,e)=>s.add(e)),r);return{verified:a,trace:u,configuration_count:l}}(t,e,n,new s.j(1024,r,i,!1),new a.P(1024,2))}},4453:(t,e,n)=>{"use strict";n.r(e),n.d(e,{STR2TR:()=>s});class s{constructor(t){this.operand=t}initial(){return this.operand.initial()}async next(t){let e=[],n=await this.operand.actions(t);for(let s of n){let n=await this.operand.execute(s,t);e.push(...n)}return e}isAccepting(t){return this.operand.isAccepting(t)}configurationHashFn(t){return this.operand.configurationHashFn(t)}configurationEqFn(t,e){return this.operand.configurationEqFn(t,e)}}},86:(t,e,n)=>{"use strict";n.r(e),n.d(e,{STUTTERING:()=>i,StateSynchronousProductSemantics:()=>s,StepSynchronousProductSemantics:()=>a});class s{constructor(t,e){this.lhs=t,this.rhs=e}configurationHashFn(t){let{lc:e,rc:n}=t,s=this.lhs.configurationHashFn(e);return s^=this.rhs.configurationHashFn(n)+2654435769+(s<<6)+(s>>2),s}configurationEqFn(t,e){let{lc:n,rc:s}=t,{lc:r,rc:i}=e;return this.lhs.configurationEqFn(n,r)&&this.rhs.configurationEqFn(s,i)}async initial(){return await this.rhs.initial().map((t=>({lc:null,rc:t})))}async actions(t){let{lc:e,rc:n}=t,s=[];if(null==e){for(let t of await this.lhs.initial())await r(this.rhs,t,n,s);return s}let i=await this.lhs.actions(e),a=i.length;for(let t of i){let i=await this.lhs.execute(t,e);if(0!=i.length)for(let t of i)await r(this.rhs,t,n,s);else a-=1}return 0==a&&await r(this.rhs,e,n,s),s}async execute(t,e){let{lo:n,ra:s}=t,{lc:r,rc:i}=e;return(await this.rhs.execute(s,n,i)).map((t=>({lc:n,rc:t})))}async isAccepting(t){let{lc:e,rc:n}=t;return await this.lhs.isAccepting(e)&&await this.rhs.isAccepting(n)}}async function r(t,e,n,s){let r=(await t.actions(e,n)).map((t=>({lo:e,ra:t})));s.push(...r)}const i={};class a{constructor(t,e){this.lhs=t,this.rhs=e}configurationHashFn(t){let{lc:e,rc:n}=t,s=this.lhs.configurationHashFn(e);return s^=this.rhs.configurationHashFn(n)+2654435769+(s<<6)+(s>>2),s}configurationEqFn(t,e){let{lc:n,rc:s}=t,{lc:r,rc:i}=e;return this.lhs.configurationEqFn(n,r)&&this.rhs.configurationEqFn(s,i)}async initial(){let t=[];for(let e of await this.lhs.initial())for(let n of await this.rhs.initial())t.push({lc:e,rc:n});return t}async actions(t){let{lc:e,rc:n}=t,s=[],a=await this.lhs.actions(e),o=a.length;for(let t of a){let i=await this.lhs.execute(t,e);if(0!=i.length)for(let a of i){let i={s:e,a:t,t:a};await r(this.rhs,i,n,s)}else o-=1}if(0==o){let t={s:e,a:i,t:e};await r(this.rhs,t,n,s)}return s}async execute(t,e){let{lo:n,ra:s}=t,{lc:r,rc:i}=e,{s:a,a:o,t:c}=n;return(await this.rhs.execute(s,n,i)).map((t=>({lc:c,rc:t})))}async isAccepting(t){let{lc:e,rc:n}=t;return await this.lhs.isAccepting(e)&&await this.rhs.isAccepting(n)}}}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](n,n.exports,__webpack_require__),n.exports}__webpack_require__.d=(t,e)=>{for(var n in e)__webpack_require__.o(e,n)&&!__webpack_require__.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),__webpack_require__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__(5666);var __webpack_exports__=__webpack_require__(2599);globalThis.AnimUMLUtils=__webpack_exports__})();